import{A as e,B as t,C as n,D as r,E as i,F as ee,H as a,I as o,J as te,K as s,L as ne,M as c,P as l,Q as u,R as d,T as f,d as re,k as p,l as ie,n as m,u as h,v as ae,x as g,y as oe,z as _}from"./index-BewjDgXt.js";import{b as se}from"./useDarkMode-v5Dqi2be.js";import{b as ce}from"./MegaSearch-brGl_kL4.js";import{b as le}from"./LanguageSwitcher-ZKeWbNQ2.js";const ue={class:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`},de={class:`bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700`},fe={class:`w-full px-[2%]`},pe={class:`flex justify-between items-center h-16`},me={class:`flex items-center space-x-4`},he={class:`hidden md:block w-80`},ge={key:0,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},_e={key:1,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},ve={class:`flex-1 w-full px-[2%] py-8`},ye={class:`mb-6`},v={class:`mb-8`},y={class:`text-3xl font-bold text-gray-900 dark:text-white mb-2`},b={class:`text-gray-600 dark:text-gray-400`},x={class:`mb-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6`},S={class:`flex space-x-4`},C={class:`flex-1`},w={class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},T={class:`relative`},E=[`placeholder`],D={class:`flex items-end space-x-2`},O=[`disabled`],k={key:0,class:`flex items-center`},A={key:1},j={class:`mb-6`},M={class:`flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg`},N={key:0,class:`flex justify-center items-center py-12`},P={key:1,class:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6`},be={class:`text-red-800 dark:text-red-200`},xe={key:2,class:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden`},Se={class:`overflow-x-auto`},Ce={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},we={class:`bg-gray-50 dark:bg-gray-700`},Te={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Ee={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},De={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Oe={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},ke={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Ae={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},je={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Me={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Ne={key:0},Pe={colspan:7,class:`px-6 py-12 text-center text-gray-500 dark:text-gray-400`},Fe={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ie={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white font-mono`},Le={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Re={class:`font-medium`},ze={class:`text-gray-500 dark:text-gray-400 text-xs`},Be={class:`px-6 py-4 whitespace-nowrap`},Ve={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},He={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ue={class:`px-6 py-4 whitespace-nowrap text-sm font-medium`},We={class:`flex space-x-2`},Ge=[`onClick`],Ke=[`onClick`],qe={key:3,class:`mt-6 flex items-center justify-between`},Je={class:`text-sm text-gray-700 dark:text-gray-300`},Ye={class:`flex space-x-2`},Xe=[`disabled`],Ze=[`onClick`],Qe=[`disabled`],$e={key:0,class:`fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50`},et={class:`relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800`},tt={class:`mt-3`},nt={class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},rt={class:`mb-4`},it={class:`text-sm text-gray-600 dark:text-gray-400 mb-2`},at={class:`font-mono font-medium`},ot={class:`text-sm text-gray-600 dark:text-gray-400`},st={class:`mb-4`},ct={class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},lt=[`placeholder`],ut={class:`flex justify-end space-x-3`},dt=[`disabled`],ft={key:0,class:`flex items-center`},pt={key:1},mt={__name:`BasketDispatch`,setup(mt){let F=re(),ht=ie(),{isDarkMode:gt,toggleDarkMode:I}=se(),L=l([]),R=l(!1),z=l(``),B=l(`all`),V=l(!1),H=l(null),U=l(``),W=l(!1),G=l(``),K=l(!1),q=l({current_page:1,last_page:1,from:0,to:0,total:0,prev_page_url:null,next_page_url:null}),J=oe(()=>B.value===`all`?L.value:B.value===`pending`?L.value.filter(e=>!e.is_dispatched):B.value===`dispatched`?L.value.filter(e=>e.is_dispatched):L.value),_t=()=>{ht.logout(),F.push(`/login`)},Y=async(e=1)=>{R.value=!0,z.value=``;try{let t;t=B.value===`dispatched`?await m.getDispatchedBaskets(e):B.value===`pending`?await m.getPendingBaskets(e):await m.getBaskets(e);let n=t.data.data||t.data;L.value=n.data||[],q.value={current_page:n.current_page||1,last_page:n.last_page||1,from:n.from||0,to:n.to||0,total:n.total||0,prev_page_url:n.prev_page_url,next_page_url:n.next_page_url}}catch(e){console.error(`Error loading baskets:`,e),z.value=`Failed to load baskets. Please try again.`}finally{R.value=!1}},vt=e=>{H.value=e,U.value=``,V.value=!0},X=()=>{V.value=!1,H.value=null,U.value=``},yt=async()=>{if(H.value){W.value=!0;try{await m.dispatchBasket(H.value.barcode,{notes:U.value});let e=L.value.findIndex(e=>e.id===H.value.id);e!==-1&&(L.value[e].is_dispatched=!0,L.value[e].dispatched_at=new Date().toISOString(),L.value[e].dispatch_notes=U.value),X(),console.log(`Basket dispatched successfully!`)}catch(e){console.error(`Error dispatching basket:`,e),z.value=`Failed to dispatch basket. Please try again.`}finally{W.value=!1}}},Z=async()=>{if(G.value){K.value=!0;try{await m.dispatchBasket(G.value),G.value=``,await Y(q.value.current_page),console.log(`Basket dispatched successfully!`)}catch(e){console.error(`Error dispatching basket:`,e),z.value=`Failed to dispatch basket. Please check the barcode and try again.`}finally{K.value=!1}}},Q=()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){alert(`Camera access is not supported in this browser. Please enter the barcode manually.`);return}alert(`Barcode scanner feature would be implemented here. For now, please enter the barcode manually.`)},bt=e=>{console.log(`View basket details:`,e)},$=e=>new Date(e).toLocaleDateString(`en-PK`,{year:`numeric`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`}),xt=()=>{let e=[],t=q.value.current_page,n=q.value.last_page;for(let r=Math.max(1,t-2);r<=Math.min(n,t+2);r++)e.push(r);return e};return s(B,()=>{Y(1)}),ee(()=>{Y()}),(ee,s)=>{let l=te(`router-link`);return a(),t(`div`,ue,[_(`nav`,de,[_(`div`,fe,[_(`div`,pe,[s[10]||=_(`div`,{class:`flex items-center`},[_(`div`,{class:`flex-shrink-0`},[_(`h1`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`A & S Cold Storage`)])],-1),_(`div`,me,[_(`div`,he,[i(ce)]),_(`button`,{onClick:s[0]||=(...e)=>u(I)&&u(I)(...e),class:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},[u(gt)?(a(),t(`svg`,_e,[...s[9]||=[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)]])):(a(),t(`svg`,ge,[...s[8]||=[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]]))]),i(le),_(`button`,{onClick:_t,class:`px-4 py-2 bg-gradient-to-r from-red-400 to-red-500 text-white rounded-lg hover:from-red-500 hover:to-red-600 transition-all duration-200 font-medium`},` Logout `)])])])]),_(`main`,ve,[_(`div`,ye,[i(l,{to:`/dashboard`,class:`inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},{default:ne(()=>[s[11]||=_(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),r(` `+f(u(p)(`form.backToDashboard`)),1)]),_:1})]),_(`div`,v,[_(`h1`,y,f(u(p)(`dispatch.title`)),1),_(`p`,b,f(u(p)(`dispatch.subtitle`)),1)]),_(`div`,x,[s[14]||=_(`h3`,{class:`text-lg font-semibold text-gray-900 dark:text-white mb-4`},`Quick Dispatch`,-1),_(`div`,S,[_(`div`,C,[_(`label`,w,f(u(p)(`basket.form.barcode`)),1),_(`div`,T,[c(_(`input`,{"onUpdate:modelValue":s[1]||=e=>G.value=e,type:`text`,class:`w-full px-3 py-2 pr-12 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white`,placeholder:u(p)(`basket.form.barcode`),onKeyup:ae(Z,[`enter`])},null,40,E),[[h,G.value]]),_(`button`,{onClick:Q,class:`absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300`,title:`Scan Barcode`},[...s[12]||=[_(`svg`,{class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z`})],-1)]])])]),_(`div`,D,[_(`button`,{onClick:Z,disabled:!G.value||K.value,class:`px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[K.value?(a(),t(`span`,k,[s[13]||=_(`svg`,{class:`animate-spin -ml-1 mr-2 h-4 w-4 text-white`,fill:`none`,viewBox:`0 0 24 24`},[_(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),_(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),r(` `+f(u(p)(`form.loading`)),1)])):(a(),t(`span`,A,f(u(p)(`dispatch.dispatch`)),1))],8,O)])])]),_(`div`,j,[_(`div`,M,[_(`button`,{onClick:s[2]||=e=>B.value=`all`,class:d([`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200`,B.value===`all`?`bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm`:`text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`])},f(u(p)(`dispatch.allBaskets`)),3),_(`button`,{onClick:s[3]||=e=>B.value=`pending`,class:d([`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200`,B.value===`pending`?`bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm`:`text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`])},f(u(p)(`dispatch.pendingBaskets`)),3),_(`button`,{onClick:s[4]||=e=>B.value=`dispatched`,class:d([`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200`,B.value===`dispatched`?`bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm`:`text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`])},f(u(p)(`dispatch.dispatchedBaskets`)),3)])]),R.value?(a(),t(`div`,N,[...s[15]||=[_(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600`},null,-1)]])):z.value?(a(),t(`div`,P,[_(`p`,be,f(z.value),1)])):(a(),t(`div`,xe,[_(`div`,Se,[_(`table`,Ce,[_(`thead`,we,[_(`tr`,null,[_(`th`,Te,f(u(p)(`batches.table.sno`)),1),_(`th`,Ee,f(u(p)(`basket.form.barcode`)),1),_(`th`,De,f(u(p)(`batches.table.customer`)),1),_(`th`,Oe,f(u(p)(`dispatch.status`)),1),_(`th`,ke,f(u(p)(`batches.table.createdDate`)),1),_(`th`,Ae,f(u(p)(`dispatch.dispatchDate`)),1),_(`th`,je,f(u(p)(`dispatch.actions`)),1)])]),_(`tbody`,Me,[J.value.length===0?(a(),t(`tr`,Ne,[_(`td`,Pe,f(u(p)(`common.noData`)),1)])):e(``,!0),(a(!0),t(g,null,o(J.value,(n,r)=>(a(),t(`tr`,{key:n.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700`},[_(`td`,Fe,f(r+1),1),_(`td`,Ie,f(n.barcode),1),_(`td`,Le,[_(`div`,null,[_(`div`,Re,f(n.customer?.full_name||`N/A`),1),_(`div`,ze,f(n.customer?.cnic_number||``),1)])]),_(`td`,Be,[_(`span`,{class:d([`inline-flex px-2 py-1 text-xs font-semibold rounded-full`,n.is_dispatched?`bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`:`bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`])},f(n.is_dispatched?u(p)(`dispatch.dispatched`):u(p)(`dispatch.pending`)),3)]),_(`td`,Ve,f($(n.created_at)),1),_(`td`,He,f(n.dispatched_at?$(n.dispatched_at):`-`),1),_(`td`,Ue,[_(`div`,We,[n.is_dispatched?e(``,!0):(a(),t(`button`,{key:0,onClick:e=>vt(n),class:`text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300`},f(u(p)(`dispatch.markDispatched`)),9,Ge)),_(`button`,{onClick:e=>bt(n),class:`text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300`},f(u(p)(`dispatch.viewDetails`)),9,Ke)])])]))),128))])])])])),q.value.last_page>1?(a(),t(`div`,qe,[_(`div`,Je,f(u(p)(`common.showing`))+` `+f(q.value.from)+` `+f(u(p)(`common.to`))+` `+f(q.value.to)+` `+f(u(p)(`common.of`))+` `+f(q.value.total)+` `+f(u(p)(`common.results`)),1),_(`div`,Ye,[_(`button`,{onClick:s[5]||=e=>Y(q.value.current_page-1),disabled:!q.value.prev_page_url,class:`px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed`},f(u(p)(`common.previous`)),9,Xe),(a(!0),t(g,null,o(xt(),e=>(a(),t(`button`,{key:e,onClick:t=>Y(e),class:d([`px-3 py-1 text-sm rounded`,e===q.value.current_page?`bg-blue-600 text-white`:`bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600`])},f(e),11,Ze))),128)),_(`button`,{onClick:s[6]||=e=>Y(q.value.current_page+1),disabled:!q.value.next_page_url,class:`px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed`},f(u(p)(`common.next`)),9,Qe)])])):e(``,!0)]),V.value?(a(),t(`div`,$e,[_(`div`,et,[_(`div`,tt,[_(`h3`,nt,f(u(p)(`dispatch.confirm`)),1),_(`div`,rt,[_(`p`,it,[r(f(u(p)(`basket.form.barcode`))+`: `,1),_(`span`,at,f(H.value?.barcode),1)]),_(`p`,ot,f(u(p)(`batches.table.customer`))+`: `+f(H.value?.customer?.full_name),1)]),_(`div`,st,[_(`label`,ct,f(u(p)(`dispatch.notes`)),1),c(_(`textarea`,{"onUpdate:modelValue":s[7]||=e=>U.value=e,rows:`3`,class:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white`,placeholder:u(p)(`dispatch.notes`)},null,8,lt),[[h,U.value]])]),_(`div`,ut,[_(`button`,{onClick:X,class:`px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors duration-200`},f(u(p)(`common.cancel`)),1),_(`button`,{onClick:yt,disabled:W.value,class:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[W.value?(a(),t(`span`,ft,[s[16]||=_(`svg`,{class:`animate-spin -ml-1 mr-2 h-4 w-4 text-white`,fill:`none`,viewBox:`0 0 24 24`},[_(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),_(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),r(` `+f(u(p)(`form.loading`)),1)])):(a(),t(`span`,pt,f(u(p)(`dispatch.dispatch`)),1))],8,dt)])])])])):e(``,!0),s[17]||=n(`<footer class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-t border-gray-200/50 dark:border-gray-700/50 mt-12 transition-colors duration-300"><div class="w-full px-[2%] py-6"><div class="flex flex-col items-center justify-center space-y-2"><div class="flex items-center space-x-2"><div class="h-6 w-6 bg-gradient-to-r from-gray-800 to-black rounded-md flex items-center justify-center"><svg class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><span class="text-sm text-gray-600 dark:text-gray-400">Powered by</span><span class="text-sm font-semibold text-gray-800 dark:text-gray-200">Emeriosoft</span></div><p class="text-xs text-gray-500 dark:text-gray-400">© 2024 A &amp; S Cold Storage Management System. All rights reserved.</p></div></div></footer>`,1)])}}};var F=mt;export{F as default};