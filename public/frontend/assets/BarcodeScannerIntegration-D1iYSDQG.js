import{B as e,D as t,E as n,F as r,G as i,H as a,J as o,K as s,L as c,M as l,Q as u,T as d,V as f,X as p,e as m,w as h,x as g,z as _}from"./index-6BYkH0DY.js";const v={class:`advanced-barcode-scanner`},y=[`disabled`],b={key:0,class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},x={key:1,class:`w-5 h-5 animate-spin`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},S={class:`manual-input`},C={class:`input-group`},w=[`disabled`],T={key:0,class:`scanner-modal`},E={class:`scanner-container`},D={class:`scanner-header`},O={class:`scanner-status`},k={class:`status-text`},A={class:`scanner-view`},j={class:`scanner-overlay`},M={class:`scanner-controls`},ee={key:0,class:`recent-scans`},te={class:`scans-list`},ne=[`onClick`],re={class:`scan-code`},ie={class:`scan-format`},ae={class:`scan-time`},oe={key:1,class:`result-modal`},se={class:`result-container`},ce={class:`result-content`},le={class:`barcode-info`},ue={class:`barcode-value`},de={class:`barcode-type`},fe={class:`barcode-time`},N={__name:`AdvancedBarcodeScanner`,props:{onScan:{type:Function,required:!0},onSearch:{type:Function,default:null},onCreate:{type:Function,default:null}},setup(a,{expose:m}){let N=a,P=d(!1),F=d(!1),I=d(!1),L=d(!1),R=d(!1),z=d(!0),B=d(``),V=d(null),H=d([]),U=d(0),W=d(null),G=null,pe=()=>I.value?P.value?`Scanning...`:`Scan Barcode`:`Camera Not Available`,K=async()=>{if(!I.value){alert(`Camera not available on this device`);return}F.value=!0,P.value=!0,z.value=!0;try{await me()}catch(e){console.error(`Failed to start scanner:`,e),alert(`Failed to start barcode scanner`)}},me=()=>new Promise((e,t)=>{typeof Quagga>`u`?he().then(()=>{q().then(e).catch(t)}).catch(t):q().then(e).catch(t)}),he=()=>new Promise((e,t)=>{let n=document.createElement(`script`);n.src=`https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js`,n.onload=e,n.onerror=t,document.head.appendChild(n)}),q=()=>new Promise((e,t)=>{let n={inputStream:{name:`Live`,type:`LiveStream`,target:W.value,constraints:{width:640,height:480,facingMode:`environment`}},decoder:{readers:[`code_128_reader`,`ean_reader`,`ean_8_reader`,`code_39_reader`,`code_39_vin_reader`,`codabar_reader`,`upc_reader`,`upc_e_reader`,`i2of5_reader`]},locate:!0,locator:{patchSize:`medium`,halfSample:!0},numOfWorkers:2,frequency:10,debug:{drawBoundingBox:!0,showFrequency:!0,drawScanline:!0,showPattern:!0},multiple:!1};Quagga.init(n,n=>{if(n){console.error(`Quagga initialization failed:`,n),t(n);return}Quagga.start(),G=Quagga,Quagga.onDetected(e=>{z.value&&J(e)}),e()})}),J=e=>{let t={code:e.codeResult.code,format:e.codeResult.format,timestamp:Date.now()};H.value.unshift(t),H.value.length>10&&(H.value=H.value.slice(0,10)),V.value=t,P.value=!1,Y(),N.onScan(t)},Y=()=>{F.value=!1,P.value=!1,G&&=(G.stop(),null)},ge=()=>{z.value=!z.value},_e=()=>{R.value=!R.value},X=()=>{L.value&&(U.value=(U.value+1)%2,Y(),K())},Z=()=>{if(B.value.trim()){let e={code:B.value.trim(),format:`Manual Entry`,timestamp:Date.now()};J(e),B.value=``}},Q=e=>{V.value=e,Y(),N.onScan(e)},$=()=>{V.value=null},ve=()=>{N.onSearch?N.onSearch(V.value):console.log(`Searching for:`,V.value.code),$()},ye=()=>{N.onCreate?N.onCreate(V.value):console.log(`Creating new item with barcode:`,V.value.code),$()},be=async()=>{try{await navigator.clipboard.writeText(V.value.code),alert(`Barcode copied to clipboard!`)}catch(e){console.error(`Failed to copy:`,e);let t=document.createElement(`textarea`);t.value=V.value.code,document.body.appendChild(t),t.select(),document.execCommand(`copy`),document.body.removeChild(t),alert(`Barcode copied to clipboard!`)}},xe=e=>{let t=Date.now(),n=t-e,r=Math.floor(n/6e4);if(r<1)return`Just now`;if(r<60)return`${r}m ago`;let i=Math.floor(r/60);if(i<24)return`${i}h ago`;let a=Math.floor(i/24);return`${a}d ago`},Se=e=>new Date(e).toLocaleString(),Ce=async()=>{try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){let e=await navigator.mediaDevices.enumerateDevices();I.value=e.some(e=>e.kind===`videoinput`),L.value=e.filter(e=>e.kind===`videoinput`).length>1}}catch(e){console.error(`Camera check failed:`,e),I.value=!1}};return o(()=>{Ce()}),s(()=>{Y()}),m({startScanning:K,closeScanner:Y}),(a,o)=>(c(),n(`div`,v,[e(`button`,{onClick:K,disabled:P.value||!I.value,class:f([`scanner-button`,{"opacity-50 cursor-not-allowed":P.value||!I.value}])},[P.value?(c(),n(`svg`,x,[...o[2]||=[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15`},null,-1)]])):(c(),n(`svg`,b,[...o[1]||=[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z`},null,-1)]])),e(`span`,null,p(pe()),1)],10,y),e(`div`,S,[o[4]||=e(`label`,{class:`input-label`},` Or enter barcode manually: `,-1),e(`div`,C,[u(e(`input`,{"onUpdate:modelValue":o[0]||=e=>B.value=e,type:`text`,placeholder:`Enter barcode`,class:`barcode-input`,onKeyup:g(Z,[`enter`])},null,544),[[h,B.value]]),e(`button`,{onClick:Z,disabled:!B.value.trim(),class:`search-button`},[...o[3]||=[e(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z`})],-1)]],8,w)])]),F.value?(c(),n(`div`,T,[e(`div`,E,[e(`div`,D,[o[6]||=e(`h3`,{class:`scanner-title`},`Scan Barcode`,-1),e(`div`,O,[e(`div`,{class:f([`status-indicator`,{active:P.value}])},null,2),e(`span`,k,p(P.value?`Scanning...`:`Ready`),1)]),e(`button`,{onClick:Y,class:`close-button`,"aria-label":`Close scanner`},[...o[5]||=[e(`svg`,{class:`w-6 h-6`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M6 18L18 6M6 6l12 12`})],-1)]])]),e(`div`,A,[e(`div`,{ref_key:`scannerElement`,ref:W,class:`scanner-element`},null,512),e(`div`,j,[o[7]||=r(`<div class="scanner-frame" data-v-307aba28><div class="corner top-left" data-v-307aba28></div><div class="corner top-right" data-v-307aba28></div><div class="corner bottom-left" data-v-307aba28></div><div class="corner bottom-right" data-v-307aba28></div></div>`,1),e(`div`,{class:f([`scanner-line`,{scanning:P.value}])},null,2)]),o[8]||=r(`<div class="scanner-instructions" data-v-307aba28><p class="instruction-text" data-v-307aba28> Position the barcode within the frame </p><div class="supported-formats" data-v-307aba28><span class="format-tag" data-v-307aba28>QR Code</span><span class="format-tag" data-v-307aba28>Code 128</span><span class="format-tag" data-v-307aba28>EAN-13</span><span class="format-tag" data-v-307aba28>UPC-A</span></div></div>`,1)]),e(`div`,M,[e(`button`,{onClick:_e,class:f([`control-button`,{active:R.value}])},[...o[9]||=[e(`svg`,{class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M13 10V3L4 14h7v7l9-11h-7z`})],-1),i(` Flash `,-1)]],2),L.value?(c(),n(`button`,{key:0,onClick:X,class:`control-button`},[...o[10]||=[e(`svg`,{class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15`})],-1),i(` Switch `,-1)]])):t(``,!0),e(`button`,{onClick:ge,class:f([`control-button`,{active:z.value}])},[o[11]||=e(`svg`,{class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M15 12a3 3 0 11-6 0 3 3 0 016 0z`}),e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z`})],-1),i(` `+p(z.value?`Pause`:`Resume`),1)],2)]),H.value.length>0?(c(),n(`div`,ee,[o[12]||=e(`h4`,{class:`recent-title`},`Recent Scans`,-1),e(`div`,te,[(c(!0),n(_,null,l(H.value.slice(0,3),(t,r)=>(c(),n(`div`,{key:r,onClick:e=>Q(t),class:`scan-item`},[e(`div`,re,p(t.code),1),e(`div`,ie,p(t.format),1),e(`div`,ae,p(xe(t.timestamp)),1)],8,ne))),128))])])):t(``,!0)])])):t(``,!0),V.value?(c(),n(`div`,oe,[e(`div`,se,[e(`div`,{class:`result-header`},[o[14]||=e(`div`,{class:`result-icon`},[e(`svg`,{class:`w-8 h-8 text-green-500`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z`})])],-1),o[15]||=e(`h3`,{class:`result-title`},`Barcode Scanned Successfully!`,-1),e(`button`,{onClick:$,class:`result-close`,"aria-label":`Close result`},[...o[13]||=[e(`svg`,{class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M6 18L18 6M6 6l12 12`})],-1)]])]),e(`div`,ce,[e(`div`,le,[o[16]||=e(`p`,{class:`barcode-label`},`Scanned Code:`,-1),e(`p`,ue,p(V.value.code),1),e(`p`,de,p(V.value.format||`Unknown Format`),1),e(`p`,fe,`Scanned at: `+p(Se(V.value.timestamp)),1)]),e(`div`,{class:`result-actions`},[e(`button`,{onClick:ve,class:`action-button primary`},[...o[17]||=[e(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z`})],-1),i(` Search `,-1)]]),e(`button`,{onClick:ye,class:`action-button secondary`},[...o[18]||=[e(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 6v6m0 0v6m0-6h6m-6 0H6`})],-1),i(` Create New `,-1)]]),e(`button`,{onClick:be,class:`action-button tertiary`},[...o[19]||=[e(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z`})],-1),i(` Copy `,-1)]])])])])])):t(``,!0)]))}};var P=m(N,[[`__scopeId`,`data-v-307aba28`]]);const F={class:`barcode-scanner-integration`},I={key:0,class:`scanner-modal`},L={class:`scanner-modal-content`},R={class:`scanner-content`},z={key:0,class:`camera-scanner`},B={class:`manual-input-section`},V={class:`input-group`},H=[`disabled`],U={class:`scanner-type-toggle`},W={key:0,class:`recent-scans`},G={class:`scans-list`},pe=[`onClick`],K={class:`scan-code`},me={class:`scan-info`},he={class:`scan-format`},q={class:`scan-time`},J={key:1,class:`scan-result`},Y={class:`result-content`},ge={class:`result-text`},_e={class:`result-code`},X={class:`result-format`},Z={__name:`BarcodeScannerIntegration`,props:{onScan:{type:Function,required:!0},onSearch:{type:Function,default:null},onCreate:{type:Function,default:null}},setup(r,{expose:s}){let m=r,v=d(!1),y=d(`camera`),b=d(!1),x=d(``),S=d(null),C=d([]),w=e=>{S.value=e,C.value.unshift(e),C.value.length>20&&(C.value=C.value.slice(0,20)),localStorage.setItem(`recentScans`,JSON.stringify(C.value)),m.onScan(e),k()},T=e=>{m.onSearch&&m.onSearch(e),k()},E=e=>{m.onCreate&&m.onCreate(e),k()},D=()=>{if(x.value.trim()){let e={code:x.value.trim(),format:`Manual Entry`,timestamp:Date.now()};w(e),x.value=``}},O=e=>{w(e)},k=()=>{v.value=!1,x.value=``},A=()=>{S.value=null},j=e=>{let t=Date.now(),n=t-e,r=Math.floor(n/6e4);if(r<1)return`Just now`;if(r<60)return`${r}m ago`;let i=Math.floor(r/60);if(i<24)return`${i}h ago`;let a=Math.floor(i/24);return`${a}d ago`},M=async()=>{try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){let e=await navigator.mediaDevices.enumerateDevices();b.value=e.some(e=>e.kind===`videoinput`)}}catch(e){console.error(`Camera check failed:`,e),b.value=!1}},ee=()=>{try{let e=localStorage.getItem(`recentScans`);e&&(C.value=JSON.parse(e))}catch(e){console.error(`Failed to load recent scans:`,e)}};return o(()=>{M(),ee()}),s({openScanner:()=>{v.value=!0},closeScanner:k}),(r,o)=>(c(),n(`div`,F,[e(`button`,{onClick:o[0]||=e=>v.value=!0,class:f([`scanner-trigger-button`,{"opacity-50 cursor-not-allowed":!b.value}])},[...o[4]||=[e(`svg`,{class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z`})],-1),e(`span`,null,`Scan Barcode`,-1)]],2),v.value?(c(),n(`div`,I,[e(`div`,L,[e(`div`,{class:`modal-header`},[o[6]||=e(`h3`,{class:`modal-title`},`Barcode Scanner`,-1),e(`button`,{onClick:k,class:`close-button`,"aria-label":`Close scanner`},[...o[5]||=[e(`svg`,{class:`w-6 h-6`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M6 18L18 6M6 6l12 12`})],-1)]])]),e(`div`,R,[y.value===`camera`?(c(),n(`div`,z,[a(P,{"on-scan":w,"on-search":T,"on-create":E})])):t(``,!0),e(`div`,B,[o[8]||=e(`h4`,{class:`input-title`},`Or enter barcode manually:`,-1),e(`div`,V,[u(e(`input`,{"onUpdate:modelValue":o[1]||=e=>x.value=e,type:`text`,placeholder:`Enter barcode`,class:`barcode-input`,onKeyup:g(D,[`enter`])},null,544),[[h,x.value]]),e(`button`,{onClick:D,disabled:!x.value.trim(),class:`search-button`},[...o[7]||=[e(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z`})],-1)]],8,H)])]),e(`div`,U,[e(`button`,{onClick:o[2]||=e=>y.value=`camera`,class:f([`type-button`,{active:y.value===`camera`}])},[...o[9]||=[e(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z`}),e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M15 13a3 3 0 11-6 0 3 3 0 016 0z`})],-1),i(` Camera `,-1)]],2),e(`button`,{onClick:o[3]||=e=>y.value=`manual`,class:f([`type-button`,{active:y.value===`manual`}])},[...o[10]||=[e(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z`})],-1),i(` Manual `,-1)]],2)])]),C.value.length>0?(c(),n(`div`,W,[o[11]||=e(`h4`,{class:`recent-title`},`Recent Scans`,-1),e(`div`,G,[(c(!0),n(_,null,l(C.value.slice(0,5),(t,r)=>(c(),n(`div`,{key:r,onClick:e=>O(t),class:`scan-item`},[e(`div`,K,p(t.code),1),e(`div`,me,[e(`span`,he,p(t.format),1),e(`span`,q,p(j(t.timestamp)),1)])],8,pe))),128))])])):t(``,!0)])])):t(``,!0),S.value?(c(),n(`div`,J,[e(`div`,Y,[o[13]||=e(`div`,{class:`result-icon`},[e(`svg`,{class:`w-5 h-5 text-green-500`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z`})])],-1),e(`div`,ge,[e(`span`,_e,p(S.value.code),1),e(`span`,X,p(S.value.format),1)]),e(`button`,{onClick:A,class:`clear-button`,"aria-label":`Clear result`},[...o[12]||=[e(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M6 18L18 6M6 6l12 12`})],-1)]])])])):t(``,!0)]))}};var Q=m(Z,[[`__scopeId`,`data-v-c747bc36`]]);export{Q as b};