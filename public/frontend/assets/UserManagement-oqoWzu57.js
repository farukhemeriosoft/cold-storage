import{B as e,D as t,E as n,F as r,G as i,H as a,J as o,L as s,M as c,N as ee,P as l,T as u,V as d,X as f,d as p,e as m,l as te,z as h}from"./index-6BYkH0DY.js";import{b as ne}from"./AppHeader-BKR7rNi1.js";import"./LanguageSwitcher-Bwn7UERh.js";const re={class:`min-h-screen bg-gradient-to-br from-gray-50 via-gray-100 to-gray-200 dark:from-gray-900 dark:via-gray-800 dark:to-gray-700 transition-colors duration-300`},ie={class:`w-full py-8 px-[2%]`},g={class:`w-full`},_={class:`mb-8`},v={class:`flex items-center justify-between`},y={class:`flex space-x-3`},b={class:`bg-white dark:bg-gray-800 rounded-lg shadow-md p-6`},x={class:`overflow-x-auto`},S={class:`min-w-full divide-y divide-gray-200`},C={class:`bg-white divide-y divide-gray-200`},w={class:`px-6 py-4 whitespace-nowrap`},T={class:`flex items-center`},E={class:`flex-shrink-0 h-10 w-10`},D={class:`h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold`},O={class:`ml-4`},k={class:`text-sm font-medium text-gray-900`},A={class:`px-6 py-4 whitespace-nowrap`},j={class:`text-sm text-gray-900`},M={class:`px-6 py-4 whitespace-nowrap`},N={class:`text-sm text-gray-900`},P={class:`px-6 py-4 whitespace-nowrap`},F={class:`flex flex-wrap gap-1`},ae={key:0,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800`},I={class:`px-6 py-4 whitespace-nowrap`},L={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900`},R={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900`},z={class:`px-6 py-4 whitespace-nowrap text-sm font-medium`},B={class:`flex space-x-2`},V=[`onClick`],H=[`onClick`],U=[`onClick`],W=[`onClick`],G={key:0,class:`text-center py-8`},K={key:1,class:`text-center py-8`},q={__name:`UserManagement`,setup(m){let q=p(),J=te(),Y=u([]),X=u(!1),Z=async()=>{X.value=!0;try{let e=await fetch(`/api/user-management`,{headers:{Authorization:`Bearer ${J.token}`,"Content-Type":`application/json`}}),t=await e.json();Y.value=t.data}catch(e){console.error(`Error loading users:`,e),alert(`Error loading users. Please check console for details.`)}finally{X.value=!1}},oe=e=>e?e.split(`@`)[0].toLowerCase().replace(/[^a-z0-9]/g,``):`N/A`,Q=e=>e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`N/A`,se=e=>{q.push(`/edit-user/${e.id}`)},ce=async e=>{let t=e.roles&&e.roles.length>0?`deactivate`:`activate`,n=`Are you sure you want to ${t} this user?`;if(confirm(n))try{let n=await fetch(`/api/user-management/${e.id}/toggle-status`,{method:`POST`,headers:{Authorization:`Bearer ${J.token}`,"Content-Type":`application/json`}});if(n.ok)await Z(),alert(`User ${t}d successfully!`);else{let e=await n.json();alert(`Error: ${e.message||`Failed to update user status`}`)}}catch(e){console.error(`Error updating user status:`,e),alert(`Error updating user status. Please check console for details.`)}},le=async e=>{if(confirm(`Are you sure you want to delete user "${e.name}"? This action cannot be undone.`))try{let t=await fetch(`/api/user-management/${e.id}`,{method:`DELETE`,headers:{Authorization:`Bearer ${J.token}`,"Content-Type":`application/json`}});if(t.ok)await Z(),alert(`User deleted successfully!`);else{let e=await t.json();alert(`Error: ${e.message||`Failed to delete user`}`)}}catch(e){console.error(`Error deleting user:`,e),alert(`Error deleting user. Please check console for details.`)}},$=e=>{console.log(`Managing roles for user:`,e),q.push(`/user-roles/${e.id}`)};return o(()=>{Z()}),(o,u)=>{let p=ee(`router-link`);return s(),n(`div`,re,[a(ne,{"show-back":!0}),e(`main`,ie,[e(`div`,g,[e(`div`,_,[e(`div`,v,[u[2]||=e(`div`,null,[e(`h1`,{class:`text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2`},`User Management`),e(`p`,{class:`text-gray-600 dark:text-gray-400`},`Manage users and their roles`)],-1),e(`div`,y,[a(p,{to:`/add-user`,class:`bg-gradient-to-r from-emerald-400 to-emerald-500 hover:from-emerald-500 hover:to-emerald-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 flex items-center`},{default:l(()=>[...u[0]||=[e(`svg`,{class:`h-5 w-5 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 6v6m0 0v6m0-6h6m-6 0H6`})],-1),i(` Add New User `,-1)]]),_:1}),e(`button`,{onClick:Z,class:`bg-gradient-to-r from-gray-400 to-gray-500 hover:from-gray-500 hover:to-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 flex items-center`},[...u[1]||=[e(`svg`,{class:`h-5 w-5 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15`})],-1),i(` Refresh `,-1)]])])])]),e(`div`,b,[e(`div`,x,[e(`table`,S,[u[3]||=e(`thead`,{class:`bg-gray-50`},[e(`tr`,null,[e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`},` User `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`},` Email `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`},` User ID `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`},` Roles `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`},` Status `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`},` Member Since `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`},` Last Updated `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider`},` Actions `)])],-1),e(`tbody`,C,[(s(!0),n(h,null,c(Y.value,r=>(s(),n(`tr`,{key:r.id,class:`hover:bg-gray-50`},[e(`td`,w,[e(`div`,T,[e(`div`,E,[e(`div`,D,f(r.name.charAt(0).toUpperCase()),1)]),e(`div`,O,[e(`div`,k,f(r.name),1)])])]),e(`td`,A,[e(`div`,j,f(r.email),1)]),e(`td`,M,[e(`div`,N,f(oe(r.email)),1)]),e(`td`,P,[e(`div`,F,[(s(!0),n(h,null,c(r.roles,e=>(s(),n(`span`,{key:e.id,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800`},f(e.name),1))),128)),!r.roles||r.roles.length===0?(s(),n(`span`,ae,` No Roles `)):t(``,!0)])]),e(`td`,I,[e(`span`,{class:d([`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium`,r.roles&&r.roles.length>0?`bg-green-100 text-green-800`:`bg-red-100 text-red-800`])},f(r.roles&&r.roles.length>0?`Active`:`Inactive`),3)]),e(`td`,L,f(Q(r.created_at)),1),e(`td`,R,f(Q(r.updated_at)),1),e(`td`,z,[e(`div`,B,[e(`button`,{onClick:e=>se(r),class:`text-blue-600 hover:text-blue-900`},` Edit `,8,V),e(`button`,{onClick:e=>$(r),class:`text-purple-600 hover:text-purple-900`},` Manage Roles `,8,H),e(`button`,{onClick:e=>ce(r),class:d([r.roles&&r.roles.length>0?`text-red-600 hover:text-red-900`:`text-green-600 hover:text-green-900`])},f(r.roles&&r.roles.length>0?`Deactivate`:`Activate`),11,U),e(`button`,{onClick:e=>le(r),class:`text-red-600 hover:text-red-900`},` Delete `,8,W)])])]))),128))])])]),X.value?(s(),n(`div`,G,[...u[4]||=[e(`div`,{class:`inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500`},null,-1),e(`p`,{class:`mt-2 text-gray-600`},`Loading users...`,-1)]])):t(``,!0),!X.value&&Y.value.length===0?(s(),n(`div`,K,[u[6]||=r(`<div class="text-gray-400 mb-4" data-v-f87cb564><svg class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-f87cb564><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-f87cb564></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2" data-v-f87cb564>No users found</h3><p class="text-gray-500 mb-4" data-v-f87cb564>Get started by adding a new user.</p>`,3),a(p,{to:`/add-user`,class:`bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors`},{default:l(()=>[...u[5]||=[i(` Add New User `,-1)]]),_:1})])):t(``,!0)])])])])}}};var J=m(q,[[`__scopeId`,`data-v-f87cb564`]]);export{J as default};