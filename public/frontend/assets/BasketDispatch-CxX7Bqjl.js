import{A as e,C as t,D as n,E as r,F as i,G as ee,H as a,K as o,L as s,M as c,N as l,d as te,i as u,j as ne,l as d,p as f,q as re,s as p,t as ie,u as m,v as h,w as g,x as ae,y as _,z as v}from"./index-BlF1ZIv-.js";import{b as oe}from"./useDarkMode-BPtTVGNh.js";import{b as se}from"./MegaSearch-DluE57NX.js";import{b as ce}from"./LanguageSwitcher-BCL_-mgC.js";const le={class:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`},ue={class:`bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700`},de={class:`w-full px-[2%]`},fe={class:`flex justify-between items-center h-16`},pe={class:`flex items-center space-x-4`},me={class:`hidden md:block w-80`},he={key:0,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},ge={key:1,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},_e={class:`flex-1 w-full px-[2%] py-8`},ve={class:`mb-6`},ye={class:`mb-8`},y={class:`text-3xl font-bold text-gray-900 dark:text-white mb-2`},b={class:`text-gray-600 dark:text-gray-400`},x={class:`mb-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6`},S={class:`flex space-x-4`},C={class:`flex-1`},w={class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},T={class:`relative`},E=[`placeholder`],D={class:`flex items-end space-x-2`},O=[`disabled`],k={key:0,class:`flex items-center`},A={key:1},j={class:`mb-6`},M={class:`flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg`},N={key:0,class:`flex justify-center items-center py-12`},P={key:1,class:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6`},be={class:`text-red-800 dark:text-red-200`},xe={key:2,class:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden`},Se={class:`overflow-x-auto`},Ce={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},we={class:`bg-gray-50 dark:bg-gray-700`},Te={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Ee={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},De={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Oe={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},ke={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Ae={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},je={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Me={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Ne={key:0},Pe={colspan:7,class:`px-6 py-12 text-center text-gray-500 dark:text-gray-400`},Fe={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ie={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white font-mono`},Le={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Re={class:`font-medium`},ze={class:`text-gray-500 dark:text-gray-400 text-xs`},Be={class:`px-6 py-4 whitespace-nowrap`},Ve={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},He={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ue={class:`px-6 py-4 whitespace-nowrap text-sm font-medium`},We={class:`flex space-x-2`},Ge=[`onClick`],Ke=[`onClick`],qe={key:3,class:`mt-6 flex items-center justify-between`},Je={class:`text-sm text-gray-700 dark:text-gray-300`},Ye={class:`flex space-x-2`},Xe=[`disabled`],Ze=[`onClick`],Qe=[`disabled`],$e={key:0,class:`fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50`},et={class:`relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800`},tt={class:`mt-3`},nt={class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},rt={class:`mb-4`},it={class:`text-sm text-gray-600 dark:text-gray-400 mb-2`},at={class:`font-mono font-medium`},ot={class:`text-sm text-gray-600 dark:text-gray-400`},st={class:`mb-4`},ct={class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},lt=[`placeholder`],ut={class:`flex justify-end space-x-3`},dt=[`disabled`],ft={key:0,class:`flex items-center`},pt={key:1},mt={__name:`BasketDispatch`,setup(mt){let F=te(),ht=ne(),{isDarkMode:gt,toggleDarkMode:I}=oe(),L=o([]),R=o(!1),z=o(``),B=o(`all`),V=o(!1),H=o(null),U=o(``),W=o(!1),G=o(``),K=o(!1),q=o({current_page:1,last_page:1,from:0,to:0,total:0,prev_page_url:null,next_page_url:null}),J=ie(()=>B.value===`all`?L.value:B.value===`pending`?L.value.filter(e=>!e.is_dispatched):B.value===`dispatched`?L.value.filter(e=>e.is_dispatched):L.value),_t=()=>{ht.logout(),F.push(`/login`)},Y=async(e=1)=>{R.value=!0,z.value=``;try{let t;t=B.value===`dispatched`?await d.getDispatchedBaskets(e):B.value===`pending`?await d.getPendingBaskets(e):await d.getBaskets(e);let n=t.data.data||t.data;L.value=n.data||[],q.value={current_page:n.current_page||1,last_page:n.last_page||1,from:n.from||0,to:n.to||0,total:n.total||0,prev_page_url:n.prev_page_url,next_page_url:n.next_page_url}}catch(e){console.error(`Error loading baskets:`,e),z.value=`Failed to load baskets. Please try again.`}finally{R.value=!1}},vt=e=>{H.value=e,U.value=``,V.value=!0},X=()=>{V.value=!1,H.value=null,U.value=``},yt=async()=>{if(H.value){W.value=!0;try{await d.dispatchBasket(H.value.barcode,{notes:U.value});let e=L.value.findIndex(e=>e.id===H.value.id);e!==-1&&(L.value[e].is_dispatched=!0,L.value[e].dispatched_at=new Date().toISOString(),L.value[e].dispatch_notes=U.value),X(),console.log(`Basket dispatched successfully!`)}catch(e){console.error(`Error dispatching basket:`,e),z.value=`Failed to dispatch basket. Please try again.`}finally{W.value=!1}}},Z=async()=>{if(G.value){K.value=!0;try{await d.dispatchBasket(G.value),G.value=``,await Y(q.value.current_page),console.log(`Basket dispatched successfully!`)}catch(e){console.error(`Error dispatching basket:`,e),z.value=`Failed to dispatch basket. Please check the barcode and try again.`}finally{K.value=!1}}},Q=()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){alert(`Camera access is not supported in this browser. Please enter the barcode manually.`);return}alert(`Barcode scanner feature would be implemented here. For now, please enter the barcode manually.`)},bt=e=>{console.log(`View basket details:`,e)},$=e=>new Date(e).toLocaleDateString(`en-PK`,{year:`numeric`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`}),xt=()=>{let e=[],t=q.value.current_page,n=q.value.last_page;for(let r=Math.max(1,t-2);r<=Math.min(n,t+2);r++)e.push(r);return e};return i(B,()=>{Y(1)}),e(()=>{Y()}),(e,i)=>{let o=r(`router-link`);return t(),g(`div`,le,[m(`nav`,ue,[m(`div`,de,[m(`div`,fe,[i[10]||=m(`div`,{class:`flex items-center`},[m(`div`,{class:`flex-shrink-0`},[m(`h1`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`A & S Cold Storage`)])],-1),m(`div`,pe,[m(`div`,me,[v(se)]),m(`button`,{onClick:i[0]||=(...e)=>s(I)&&s(I)(...e),class:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},[s(gt)?(t(),g(`svg`,ge,[...i[9]||=[m(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)]])):(t(),g(`svg`,he,[...i[8]||=[m(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]]))]),v(ce),m(`button`,{onClick:_t,class:`px-4 py-2 bg-gradient-to-r from-red-400 to-red-500 text-white rounded-lg hover:from-red-500 hover:to-red-600 transition-all duration-200 font-medium`},` Logout `)])])])]),m(`main`,_e,[m(`div`,ve,[v(o,{to:`/dashboard`,class:`inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},{default:ee(()=>[i[11]||=m(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[m(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),_(` `+l(s(u)(`form.backToDashboard`)),1)]),_:1})]),m(`div`,ye,[m(`h1`,y,l(s(u)(`dispatch.title`)),1),m(`p`,b,l(s(u)(`dispatch.subtitle`)),1)]),m(`div`,x,[i[14]||=m(`h3`,{class:`text-lg font-semibold text-gray-900 dark:text-white mb-4`},`Quick Dispatch`,-1),m(`div`,S,[m(`div`,C,[m(`label`,w,l(s(u)(`basket.form.barcode`)),1),m(`div`,T,[a(m(`input`,{"onUpdate:modelValue":i[1]||=e=>G.value=e,type:`text`,class:`w-full px-3 py-2 pr-12 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white`,placeholder:s(u)(`basket.form.barcode`),onKeyup:re(Z,[`enter`])},null,40,E),[[f,G.value]]),m(`button`,{onClick:Q,class:`absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300`,title:`Scan Barcode`},[...i[12]||=[m(`svg`,{class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[m(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z`})],-1)]])])]),m(`div`,D,[m(`button`,{onClick:Z,disabled:!G.value||K.value,class:`px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[K.value?(t(),g(`span`,k,[i[13]||=m(`svg`,{class:`animate-spin -ml-1 mr-2 h-4 w-4 text-white`,fill:`none`,viewBox:`0 0 24 24`},[m(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),m(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),_(` `+l(s(u)(`form.loading`)),1)])):(t(),g(`span`,A,l(s(u)(`dispatch.dispatch`)),1))],8,O)])])]),m(`div`,j,[m(`div`,M,[m(`button`,{onClick:i[2]||=e=>B.value=`all`,class:c([`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200`,B.value===`all`?`bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm`:`text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`])},l(s(u)(`dispatch.allBaskets`)),3),m(`button`,{onClick:i[3]||=e=>B.value=`pending`,class:c([`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200`,B.value===`pending`?`bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm`:`text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`])},l(s(u)(`dispatch.pendingBaskets`)),3),m(`button`,{onClick:i[4]||=e=>B.value=`dispatched`,class:c([`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200`,B.value===`dispatched`?`bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm`:`text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`])},l(s(u)(`dispatch.dispatchedBaskets`)),3)])]),R.value?(t(),g(`div`,N,[...i[15]||=[m(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600`},null,-1)]])):z.value?(t(),g(`div`,P,[m(`p`,be,l(z.value),1)])):(t(),g(`div`,xe,[m(`div`,Se,[m(`table`,Ce,[m(`thead`,we,[m(`tr`,null,[m(`th`,Te,l(s(u)(`batches.table.sno`)),1),m(`th`,Ee,l(s(u)(`basket.form.barcode`)),1),m(`th`,De,l(s(u)(`batches.table.customer`)),1),m(`th`,Oe,l(s(u)(`dispatch.status`)),1),m(`th`,ke,l(s(u)(`batches.table.createdDate`)),1),m(`th`,Ae,l(s(u)(`dispatch.dispatchDate`)),1),m(`th`,je,l(s(u)(`dispatch.actions`)),1)])]),m(`tbody`,Me,[J.value.length===0?(t(),g(`tr`,Ne,[m(`td`,Pe,l(s(u)(`common.noData`)),1)])):h(``,!0),(t(!0),g(p,null,n(J.value,(e,n)=>(t(),g(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700`},[m(`td`,Fe,l(n+1),1),m(`td`,Ie,l(e.barcode),1),m(`td`,Le,[m(`div`,null,[m(`div`,Re,l(e.customer?.full_name||`N/A`),1),m(`div`,ze,l(e.customer?.cnic_number||``),1)])]),m(`td`,Be,[m(`span`,{class:c([`inline-flex px-2 py-1 text-xs font-semibold rounded-full`,e.is_dispatched?`bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`:`bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`])},l(e.is_dispatched?s(u)(`dispatch.dispatched`):s(u)(`dispatch.pending`)),3)]),m(`td`,Ve,l($(e.created_at)),1),m(`td`,He,l(e.dispatched_at?$(e.dispatched_at):`-`),1),m(`td`,Ue,[m(`div`,We,[e.is_dispatched?h(``,!0):(t(),g(`button`,{key:0,onClick:t=>vt(e),class:`text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300`},l(s(u)(`dispatch.markDispatched`)),9,Ge)),m(`button`,{onClick:t=>bt(e),class:`text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300`},l(s(u)(`dispatch.viewDetails`)),9,Ke)])])]))),128))])])])])),q.value.last_page>1?(t(),g(`div`,qe,[m(`div`,Je,l(s(u)(`common.showing`))+` `+l(q.value.from)+` `+l(s(u)(`common.to`))+` `+l(q.value.to)+` `+l(s(u)(`common.of`))+` `+l(q.value.total)+` `+l(s(u)(`common.results`)),1),m(`div`,Ye,[m(`button`,{onClick:i[5]||=e=>Y(q.value.current_page-1),disabled:!q.value.prev_page_url,class:`px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed`},l(s(u)(`common.previous`)),9,Xe),(t(!0),g(p,null,n(xt(),e=>(t(),g(`button`,{key:e,onClick:t=>Y(e),class:c([`px-3 py-1 text-sm rounded`,e===q.value.current_page?`bg-blue-600 text-white`:`bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600`])},l(e),11,Ze))),128)),m(`button`,{onClick:i[6]||=e=>Y(q.value.current_page+1),disabled:!q.value.next_page_url,class:`px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed`},l(s(u)(`common.next`)),9,Qe)])])):h(``,!0)]),V.value?(t(),g(`div`,$e,[m(`div`,et,[m(`div`,tt,[m(`h3`,nt,l(s(u)(`dispatch.confirm`)),1),m(`div`,rt,[m(`p`,it,[_(l(s(u)(`basket.form.barcode`))+`: `,1),m(`span`,at,l(H.value?.barcode),1)]),m(`p`,ot,l(s(u)(`batches.table.customer`))+`: `+l(H.value?.customer?.full_name),1)]),m(`div`,st,[m(`label`,ct,l(s(u)(`dispatch.notes`)),1),a(m(`textarea`,{"onUpdate:modelValue":i[7]||=e=>U.value=e,rows:`3`,class:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white`,placeholder:s(u)(`dispatch.notes`)},null,8,lt),[[f,U.value]])]),m(`div`,ut,[m(`button`,{onClick:X,class:`px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors duration-200`},l(s(u)(`common.cancel`)),1),m(`button`,{onClick:yt,disabled:W.value,class:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[W.value?(t(),g(`span`,ft,[i[16]||=m(`svg`,{class:`animate-spin -ml-1 mr-2 h-4 w-4 text-white`,fill:`none`,viewBox:`0 0 24 24`},[m(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),m(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),_(` `+l(s(u)(`form.loading`)),1)])):(t(),g(`span`,pt,l(s(u)(`dispatch.dispatch`)),1))],8,dt)])])])])):h(``,!0),i[17]||=ae(`<footer class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-t border-gray-200/50 dark:border-gray-700/50 mt-12 transition-colors duration-300"><div class="w-full px-[2%] py-6"><div class="flex flex-col items-center justify-center space-y-2"><div class="flex items-center space-x-2"><div class="h-6 w-6 bg-gradient-to-r from-gray-800 to-black rounded-md flex items-center justify-center"><svg class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><span class="text-sm text-gray-600 dark:text-gray-400">Powered by</span><span class="text-sm font-semibold text-gray-800 dark:text-gray-200">Emeriosoft</span></div><p class="text-xs text-gray-500 dark:text-gray-400">© 2024 A &amp; S Cold Storage Management System. All rights reserved.</p></div></div></footer>`,1)])}}};var F=mt;export{F as default};