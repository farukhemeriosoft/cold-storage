import{A as e,C as t,D as ee,E as te,G as n,H as r,J as i,K as a,L as o,M as s,N as c,d as ne,j as l,l as u,n as re,p as d,r as ie,s as ae,u as f,v as p,w as m,y as h,z as g}from"./index-BlF1ZIv-.js";import{b as oe}from"./useDarkMode-BPtTVGNh.js";import{b as se}from"./MegaSearch-DluE57NX.js";import{b as ce}from"./LanguageSwitcher-BCL_-mgC.js";import"./useBarcode-CobztDgs.js";import{b as le}from"./BarcodeGenerator-DAGFJN7Z.js";const ue={class:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`},de={class:`bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700`},fe={class:`w-full px-[2%]`},_={class:`flex justify-between h-16`},v={class:`flex items-center`},y={class:`flex items-center space-x-4`},b={class:`hidden md:block w-80`},x=[`title`],S={key:0,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},C={key:1,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},w={class:`w-full py-8 px-[2%]`},T={class:`mb-6`},E={class:`bg-white dark:bg-gray-800 rounded-xl shadow-elevated border border-gray-200 dark:border-gray-700`},D={class:`relative`},O={key:0,class:`absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-auto`},k=[`onMousedown`],A={class:`font-medium text-gray-900 dark:text-white`},j={class:`text-sm text-gray-500 dark:text-gray-400`},M={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},N={class:`mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},P={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},F={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},I={class:`text-green-800 dark:text-green-200 text-sm`},L={key:1,class:`p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg`},R={class:`text-red-800 dark:text-red-200 text-sm`},z={class:`flex justify-end space-x-4`},pe=[`disabled`],B={key:0,class:`flex items-center`},me={key:1},he={__name:`NewBasketForm`,setup(he){let V=ne(),ge=l(),{isDarkMode:H,toggleDarkMode:U}=oe(),W=i({customer_id:``,barcode:``}),G=a(``),K=a([]),q=a([]),J=a(!1),Y=a(null),X=a(!1),Z=a({}),Q=a(``),$=a(``),_e=async()=>{try{let e=await re.getCustomers(1),t=e.data.data||e.data;K.value=t.data||t||[]}catch(e){console.error(`Error loading customers:`,e)}},ve=()=>{if(G.value.length<2){q.value=[];return}let e=G.value.toLowerCase();q.value=K.value.filter(t=>t.full_name.toLowerCase().includes(e)||t.cnic_number.toLowerCase().includes(e)||t.phone_number.includes(e))},ye=e=>{Y.value=e,G.value=e.full_name,W.customer_id=e.id,J.value=!1},be=()=>{setTimeout(()=>{J.value=!1},200)},xe=async()=>{if(X.value=!0,Z.value={},Q.value=``,$.value=``,W.customer_id||(Z.value.customer_id=`Please select a customer`),W.barcode.trim()||(Z.value.barcode=`Please enter a barcode`),Object.keys(Z.value).length>0){X.value=!1;return}try{await u.createBasket(W),Q.value=`Basket created successfully!`,Object.keys(W).forEach(e=>{W[e]=``}),G.value=``,Y.value=null,setTimeout(()=>{V.push(`/dashboard`)},2e3)}catch(e){console.error(`Error creating basket:`,e),e.response?.data?.message?$.value=e.response.data.message:e.response?.data?.errors?Z.value=e.response.data.errors:$.value=`Failed to create basket. Please try again.`}finally{X.value=!1}},Se=()=>{ge.logout(),V.push(`/login`)};return e(()=>{_e()}),(e,i)=>{let a=te(`router-link`);return t(),m(`div`,ue,[f(`nav`,de,[f(`div`,fe,[f(`div`,_,[f(`div`,v,[g(a,{to:`/dashboard`,class:`flex items-center`},{default:n(()=>[...i[6]||=[f(`div`,{class:`flex-shrink-0`},[f(`div`,{class:`h-8 w-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center`},[f(`span`,{class:`text-white font-bold text-sm`},`CS`)])],-1),f(`div`,{class:`ml-3`},[f(`h1`,{class:`text-xl font-bold text-gray-900 dark:text-white`},`A & S Cold Storage`)],-1)]]),_:1})]),f(`div`,y,[f(`div`,b,[g(se)]),f(`button`,{onClick:i[0]||=(...e)=>o(U)&&o(U)(...e),class:`p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-colors duration-200`,title:o(H)?`Switch to light mode`:`Switch to dark mode`},[o(H)?(t(),m(`svg`,C,[...i[8]||=[f(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)]])):(t(),m(`svg`,S,[...i[7]||=[f(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]]))],8,x),g(ce),g(a,{to:`/profile`,class:`text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200`},{default:n(()=>[...i[9]||=[h(` Profile `,-1)]]),_:1}),f(`button`,{onClick:Se,class:`text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200`},` Logout `)])])])]),f(`div`,w,[f(`div`,T,[g(a,{to:`/dashboard`,class:`inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:n(()=>[...i[10]||=[f(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[f(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),h(` Back to Dashboard `,-1)]]),_:1})]),f(`div`,E,[i[16]||=f(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[f(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`Add New Basket`),f(`p`,{class:`mt-1 text-sm text-gray-600 dark:text-gray-400`},`Create a new basket for a customer`)],-1),f(`form`,{onSubmit:ie(xe,[`prevent`]),class:`p-6 space-y-6`},[f(`div`,null,[i[11]||=f(`label`,{for:`customer_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Customer * `,-1),f(`div`,D,[r(f(`input`,{"onUpdate:modelValue":i[1]||=e=>G.value=e,onInput:ve,onFocus:i[2]||=e=>J.value=!0,onBlur:be,type:`text`,placeholder:`Search for a customer...`,class:s([`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors duration-200`,{"border-red-500":Z.value.customer_id}])},null,34),[[d,G.value]]),J.value&&q.value.length>0?(t(),m(`div`,O,[(t(!0),m(ae,null,ee(q.value,e=>(t(),m(`div`,{key:e.id,onMousedown:t=>ye(e),class:`px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer border-b border-gray-100 dark:border-gray-600 last:border-b-0`},[f(`div`,A,c(e.full_name),1),f(`div`,j,` CNIC: `+c(e.cnic_number)+` | Phone: `+c(e.phone_number),1)],40,k))),128))])):p(``,!0)]),Z.value.customer_id?(t(),m(`p`,M,c(Z.value.customer_id),1)):p(``,!0)]),f(`div`,N,[i[12]||=f(`h3`,{class:`text-lg font-medium text-blue-900 dark:text-blue-100 mb-3`},` 🏷️ Auto-Generate Barcode `,-1),g(le,{modelValue:W.barcode,"onUpdate:modelValue":i[3]||=e=>W.barcode=e,onBarcodeSelected:i[4]||=e=>W.barcode=e},null,8,[`modelValue`])]),f(`div`,null,[i[13]||=f(`label`,{for:`barcode`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Barcode * `,-1),r(f(`input`,{"onUpdate:modelValue":i[5]||=e=>W.barcode=e,type:`text`,id:`barcode`,class:s([`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors duration-200`,{"border-red-500":Z.value.barcode}]),placeholder:`Enter barcode or use auto-generation above`},null,2),[[d,W.barcode]]),Z.value.barcode?(t(),m(`p`,P,c(Z.value.barcode),1)):p(``,!0)]),Q.value?(t(),m(`div`,F,[f(`p`,I,c(Q.value),1)])):p(``,!0),$.value?(t(),m(`div`,L,[f(`p`,R,c($.value),1)])):p(``,!0),f(`div`,z,[g(a,{to:`/dashboard`,class:`px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},{default:n(()=>[...i[14]||=[h(` Cancel `,-1)]]),_:1}),f(`button`,{type:`submit`,disabled:X.value,class:`px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200`},[X.value?(t(),m(`span`,B,[...i[15]||=[f(`svg`,{class:`animate-spin -ml-1 mr-3 h-5 w-5 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`},[f(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),f(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),h(` Creating... `,-1)]])):(t(),m(`span`,me,`Create Basket`))],8,pe)])],32)])])])}}};var V=he;export{V as default};