import{A as e,B as t,D as n,E as r,F as i,H as a,I as ee,J as te,L as o,M as s,O as c,P as l,Q as u,R as d,T as f,d as ne,l as re,n as ie,p as ae,u as p,w as oe,x as se,z as m}from"./index-BewjDgXt.js";import{b as ce}from"./useDarkMode-v5Dqi2be.js";import{b as le}from"./MegaSearch-brGl_kL4.js";import{b as ue}from"./LanguageSwitcher-ZKeWbNQ2.js";import"./useBarcode-CDESM8e0.js";import{b as de}from"./BarcodeGenerator-CZpHoPt1.js";const fe={class:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`},h={class:`bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700`},g={class:`w-full px-[2%]`},_={class:`flex justify-between h-16`},v={class:`flex items-center`},y={class:`flex items-center space-x-4`},b={class:`hidden md:block w-80`},x=[`title`],S={key:0,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},C={key:1,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},w={class:`w-full py-8 px-[2%]`},T={class:`mb-6`},E={class:`bg-white dark:bg-gray-800 rounded-xl shadow-elevated border border-gray-200 dark:border-gray-700`},D={class:`relative`},O={key:0,class:`absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-auto`},k=[`onMousedown`],A={class:`font-medium text-gray-900 dark:text-white`},j={class:`text-sm text-gray-500 dark:text-gray-400`},M={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},N={class:`mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},P={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},F={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},I={class:`text-green-800 dark:text-green-200 text-sm`},L={key:1,class:`p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg`},R={class:`text-red-800 dark:text-red-200 text-sm`},pe={class:`flex justify-end space-x-4`},z=[`disabled`],B={key:0,class:`flex items-center`},me={key:1},he={__name:`NewBasketForm`,setup(he){let V=ne(),ge=re(),{isDarkMode:H,toggleDarkMode:U}=ce(),W=c({customer_id:``,barcode:``}),G=l(``),K=l([]),q=l([]),J=l(!1),Y=l(null),X=l(!1),Z=l({}),Q=l(``),$=l(``),_e=async()=>{try{let e=await ae.getCustomers(1),t=e.data.data||e.data;K.value=t.data||t||[]}catch(e){console.error(`Error loading customers:`,e)}},ve=()=>{if(G.value.length<2){q.value=[];return}let e=G.value.toLowerCase();q.value=K.value.filter(t=>t.full_name.toLowerCase().includes(e)||t.cnic_number.toLowerCase().includes(e)||t.phone_number.includes(e))},ye=e=>{Y.value=e,G.value=e.full_name,W.customer_id=e.id,J.value=!1},be=()=>{setTimeout(()=>{J.value=!1},200)},xe=async()=>{if(X.value=!0,Z.value={},Q.value=``,$.value=``,W.customer_id||(Z.value.customer_id=`Please select a customer`),W.barcode.trim()||(Z.value.barcode=`Please enter a barcode`),Object.keys(Z.value).length>0){X.value=!1;return}try{await ie.createBasket(W),Q.value=`Basket created successfully!`,Object.keys(W).forEach(e=>{W[e]=``}),G.value=``,Y.value=null,setTimeout(()=>{V.push(`/dashboard`)},2e3)}catch(e){console.error(`Error creating basket:`,e),e.response?.data?.message?$.value=e.response.data.message:e.response?.data?.errors?Z.value=e.response.data.errors:$.value=`Failed to create basket. Please try again.`}finally{X.value=!1}},Se=()=>{ge.logout(),V.push(`/login`)};return i(()=>{_e()}),(i,c)=>{let l=te(`router-link`);return a(),t(`div`,fe,[m(`nav`,h,[m(`div`,g,[m(`div`,_,[m(`div`,v,[r(l,{to:`/dashboard`,class:`flex items-center`},{default:o(()=>[...c[6]||=[m(`div`,{class:`flex-shrink-0`},[m(`div`,{class:`h-8 w-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center`},[m(`span`,{class:`text-white font-bold text-sm`},`CS`)])],-1),m(`div`,{class:`ml-3`},[m(`h1`,{class:`text-xl font-bold text-gray-900 dark:text-white`},`A & S Cold Storage`)],-1)]]),_:1})]),m(`div`,y,[m(`div`,b,[r(le)]),m(`button`,{onClick:c[0]||=(...e)=>u(U)&&u(U)(...e),class:`p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-colors duration-200`,title:u(H)?`Switch to light mode`:`Switch to dark mode`},[u(H)?(a(),t(`svg`,C,[...c[8]||=[m(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)]])):(a(),t(`svg`,S,[...c[7]||=[m(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]]))],8,x),r(ue),r(l,{to:`/profile`,class:`text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200`},{default:o(()=>[...c[9]||=[n(` Profile `,-1)]]),_:1}),m(`button`,{onClick:Se,class:`text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200`},` Logout `)])])])]),m(`div`,w,[m(`div`,T,[r(l,{to:`/dashboard`,class:`inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:o(()=>[...c[10]||=[m(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[m(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),n(` Back to Dashboard `,-1)]]),_:1})]),m(`div`,E,[c[16]||=m(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[m(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`Add New Basket`),m(`p`,{class:`mt-1 text-sm text-gray-600 dark:text-gray-400`},`Create a new basket for a customer`)],-1),m(`form`,{onSubmit:oe(xe,[`prevent`]),class:`p-6 space-y-6`},[m(`div`,null,[c[11]||=m(`label`,{for:`customer_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Customer * `,-1),m(`div`,D,[s(m(`input`,{"onUpdate:modelValue":c[1]||=e=>G.value=e,onInput:ve,onFocus:c[2]||=e=>J.value=!0,onBlur:be,type:`text`,placeholder:`Search for a customer...`,class:d([`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors duration-200`,{"border-red-500":Z.value.customer_id}])},null,34),[[p,G.value]]),J.value&&q.value.length>0?(a(),t(`div`,O,[(a(!0),t(se,null,ee(q.value,e=>(a(),t(`div`,{key:e.id,onMousedown:t=>ye(e),class:`px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer border-b border-gray-100 dark:border-gray-600 last:border-b-0`},[m(`div`,A,f(e.full_name),1),m(`div`,j,` CNIC: `+f(e.cnic_number)+` | Phone: `+f(e.phone_number),1)],40,k))),128))])):e(``,!0)]),Z.value.customer_id?(a(),t(`p`,M,f(Z.value.customer_id),1)):e(``,!0)]),m(`div`,N,[c[12]||=m(`h3`,{class:`text-lg font-medium text-blue-900 dark:text-blue-100 mb-3`},` 🏷️ Auto-Generate Barcode `,-1),r(de,{modelValue:W.barcode,"onUpdate:modelValue":c[3]||=e=>W.barcode=e,onBarcodeSelected:c[4]||=e=>W.barcode=e},null,8,[`modelValue`])]),m(`div`,null,[c[13]||=m(`label`,{for:`barcode`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Barcode * `,-1),s(m(`input`,{"onUpdate:modelValue":c[5]||=e=>W.barcode=e,type:`text`,id:`barcode`,class:d([`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors duration-200`,{"border-red-500":Z.value.barcode}]),placeholder:`Enter barcode or use auto-generation above`},null,2),[[p,W.barcode]]),Z.value.barcode?(a(),t(`p`,P,f(Z.value.barcode),1)):e(``,!0)]),Q.value?(a(),t(`div`,F,[m(`p`,I,f(Q.value),1)])):e(``,!0),$.value?(a(),t(`div`,L,[m(`p`,R,f($.value),1)])):e(``,!0),m(`div`,pe,[r(l,{to:`/dashboard`,class:`px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},{default:o(()=>[...c[14]||=[n(` Cancel `,-1)]]),_:1}),m(`button`,{type:`submit`,disabled:X.value,class:`px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200`},[X.value?(a(),t(`span`,B,[...c[15]||=[m(`svg`,{class:`animate-spin -ml-1 mr-3 h-5 w-5 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`},[m(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),m(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),n(` Creating... `,-1)]])):(a(),t(`span`,me,`Create Basket`))],8,z)])],32)])])])}}};var V=he;export{V as default};