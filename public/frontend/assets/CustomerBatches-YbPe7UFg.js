import{A as e,B as t,D as n,E as r,F as i,G as a,H as o,J as s,L as c,M as l,N as u,P as d,T as f,X as p,c as m,d as h,l as g,o as ee,p as te,z as _}from"./index-6BYkH0DY.js";import{b as v}from"./AppHeader-BKR7rNi1.js";import"./LanguageSwitcher-Bwn7UERh.js";const y={class:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`},b={class:`w-full py-8 px-[2%]`},x={class:`mb-6`},S={class:`flex justify-between items-center mb-8`},C={class:`text-gray-600 dark:text-gray-400`},w={key:0,class:`flex justify-center items-center py-12`},T={key:1,class:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6`},E={class:`flex`},D={class:`ml-3`},O={class:`text-sm font-medium text-red-800 dark:text-red-200`},k={key:2,class:`bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden`},A={class:`overflow-x-auto`},j={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},M={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},N={key:0,class:`bg-white dark:bg-gray-800`},P={class:`px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white`},F={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400`},I={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},ne={class:`font-medium`},L={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},R={class:`flex flex-col`},z={class:`font-medium`},B={class:`text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded-full inline-block w-fit`},V={class:`px-6 py-4 whitespace-nowrap text-sm font-medium`},H={__name:`CustomerBatches`,setup(H){h();let U=m();g();let W=f([]),G=f(null),K=f(!1),q=f(``),J=f(`asc`),Y=e(()=>W.value.map((e,t)=>({...e,serialNumber:t+1})));s(async()=>{let e=U.params.id;e&&(await Z(e),await X(e))});let X=async e=>{try{let t=await te.getCustomer(e);G.value=t.data.data||t.data}catch(e){console.error(`Error loading customer info:`,e)}},Z=async e=>{K.value=!0,q.value=``;try{let t=await ee.getBatches(1),n=t.data.data||t.data,r=[];r=n.data?n.data:Array.isArray(n)?n:[n],W.value=r.filter(t=>t.customer_id===e||t.customer?.id===e||t.customer?.id?.toString()===e.toString()),re()}catch(e){console.error(`Error loading customer batches:`,e),q.value=`Failed to load customer batches. Please try again.`}finally{K.value=!1}},re=()=>{W.value.sort((e,t)=>{let n=new Date(e.created_at),r=new Date(t.created_at);return J.value===`asc`?n-r:r-n})},Q=e=>new Intl.NumberFormat(`en-PK`).format(e),$=e=>e.baskets_count||e.baskets?.length||e.total_baskets||e.basket_count||(e.baskets&&Array.isArray(e.baskets)?e.baskets.length:0)||0,ie=e=>{let t=$(e),n=parseFloat(e.unit_price)||0,r=t*n;return Q(r)},ae=e=>{if(!e)return`N/A`;let t=new Date(e);return t.toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`})};return(e,s)=>{let f=u(`router-link`);return c(),r(`div`,y,[o(v,{"show-back":!0}),t(`div`,b,[t(`div`,x,[o(f,{to:`/dashboard`,class:`inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:d(()=>[...s[0]||=[t(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[t(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),a(` Back to Dashboard `,-1)]]),_:1})]),t(`div`,S,[t(`div`,null,[s[1]||=t(`h2`,{class:`text-3xl font-bold text-gray-900 dark:text-white mb-2`},`Customer Lots`,-1),t(`p`,C,`Batch history for `+p(G.value?.full_name||`Customer`),1)])]),K.value?(c(),r(`div`,w,[...s[2]||=[t(`div`,{class:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500`},null,-1)]])):q.value?(c(),r(`div`,T,[t(`div`,E,[s[3]||=t(`div`,{class:`flex-shrink-0`},[t(`svg`,{class:`h-5 w-5 text-red-400`,viewBox:`0 0 20 20`,fill:`currentColor`},[t(`path`,{"fill-rule":`evenodd`,d:`M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z`,"clip-rule":`evenodd`})])],-1),t(`div`,D,[t(`p`,O,p(q.value),1)])])])):(c(),r(`div`,k,[t(`div`,A,[t(`table`,j,[s[6]||=t(`thead`,{class:`bg-gray-50 dark:bg-gray-700 sticky top-0 z-10`},[t(`tr`,null,[t(`th`,{class:`px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Sno `),t(`th`,{class:`px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Created Date `),t(`th`,{class:`px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Unit Price (PKR) `),t(`th`,{class:`px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Total Price `),t(`th`,{class:`px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `)])],-1),t(`tbody`,M,[W.value.length===0?(c(),r(`tr`,N,[...s[4]||=[t(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500 dark:text-gray-400`},[t(`div`,{class:`flex flex-col items-center`},[t(`svg`,{class:`w-12 h-12 text-gray-400 dark:text-gray-500 mb-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[t(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4`})]),t(`p`,{class:`text-lg font-medium`},`No batches found`),t(`p`,{class:`text-sm`},`This customer has no batch history`)])],-1)]])):n(``,!0),(c(!0),r(_,null,l(Y.value,e=>(c(),r(`tr`,{key:e.id,class:`bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[t(`td`,P,p(e.serialNumber),1),t(`td`,F,p(ae(e.created_at)),1),t(`td`,I,[t(`span`,ne,`PKR `+p(Q(e.unit_price)),1)]),t(`td`,L,[t(`div`,R,[t(`span`,z,`PKR `+p(ie(e)),1),t(`span`,B,p($(e))+` basket`+p($(e)===1?``:`s`),1)])]),t(`td`,V,[o(f,{to:`/add-baskets-to-batch/${e.id}`,class:`text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 transition-colors duration-200`},{default:d(()=>[...s[5]||=[a(` Add Baskets `,-1)]]),_:1},8,[`to`])])]))),128))])])])]))]),s[7]||=i(`<footer class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-t border-gray-200/50 dark:border-gray-700/50 mt-12 transition-colors duration-300"><div class="w-full px-[2%] py-6"><div class="flex flex-col items-center justify-center space-y-2"><div class="flex items-center space-x-2"><div class="h-6 w-6 bg-gradient-to-r from-gray-800 to-black rounded-md flex items-center justify-center"><svg class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><span class="text-sm text-gray-600 dark:text-gray-400">Powered by</span><span class="text-sm font-semibold text-gray-800 dark:text-gray-200">Emeriosoft</span></div><p class="text-xs text-gray-500 dark:text-gray-400">Â© 2024 A &amp; S Cold Storage Management System. All rights reserved.</p></div></div></footer>`,1)])}}};var U=H;export{U as default};