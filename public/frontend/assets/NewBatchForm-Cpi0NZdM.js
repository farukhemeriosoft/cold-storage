import{A as e,C as t,D as n,E as r,G as ee,H as i,J as a,K as o,L as s,M as c,N as l,d as te,j as ne,m as u,n as d,p as f,r as re,s as ie,u as p,v as m,w as h,y as g,z as _}from"./index-BlF1ZIv-.js";import{b as ae}from"./useDarkMode-BPtTVGNh.js";import{b as oe}from"./MegaSearch-DluE57NX.js";import{b as se}from"./LanguageSwitcher-BCL_-mgC.js";const ce={class:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`},le={class:`bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700`},v={class:`w-full px-[2%]`},y={class:`flex justify-between items-center h-16`},b={class:`flex items-center space-x-4`},x={class:`hidden md:block w-80`},S={key:0,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},C={key:1,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},w={class:`w-full py-8 px-[2%]`},T={class:`mb-6`},E={class:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8`},D={class:`relative`},O={key:0,class:`absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-auto`},k=[`onMousedown`],A={class:`font-medium text-gray-900 dark:text-white`},j={class:`text-sm text-gray-500 dark:text-gray-400`},M={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},N={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},P={class:`pt-4`},F=[`disabled`],I={key:0,class:`flex items-center justify-center`},ue={key:1},L={key:0,class:`p-4 bg-green-100 dark:bg-green-900 border border-green-400 dark:border-green-600 text-green-700 dark:text-green-300 rounded-lg`},R={key:1,class:`p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 rounded-lg`},z={__name:`NewBatchForm`,setup(z){let B=te(),V=ne(),{isDarkMode:H,toggleDarkMode:U}=ae(),W=a({customer_id:``,unit_price:``}),G=o(``),K=o([]),q=o([]),J=o(null),Y=o(!1),X=o(!1),Z=o({}),Q=o(``),$=o(``);e(async()=>{try{let e=await d.getCustomers();K.value=e.data.data.data}catch(e){console.error(`Error loading customers:`,e)}});let de=()=>{if(!G.value.trim()){q.value=[];return}let e=G.value.toLowerCase();q.value=K.value.filter(t=>t.full_name.toLowerCase().includes(e)||t.cnic_number.toLowerCase().includes(e))},fe=e=>{J.value=e,W.customer_id=e.id,G.value=e.full_name,Y.value=!1},pe=()=>{setTimeout(()=>{Y.value=!1},200)},me=async()=>{if(X.value=!0,Z.value={},Q.value=``,$.value=``,W.customer_id||(Z.value.customer_id=`Please select a customer`),(!W.unit_price||W.unit_price<=0)&&(Z.value.unit_price=`Please enter a valid unit price`),Object.keys(Z.value).length>0){X.value=!1;return}try{await u.createBatch(W),Q.value=`Batch created successfully!`,Object.keys(W).forEach(e=>{W[e]=``}),G.value=``,J.value=null,setTimeout(()=>{B.push(`/dashboard`)},2e3)}catch(e){console.error(`Error creating batch:`,e),$.value=e.response?.data?.message||`Failed to create batch. Please try again.`}finally{X.value=!1}},he=()=>{V.logout(),B.push(`/login`)};return(e,a)=>{let o=r(`router-link`);return t(),h(`div`,ce,[p(`nav`,le,[p(`div`,v,[p(`div`,y,[a[6]||=p(`div`,{class:`flex items-center`},[p(`div`,{class:`flex-shrink-0`},[p(`h1`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`A & S Cold Storage`)])],-1),p(`div`,b,[p(`div`,x,[_(oe)]),p(`button`,{onClick:a[0]||=(...e)=>s(U)&&s(U)(...e),class:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},[s(H)?(t(),h(`svg`,C,[...a[5]||=[p(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)]])):(t(),h(`svg`,S,[...a[4]||=[p(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]]))]),_(se),p(`button`,{onClick:he,class:`px-4 py-2 bg-gradient-to-r from-red-400 to-red-500 text-white rounded-lg hover:from-red-500 hover:to-red-600 transition-all duration-200 font-medium`},` Logout `)])])])]),p(`div`,w,[p(`div`,T,[_(o,{to:`/dashboard`,class:`inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:ee(()=>[...a[7]||=[p(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[p(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),g(` Back to Dashboard `,-1)]]),_:1})]),a[11]||=p(`div`,{class:`text-center mb-8`},[p(`h2`,{class:`text-3xl font-bold text-gray-900 dark:text-white mb-2`},`Add New Batch / Lard`),p(`p`,{class:`text-gray-600 dark:text-gray-400`},`Create a new batch record for a customer`)],-1),p(`div`,E,[p(`form`,{onSubmit:re(me,[`prevent`]),class:`space-y-6`},[p(`div`,null,[a[8]||=p(`label`,{for:`customer_search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Customer * `,-1),p(`div`,D,[i(p(`input`,{"onUpdate:modelValue":a[1]||=e=>G.value=e,onInput:de,onFocus:a[2]||=e=>Y.value=!0,onBlur:pe,type:`text`,id:`customer_search`,class:c([`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors duration-200`,{"border-red-500":Z.value.customer_id}]),placeholder:`Search customer by name or CNIC...`},null,34),[[f,G.value]]),Y.value&&q.value.length>0?(t(),h(`div`,O,[(t(!0),h(ie,null,n(q.value,e=>(t(),h(`div`,{key:e.id,onMousedown:t=>fe(e),class:`px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer border-b border-gray-200 dark:border-gray-600 last:border-b-0`},[p(`div`,A,l(e.full_name),1),p(`div`,j,l(e.cnic_number),1)],40,k))),128))])):m(``,!0)]),Z.value.customer_id?(t(),h(`p`,M,l(Z.value.customer_id),1)):m(``,!0)]),p(`div`,null,[a[9]||=p(`label`,{for:`unit_price`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Unit Price (PKR) * `,-1),i(p(`input`,{"onUpdate:modelValue":a[3]||=e=>W.unit_price=e,type:`number`,step:`0.01`,min:`0`,id:`unit_price`,class:c([`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors duration-200`,{"border-red-500":Z.value.unit_price}]),placeholder:`Enter unit price in PKR`},null,2),[[f,W.unit_price]]),Z.value.unit_price?(t(),h(`p`,N,l(Z.value.unit_price),1)):m(``,!0)]),p(`div`,P,[p(`button`,{type:`submit`,disabled:X.value,class:`w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-lg hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium`},[X.value?(t(),h(`span`,I,[...a[10]||=[p(`svg`,{class:`animate-spin -ml-1 mr-3 h-5 w-5 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`},[p(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),p(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),g(` Creating Batch... `,-1)]])):(t(),h(`span`,ue,`Create Batch`))],8,F)]),Q.value?(t(),h(`div`,L,l(Q.value),1)):m(``,!0),$.value?(t(),h(`div`,R,l($.value),1)):m(``,!0)],32)])]),a[12]||=p(`footer`,{class:`bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 mt-16`},[p(`div`,{class:`max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8`},[p(`p`,{class:`text-center text-sm text-gray-500 dark:text-gray-400`},` Powered by Emeriosoft `)])],-1)])}}};var B=z;export{B as default};