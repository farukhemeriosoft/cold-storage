import{A as e,B as t,D as n,E as r,F as i,H as a,J as o,L as s,M as c,T as l,X as u,c as d,d as f,e as p,z as m}from"./index-BVLw4TQv.js";import{b as h}from"./AppHeader-C9Ya2WuS.js";import"./LanguageSwitcher-BXvKoB3n.js";import{b as g}from"./BarcodeScannerIntegration-COO31Lcg.js";const _={class:`barcode-scanner-page`},v={class:`flex-1 p-4 sm:p-6 lg:p-8`},y={class:`max-w-2xl mx-auto`},b={key:0,class:`mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg`},x={class:`flex items-center`},S={class:`text-sm font-medium text-blue-800 dark:text-blue-200`},C={class:`mb-6`},w={key:1,class:`recent-scans-section`},T={class:`scans-grid`},E=[`onClick`],D={class:`scan-code`},O={class:`scan-info`},k={class:`scan-format`},A={class:`scan-time`},j={class:`stats-section`},M={class:`stats-grid`},N={class:`stat-card`},P={class:`stat-value`},F={class:`stat-card`},I={class:`stat-value`},L={class:`stat-card`},R={class:`stat-value`},z={__name:`BarcodeScannerPage`,setup(p){let z=f(),B=d(),V=l([]),H=e(()=>B.query.batchId),U=e(()=>V.value.length),W=e(()=>{let e=new Date().toDateString();return V.value.filter(t=>new Date(t.timestamp).toDateString()===e).length}),G=e(()=>{let e=new Set(V.value.map(e=>e.code));return e.size}),K=e=>{console.log(`Barcode scanned:`,e),V.value.unshift(e),V.value.length>100&&(V.value=V.value.slice(0,100)),localStorage.setItem(`scannerHistory`,JSON.stringify(V.value)),$(),navigator.vibrate&&navigator.vibrate(200),H.value&&z.push(`/add-baskets-to-batch/${H.value}?barcode=${e.code}`)},q=e=>{console.log(`Searching for barcode:`,e),z.push(`/search?q=${e.code}`)},J=e=>{console.log(`Creating new item with barcode:`,e),z.push(`/batches/new?barcode=${e.code}`)},Y=e=>{K(e)},X=()=>{console.log(`Opening scanner for search`)},Z=()=>{z.push(`/batches/new`)},Q=e=>{let t=Date.now(),n=t-e,r=Math.floor(n/6e4);if(r<1)return`Just now`;if(r<60)return`${r}m ago`;let i=Math.floor(r/60);if(i<24)return`${i}h ago`;let a=Math.floor(i/24);return`${a}d ago`},$=()=>{let e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.frequency.setValueAtTime(800,e.currentTime),n.gain.setValueAtTime(.3,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.1),t.start(e.currentTime),t.stop(e.currentTime+.1)};return o(()=>{try{let e=localStorage.getItem(`scannerHistory`);e&&(V.value=JSON.parse(e))}catch(e){console.error(`Failed to load scan history:`,e)}}),(e,o)=>(s(),r(`div`,_,[a(h,{title:H.value?`Add Baskets to Lot #${H.value}`:`Barcode Scanner`,"show-back":!0},null,8,[`title`]),t(`div`,v,[t(`div`,y,[H.value?(s(),r(`div`,b,[t(`div`,x,[o[1]||=t(`svg`,{class:`w-5 h-5 mr-2 text-blue-600`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[t(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z`})],-1),t(`div`,null,[t(`h3`,S,`Adding Baskets to Lot #`+u(H.value),1),o[0]||=t(`p`,{class:`text-sm text-blue-600 dark:text-blue-300`},`Scan barcodes to add baskets to this lot. Each scan will be added as a new basket.`,-1)])])])):n(``,!0),t(`div`,C,[a(g,{"on-scan":K,"on-search":q,"on-create":J})]),t(`div`,{class:`grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6`},[t(`button`,{onClick:X,class:`action-card`},[...o[2]||=[i(`<div class="action-icon" data-v-4c704d18><svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-4c704d18><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-4c704d18></path></svg></div><div class="action-content" data-v-4c704d18><h3 class="action-title" data-v-4c704d18>Search Inventory</h3><p class="action-description" data-v-4c704d18>Find items by barcode</p></div>`,2)]]),t(`button`,{onClick:Z,class:`action-card`},[...o[3]||=[i(`<div class="action-icon" data-v-4c704d18><svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-4c704d18><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" data-v-4c704d18></path></svg></div><div class="action-content" data-v-4c704d18><h3 class="action-title" data-v-4c704d18>Add New Item</h3><p class="action-description" data-v-4c704d18>Create new inventory item</p></div>`,2)]])]),V.value.length>0?(s(),r(`div`,w,[o[4]||=t(`h3`,{class:`section-title`},`Recent Scans`,-1),t(`div`,T,[(s(!0),r(m,null,c(V.value.slice(0,6),(e,n)=>(s(),r(`div`,{key:n,onClick:t=>Y(e),class:`scan-card`},[t(`div`,D,u(e.code),1),t(`div`,O,[t(`span`,k,u(e.format),1),t(`span`,A,u(Q(e.timestamp)),1)])],8,E))),128))])])):n(``,!0),t(`div`,j,[o[8]||=t(`h3`,{class:`section-title`},`Scan Statistics`,-1),t(`div`,M,[t(`div`,N,[t(`div`,P,u(U.value),1),o[5]||=t(`div`,{class:`stat-label`},`Total Scans`,-1)]),t(`div`,F,[t(`div`,I,u(W.value),1),o[6]||=t(`div`,{class:`stat-label`},`Today`,-1)]),t(`div`,L,[t(`div`,R,u(G.value),1),o[7]||=t(`div`,{class:`stat-label`},`Unique Codes`,-1)])])])])])]))}};var B=p(z,[[`__scopeId`,`data-v-4c704d18`]]);export{B as default};