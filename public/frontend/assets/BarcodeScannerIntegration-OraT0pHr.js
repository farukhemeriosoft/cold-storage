import{A as e,B as t,C as n,D as r,E as i,F as a,G as o,H as s,I as c,M as l,P as u,R as d,T as f,e as p,u as m,v as h,x as g,z as _}from"./index-BewjDgXt.js";const v={class:`advanced-barcode-scanner`},y=[`disabled`],b={key:0,class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},x={key:1,class:`w-5 h-5 animate-spin`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},S={class:`manual-input`},C={class:`input-group`},w=[`disabled`],T={key:0,class:`scanner-modal`},E={class:`scanner-container`},D={class:`scanner-header`},O={class:`scanner-status`},k={class:`status-text`},A={class:`scanner-view`},j={class:`scanner-overlay`},M={class:`scanner-controls`},ee={key:0,class:`recent-scans`},te={class:`scans-list`},ne=[`onClick`],re={class:`scan-code`},ie={class:`scan-format`},ae={class:`scan-time`},oe={key:1,class:`result-modal`},se={class:`result-container`},ce={class:`result-content`},le={class:`barcode-info`},ue={class:`barcode-value`},de={class:`barcode-type`},fe={class:`barcode-time`},N={__name:`AdvancedBarcodeScanner`,props:{onScan:{type:Function,required:!0},onSearch:{type:Function,default:null},onCreate:{type:Function,default:null}},setup(i,{expose:p}){let N=i,P=u(!1),F=u(!1),I=u(!1),L=u(!1),R=u(!1),z=u(!0),B=u(``),V=u(null),H=u([]),U=u(0),W=u(null),G=null,pe=()=>I.value?P.value?`Scanning...`:`Scan Barcode`:`Camera Not Available`,K=async()=>{if(!I.value){alert(`Camera not available on this device`);return}F.value=!0,P.value=!0,z.value=!0;try{await me()}catch(e){console.error(`Failed to start scanner:`,e),alert(`Failed to start barcode scanner`)}},me=()=>new Promise((e,t)=>{typeof Quagga>`u`?he().then(()=>{q().then(e).catch(t)}).catch(t):q().then(e).catch(t)}),he=()=>new Promise((e,t)=>{let n=document.createElement(`script`);n.src=`https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js`,n.onload=e,n.onerror=t,document.head.appendChild(n)}),q=()=>new Promise((e,t)=>{let n={inputStream:{name:`Live`,type:`LiveStream`,target:W.value,constraints:{width:640,height:480,facingMode:`environment`}},decoder:{readers:[`code_128_reader`,`ean_reader`,`ean_8_reader`,`code_39_reader`,`code_39_vin_reader`,`codabar_reader`,`upc_reader`,`upc_e_reader`,`i2of5_reader`]},locate:!0,locator:{patchSize:`medium`,halfSample:!0},numOfWorkers:2,frequency:10,debug:{drawBoundingBox:!0,showFrequency:!0,drawScanline:!0,showPattern:!0},multiple:!1};Quagga.init(n,n=>{if(n){console.error(`Quagga initialization failed:`,n),t(n);return}Quagga.start(),G=Quagga,Quagga.onDetected(e=>{z.value&&J(e)}),e()})}),J=e=>{let t={code:e.codeResult.code,format:e.codeResult.format,timestamp:Date.now()};H.value.unshift(t),H.value.length>10&&(H.value=H.value.slice(0,10)),V.value=t,P.value=!1,Y(),N.onScan(t)},Y=()=>{F.value=!1,P.value=!1,G&&=(G.stop(),null)},ge=()=>{z.value=!z.value},_e=()=>{R.value=!R.value},X=()=>{L.value&&(U.value=(U.value+1)%2,Y(),K())},Z=()=>{if(B.value.trim()){let e={code:B.value.trim(),format:`Manual Entry`,timestamp:Date.now()};J(e),B.value=``}},Q=e=>{V.value=e,Y(),N.onScan(e)},$=()=>{V.value=null},ve=()=>{N.onSearch?N.onSearch(V.value):console.log(`Searching for:`,V.value.code),$()},ye=()=>{N.onCreate?N.onCreate(V.value):console.log(`Creating new item with barcode:`,V.value.code),$()},be=async()=>{try{await navigator.clipboard.writeText(V.value.code),alert(`Barcode copied to clipboard!`)}catch(e){console.error(`Failed to copy:`,e);let t=document.createElement(`textarea`);t.value=V.value.code,document.body.appendChild(t),t.select(),document.execCommand(`copy`),document.body.removeChild(t),alert(`Barcode copied to clipboard!`)}},xe=e=>{let t=Date.now(),n=t-e,r=Math.floor(n/6e4);if(r<1)return`Just now`;if(r<60)return`${r}m ago`;let i=Math.floor(r/60);if(i<24)return`${i}h ago`;let a=Math.floor(i/24);return`${a}d ago`},Se=e=>new Date(e).toLocaleString(),Ce=async()=>{try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){let e=await navigator.mediaDevices.enumerateDevices();I.value=e.some(e=>e.kind===`videoinput`),L.value=e.filter(e=>e.kind===`videoinput`).length>1}}catch(e){console.error(`Camera check failed:`,e),I.value=!1}};return a(()=>{Ce()}),o(()=>{Y()}),p({startScanning:K,closeScanner:Y}),(i,a)=>(s(),t(`div`,v,[_(`button`,{onClick:K,disabled:P.value||!I.value,class:d([`scanner-button`,{"opacity-50 cursor-not-allowed":P.value||!I.value}])},[P.value?(s(),t(`svg`,x,[...a[2]||=[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15`},null,-1)]])):(s(),t(`svg`,b,[...a[1]||=[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z`},null,-1)]])),_(`span`,null,f(pe()),1)],10,y),_(`div`,S,[a[4]||=_(`label`,{class:`input-label`},` Or enter barcode manually: `,-1),_(`div`,C,[l(_(`input`,{"onUpdate:modelValue":a[0]||=e=>B.value=e,type:`text`,placeholder:`Enter barcode`,class:`barcode-input`,onKeyup:h(Z,[`enter`])},null,544),[[m,B.value]]),_(`button`,{onClick:Z,disabled:!B.value.trim(),class:`search-button`},[...a[3]||=[_(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z`})],-1)]],8,w)])]),F.value?(s(),t(`div`,T,[_(`div`,E,[_(`div`,D,[a[6]||=_(`h3`,{class:`scanner-title`},`Scan Barcode`,-1),_(`div`,O,[_(`div`,{class:d([`status-indicator`,{active:P.value}])},null,2),_(`span`,k,f(P.value?`Scanning...`:`Ready`),1)]),_(`button`,{onClick:Y,class:`close-button`,"aria-label":`Close scanner`},[...a[5]||=[_(`svg`,{class:`w-6 h-6`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M6 18L18 6M6 6l12 12`})],-1)]])]),_(`div`,A,[_(`div`,{ref_key:`scannerElement`,ref:W,class:`scanner-element`},null,512),_(`div`,j,[a[7]||=n(`<div class="scanner-frame" data-v-307aba28><div class="corner top-left" data-v-307aba28></div><div class="corner top-right" data-v-307aba28></div><div class="corner bottom-left" data-v-307aba28></div><div class="corner bottom-right" data-v-307aba28></div></div>`,1),_(`div`,{class:d([`scanner-line`,{scanning:P.value}])},null,2)]),a[8]||=n(`<div class="scanner-instructions" data-v-307aba28><p class="instruction-text" data-v-307aba28> Position the barcode within the frame </p><div class="supported-formats" data-v-307aba28><span class="format-tag" data-v-307aba28>QR Code</span><span class="format-tag" data-v-307aba28>Code 128</span><span class="format-tag" data-v-307aba28>EAN-13</span><span class="format-tag" data-v-307aba28>UPC-A</span></div></div>`,1)]),_(`div`,M,[_(`button`,{onClick:_e,class:d([`control-button`,{active:R.value}])},[...a[9]||=[_(`svg`,{class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M13 10V3L4 14h7v7l9-11h-7z`})],-1),r(` Flash `,-1)]],2),L.value?(s(),t(`button`,{key:0,onClick:X,class:`control-button`},[...a[10]||=[_(`svg`,{class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15`})],-1),r(` Switch `,-1)]])):e(``,!0),_(`button`,{onClick:ge,class:d([`control-button`,{active:z.value}])},[a[11]||=_(`svg`,{class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M15 12a3 3 0 11-6 0 3 3 0 016 0z`}),_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z`})],-1),r(` `+f(z.value?`Pause`:`Resume`),1)],2)]),H.value.length>0?(s(),t(`div`,ee,[a[12]||=_(`h4`,{class:`recent-title`},`Recent Scans`,-1),_(`div`,te,[(s(!0),t(g,null,c(H.value.slice(0,3),(e,n)=>(s(),t(`div`,{key:n,onClick:t=>Q(e),class:`scan-item`},[_(`div`,re,f(e.code),1),_(`div`,ie,f(e.format),1),_(`div`,ae,f(xe(e.timestamp)),1)],8,ne))),128))])])):e(``,!0)])])):e(``,!0),V.value?(s(),t(`div`,oe,[_(`div`,se,[_(`div`,{class:`result-header`},[a[14]||=_(`div`,{class:`result-icon`},[_(`svg`,{class:`w-8 h-8 text-green-500`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z`})])],-1),a[15]||=_(`h3`,{class:`result-title`},`Barcode Scanned Successfully!`,-1),_(`button`,{onClick:$,class:`result-close`,"aria-label":`Close result`},[...a[13]||=[_(`svg`,{class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M6 18L18 6M6 6l12 12`})],-1)]])]),_(`div`,ce,[_(`div`,le,[a[16]||=_(`p`,{class:`barcode-label`},`Scanned Code:`,-1),_(`p`,ue,f(V.value.code),1),_(`p`,de,f(V.value.format||`Unknown Format`),1),_(`p`,fe,`Scanned at: `+f(Se(V.value.timestamp)),1)]),_(`div`,{class:`result-actions`},[_(`button`,{onClick:ve,class:`action-button primary`},[...a[17]||=[_(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z`})],-1),r(` Search `,-1)]]),_(`button`,{onClick:ye,class:`action-button secondary`},[...a[18]||=[_(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 6v6m0 0v6m0-6h6m-6 0H6`})],-1),r(` Create New `,-1)]]),_(`button`,{onClick:be,class:`action-button tertiary`},[...a[19]||=[_(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z`})],-1),r(` Copy `,-1)]])])])])])):e(``,!0)]))}};var P=p(N,[[`__scopeId`,`data-v-307aba28`]]);const F={class:`barcode-scanner-integration`},I={key:0,class:`scanner-modal`},L={class:`scanner-modal-content`},R={class:`scanner-content`},z={key:0,class:`camera-scanner`},B={class:`manual-input-section`},V={class:`input-group`},H=[`disabled`],U={class:`scanner-type-toggle`},W={key:0,class:`recent-scans`},G={class:`scans-list`},pe=[`onClick`],K={class:`scan-code`},me={class:`scan-info`},he={class:`scan-format`},q={class:`scan-time`},J={key:1,class:`scan-result`},Y={class:`result-content`},ge={class:`result-text`},_e={class:`result-code`},X={class:`result-format`},Z={__name:`BarcodeScannerIntegration`,props:{onScan:{type:Function,required:!0},onSearch:{type:Function,default:null},onCreate:{type:Function,default:null}},setup(n,{expose:o}){let p=n,v=u(!1),y=u(`camera`),b=u(!1),x=u(``),S=u(null),C=u([]),w=e=>{S.value=e,C.value.unshift(e),C.value.length>20&&(C.value=C.value.slice(0,20)),localStorage.setItem(`recentScans`,JSON.stringify(C.value)),p.onScan(e),k()},T=e=>{p.onSearch&&p.onSearch(e),k()},E=e=>{p.onCreate&&p.onCreate(e),k()},D=()=>{if(x.value.trim()){let e={code:x.value.trim(),format:`Manual Entry`,timestamp:Date.now()};w(e),x.value=``}},O=e=>{w(e)},k=()=>{v.value=!1,x.value=``},A=()=>{S.value=null},j=e=>{let t=Date.now(),n=t-e,r=Math.floor(n/6e4);if(r<1)return`Just now`;if(r<60)return`${r}m ago`;let i=Math.floor(r/60);if(i<24)return`${i}h ago`;let a=Math.floor(i/24);return`${a}d ago`},M=async()=>{try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){let e=await navigator.mediaDevices.enumerateDevices();b.value=e.some(e=>e.kind===`videoinput`)}}catch(e){console.error(`Camera check failed:`,e),b.value=!1}},ee=()=>{try{let e=localStorage.getItem(`recentScans`);e&&(C.value=JSON.parse(e))}catch(e){console.error(`Failed to load recent scans:`,e)}};return a(()=>{M(),ee()}),o({openScanner:()=>{v.value=!0},closeScanner:k}),(n,a)=>(s(),t(`div`,F,[_(`button`,{onClick:a[0]||=e=>v.value=!0,class:d([`scanner-trigger-button`,{"opacity-50 cursor-not-allowed":!b.value}])},[...a[4]||=[_(`svg`,{class:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z`})],-1),_(`span`,null,`Scan Barcode`,-1)]],2),v.value?(s(),t(`div`,I,[_(`div`,L,[_(`div`,{class:`modal-header`},[a[6]||=_(`h3`,{class:`modal-title`},`Barcode Scanner`,-1),_(`button`,{onClick:k,class:`close-button`,"aria-label":`Close scanner`},[...a[5]||=[_(`svg`,{class:`w-6 h-6`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M6 18L18 6M6 6l12 12`})],-1)]])]),_(`div`,R,[y.value===`camera`?(s(),t(`div`,z,[i(P,{"on-scan":w,"on-search":T,"on-create":E})])):e(``,!0),_(`div`,B,[a[8]||=_(`h4`,{class:`input-title`},`Or enter barcode manually:`,-1),_(`div`,V,[l(_(`input`,{"onUpdate:modelValue":a[1]||=e=>x.value=e,type:`text`,placeholder:`Enter barcode`,class:`barcode-input`,onKeyup:h(D,[`enter`])},null,544),[[m,x.value]]),_(`button`,{onClick:D,disabled:!x.value.trim(),class:`search-button`},[...a[7]||=[_(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z`})],-1)]],8,H)])]),_(`div`,U,[_(`button`,{onClick:a[2]||=e=>y.value=`camera`,class:d([`type-button`,{active:y.value===`camera`}])},[...a[9]||=[_(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z`}),_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M15 13a3 3 0 11-6 0 3 3 0 016 0z`})],-1),r(` Camera `,-1)]],2),_(`button`,{onClick:a[3]||=e=>y.value=`manual`,class:d([`type-button`,{active:y.value===`manual`}])},[...a[10]||=[_(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z`})],-1),r(` Manual `,-1)]],2)])]),C.value.length>0?(s(),t(`div`,W,[a[11]||=_(`h4`,{class:`recent-title`},`Recent Scans`,-1),_(`div`,G,[(s(!0),t(g,null,c(C.value.slice(0,5),(e,n)=>(s(),t(`div`,{key:n,onClick:t=>O(e),class:`scan-item`},[_(`div`,K,f(e.code),1),_(`div`,me,[_(`span`,he,f(e.format),1),_(`span`,q,f(j(e.timestamp)),1)])],8,pe))),128))])])):e(``,!0)])])):e(``,!0),S.value?(s(),t(`div`,J,[_(`div`,Y,[a[13]||=_(`div`,{class:`result-icon`},[_(`svg`,{class:`w-5 h-5 text-green-500`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z`})])],-1),_(`div`,ge,[_(`span`,_e,f(S.value.code),1),_(`span`,X,f(S.value.format),1)]),_(`button`,{onClick:A,class:`clear-button`,"aria-label":`Clear result`},[...a[12]||=[_(`svg`,{class:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[_(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M6 18L18 6M6 6l12 12`})],-1)]])])])):e(``,!0)]))}};var Q=p(Z,[[`__scopeId`,`data-v-c747bc36`]]);export{Q as b};