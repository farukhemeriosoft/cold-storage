import{A as e,B as t,C as n,D as r,E as i,G as a,H as o,I as ee,K as s,O as c,P as l,Q as te,S as u,c as d,d as ne,l as re,o as ie,p as ae,w as f,y as p,z as m}from"./index-DtN-fcwp.js";import{b as oe}from"./useDarkMode-BFH4b8fl.js";import{b as se}from"./MegaSearch-8CFJ7-2e.js";import{b as ce}from"./LanguageSwitcher-BGX9PX3v.js";const le={class:`min-h-screen bg-gradient-to-br from-gray-50 via-gray-100 to-gray-200 dark:from-gray-900 dark:via-gray-800 dark:to-gray-700 transition-colors duration-300`},ue={class:`bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-b border-gray-200/50 dark:border-gray-700/50 sticky top-0 z-50 transition-colors duration-300`},de={class:`w-full px-[2%]`},fe={class:`flex justify-between h-16`},pe={class:`flex items-center space-x-4`},me={class:`hidden md:block w-80`},h={key:0,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},g={key:1,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},_={class:`w-full py-8 px-[2%]`},v={class:`w-full`},y={class:`mb-6`},b={class:`mb-8`},x={class:`flex items-center justify-between`},S={key:0,class:`mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4`},C={class:`flex items-center justify-between`},w={class:`flex items-center`},T={class:`text-sm font-medium text-blue-800 dark:text-blue-200`},E={key:1,class:`flex justify-center items-center py-12`},D={key:2,class:`bg-red-50 border border-red-200 rounded-lg p-4 mb-6`},O={class:`flex`},k={class:`ml-3`},A={class:`text-sm font-medium text-red-800`},j={key:3,class:`bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 overflow-hidden transition-colors duration-300`},M={class:`overflow-x-auto`},N={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},P={class:`bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700`},F={key:0,class:`bg-white dark:bg-gray-900`},I={colspan:`8`,class:`px-6 py-12 text-center text-gray-500`},L={class:`flex flex-col items-center`},R={class:`px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100`},z={class:`px-6 py-4 whitespace-nowrap`},he={class:`text-sm font-medium text-gray-900 dark:text-gray-100`},ge={class:`px-6 py-4 whitespace-nowrap`},_e={class:`text-sm text-gray-900 dark:text-gray-100 font-mono`},ve={class:`px-6 py-4 whitespace-nowrap`},ye={class:`text-sm text-gray-900 dark:text-gray-100`},be={class:`px-6 py-4`},xe=[`title`],Se={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400`},Ce={class:`px-6 py-4 whitespace-nowrap text-sm font-medium`},we=[`onClick`],B={class:`px-6 py-4 whitespace-nowrap text-sm font-medium`},Te=[`onClick`],Ee={key:0,class:`bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6`},De={class:`flex-1 flex justify-between sm:hidden`},Oe=[`disabled`],ke=[`disabled`],Ae={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},je={class:`text-sm text-gray-700`},Me={class:`font-medium`},Ne={class:`font-medium`},Pe={class:`font-medium`},Fe={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`,"aria-label":`Pagination`},Ie=[`disabled`],Le=[`onClick`],Re=[`disabled`],ze={key:4,class:`mt-6 bg-green-50 border border-green-200 rounded-lg p-4`},Be={class:`flex`},Ve={class:`ml-3`},He={class:`text-sm font-medium text-green-800`},Ue={__name:`CustomersList`,setup(Ue){let V=ne(),H=d(),U=re(),{isDarkMode:We,toggleDarkMode:W}=oe(),G=c([]),K=c([]);c([]);let q=c(!1),J=c(``),Y=c(``),X=c(``),Z=c({current_page:1,last_page:1,per_page:15,total:0,from:0,to:0});i(async()=>{H.query.search&&(X.value=H.query.search),await Q()});let Q=async(e=1)=>{q.value=!0,J.value=``;try{let t=await ae.getCustomers(e),n=t.data.data||t.data,r=n.data||n||[];K.value=r,X.value?Ge():G.value=r,n.current_page&&(Z.value={current_page:n.current_page,last_page:n.last_page,per_page:n.per_page,total:n.total,from:n.from,to:n.to}),await qe()}catch(e){console.error(`Error loading customers:`,e),J.value=`Failed to load customers. Please try again.`}finally{q.value=!1}},Ge=()=>{if(!X.value){G.value=K.value;return}let e=X.value.toLowerCase().trim();G.value=K.value.filter(t=>t.full_name?.toLowerCase().includes(e)||t.cnic_number?.toLowerCase().includes(e)||t.phone_number?.toLowerCase().includes(e)||t.address?.toLowerCase().includes(e))},Ke=()=>{X.value=``,G.value=K.value,V.push(`/customers`)},qe=async()=>{try{let e=[],t=1,n=!0;for(;n;){let r=await ie.getBatches(t),i=r.data.data||r.data,a=[];i.data?(a=i.data,n=t<i.last_page):Array.isArray(i)?(a=i,n=!1):(a=[i],n=!1),e=e.concat(a),t++}let r={};e.forEach(e=>{let t=e.customer_id||e.customer?.id;t&&(r[t]=(r[t]||0)+1)}),G.value=G.value.map(e=>({...e,batches_count:r[e.id]||0}))}catch(e){console.error(`Error loading batch counts:`,e)}},Je=e=>{V.push(`/edit-customer/${e.id}`)},Ye=()=>{let e=[],t=Z.value.current_page,n=Z.value.last_page,r=Math.max(1,t-2),i=Math.min(n,r+4);i-r<4&&(r=Math.max(1,i-4));for(let t=r;t<=i;t++)e.push(t);return e},Xe=e=>{if(!e)return`N/A`;let t=new Date(e);return t.toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`})},$=e=>e.batches_count||e.batches?.length||e.total_batches||e.batch_count||(e.batches&&Array.isArray(e.batches)?e.batches.length:0)||0,Ze=e=>{V.push(`/customer-batches/${e.id}`)},Qe=async()=>{try{await U.logout(),V.push(`/login`)}catch(e){console.error(`Logout error:`,e),U.clearAuth(),V.push(`/login`)}};return(i,c)=>{let d=ee(`router-link`);return a(),e(`div`,le,[p(`nav`,ue,[p(`div`,de,[p(`div`,fe,[c[9]||=t(`<div class="flex items-center"><div class="flex-shrink-0"><div class="h-8 w-8 bg-gradient-to-r from-gray-800 to-black rounded-lg flex items-center justify-center"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div></div><div class="ml-3"><h1 class="text-xl font-bold bg-gradient-to-r from-gray-800 to-black dark:from-gray-200 dark:to-white bg-clip-text text-transparent transition-colors duration-300"> A &amp; S Cold Storage </h1></div></div>`,1),p(`div`,pe,[p(`div`,me,[r(se)]),r(d,{to:`/dashboard`,class:`text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700`},{default:s(()=>[...c[5]||=[n(` Dashboard `,-1)]]),_:1}),r(d,{to:`/profile`,class:`text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200`},{default:s(()=>[...c[6]||=[n(` Profile `,-1)]]),_:1}),p(`button`,{onClick:c[0]||=(...e)=>l(W)&&l(W)(...e),class:`p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200`},[l(We)?(a(),e(`svg`,g,[...c[8]||=[p(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)]])):(a(),e(`svg`,h,[...c[7]||=[p(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]]))]),r(ce),p(`button`,{onClick:Qe,class:`bg-gradient-to-r from-red-400 to-red-500 hover:from-red-500 hover:to-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105`},` Logout `)])])])]),p(`main`,_,[p(`div`,v,[p(`div`,y,[r(d,{to:`/dashboard`,class:`inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:s(()=>[...c[10]||=[p(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[p(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),n(` Back to Dashboard `,-1)]]),_:1})]),p(`div`,b,[p(`div`,x,[c[12]||=p(`div`,null,[p(`h1`,{class:`text-3xl font-bold text-gray-900 mb-2`},`Customers`),p(`p`,{class:`text-gray-600`},`Manage your customer database`)],-1),r(d,{to:`/new-customer`,class:`bg-gradient-to-r from-emerald-400 to-emerald-500 hover:from-emerald-500 hover:to-emerald-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 flex items-center`},{default:s(()=>[...c[11]||=[p(`svg`,{class:`h-5 w-5 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[p(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 6v6m0 0v6m0-6h6m-6 0H6`})],-1),n(` Add New Customer `,-1)]]),_:1})])]),X.value?(a(),e(`div`,S,[p(`div`,C,[p(`div`,w,[c[13]||=p(`svg`,{class:`h-5 w-5 text-blue-500 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[p(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z`})],-1),p(`span`,T,` Showing search results for: "`+u(X.value)+`" `,1)]),p(`button`,{onClick:Ke,class:`text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200 text-sm font-medium`},` Clear search `)])])):m(``,!0),q.value?(a(),e(`div`,E,[...c[14]||=[p(`div`,{class:`animate-spin rounded-full h-12 w-12 border-b-2 border-gray-600`},null,-1)]])):J.value?(a(),e(`div`,D,[p(`div`,O,[c[15]||=p(`div`,{class:`flex-shrink-0`},[p(`svg`,{class:`h-5 w-5 text-red-400`,viewBox:`0 0 20 20`,fill:`currentColor`},[p(`path`,{"fill-rule":`evenodd`,d:`M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z`,"clip-rule":`evenodd`})])],-1),p(`div`,k,[p(`p`,A,u(J.value),1)])])])):(a(),e(`div`,j,[c[27]||=p(`div`,{class:`px-6 py-4 bg-gradient-to-r from-gray-800 to-black`},[p(`h3`,{class:`text-lg font-semibold text-white`},`Customer List`)],-1),p(`div`,M,[p(`table`,N,[c[20]||=p(`thead`,{class:`bg-gray-50/95 dark:bg-gray-800/80 backdrop-blur sticky top-0 z-10`},[p(`tr`,null,[p(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` ID `),p(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Full Name `),p(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` CNIC Number `),p(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Phone Number `),p(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Address `),p(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Created At `),p(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Lot `),p(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Actions `)])],-1),p(`tbody`,P,[G.value.length===0?(a(),e(`tr`,F,[p(`td`,I,[p(`div`,L,[c[17]||=p(`svg`,{class:`h-12 w-12 text-gray-400 mb-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[p(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z`})],-1),c[18]||=p(`p`,{class:`text-lg font-medium text-gray-900 mb-2`},`No customers found`,-1),c[19]||=p(`p`,{class:`text-gray-500 mb-4`},`Get started by adding your first customer`,-1),r(d,{to:`/new-customer`,class:`bg-gradient-to-r from-emerald-400 to-emerald-500 hover:from-emerald-500 hover:to-emerald-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200`},{default:s(()=>[...c[16]||=[n(` Add Customer `,-1)]]),_:1})])])])):m(``,!0),(a(!0),e(f,null,o(G.value,t=>(a(),e(`tr`,{key:t.id,class:`odd:bg-gray-50 even:bg-white dark:odd:bg-gray-800 dark:even:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200`},[p(`td`,R,` #`+u(t.id),1),p(`td`,z,[p(`div`,he,u(t.full_name),1)]),p(`td`,ge,[p(`div`,_e,u(t.cnic_number),1)]),p(`td`,ve,[p(`div`,ye,u(t.phone_number),1)]),p(`td`,be,[p(`div`,{class:`text-sm text-gray-900 dark:text-gray-100 max-w-xs truncate`,title:t.address},u(t.address),9,xe)]),p(`td`,Se,u(Xe(t.created_at)),1),p(`td`,Ce,[p(`button`,{onClick:e=>Ze(t),class:`text-green-600 hover:text-green-900 bg-green-50 hover:bg-green-100 dark:text-green-400 dark:hover:text-green-300 dark:bg-green-900/20 dark:hover:bg-green-900/30 px-3 py-1 rounded-md transition-colors duration-200`},u($(t))+` lot`+u($(t)===1?``:`s`),9,we)]),p(`td`,B,[p(`button`,{onClick:e=>Je(t),class:`text-blue-600 hover:text-blue-900 bg-blue-50 hover:bg-blue-100 dark:text-blue-400 dark:hover:text-blue-300 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 px-3 py-1 rounded-md transition-colors duration-200`},` Edit `,8,Te)])]))),128))])])]),Z.value.last_page>1?(a(),e(`div`,Ee,[p(`div`,De,[p(`button`,{onClick:c[1]||=e=>Q(Z.value.current_page-1),disabled:Z.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed`},` Previous `,8,Oe),p(`button`,{onClick:c[2]||=e=>Q(Z.value.current_page+1),disabled:Z.value.current_page>=Z.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed`},` Next `,8,ke)]),p(`div`,Ae,[p(`div`,null,[p(`p`,je,[c[21]||=n(` Showing `,-1),p(`span`,Me,u(Z.value.from),1),c[22]||=n(` to `,-1),p(`span`,Ne,u(Z.value.to),1),c[23]||=n(` of `,-1),p(`span`,Pe,u(Z.value.total),1),c[24]||=n(` results `,-1)])]),p(`div`,null,[p(`nav`,Fe,[p(`button`,{onClick:c[3]||=e=>Q(Z.value.current_page-1),disabled:Z.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed`},[...c[25]||=[p(`span`,{class:`sr-only`},`Previous`,-1),p(`svg`,{class:`h-5 w-5`,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 20 20`,fill:`currentColor`,"aria-hidden":`true`},[p(`path`,{"fill-rule":`evenodd`,d:`M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z`,"clip-rule":`evenodd`})],-1)]],8,Ie),(a(!0),e(f,null,o(Ye(),t=>(a(),e(`button`,{key:t,onClick:e=>Q(t),class:te([t===Z.value.current_page?`z-10 bg-gray-50 border-gray-500 text-gray-600`:`bg-white border-gray-300 text-gray-500 hover:bg-gray-50`,`relative inline-flex items-center px-4 py-2 border text-sm font-medium`])},u(t),11,Le))),128)),p(`button`,{onClick:c[4]||=e=>Q(Z.value.current_page+1),disabled:Z.value.current_page>=Z.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed`},[...c[26]||=[p(`span`,{class:`sr-only`},`Next`,-1),p(`svg`,{class:`h-5 w-5`,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 20 20`,fill:`currentColor`,"aria-hidden":`true`},[p(`path`,{"fill-rule":`evenodd`,d:`M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z`,"clip-rule":`evenodd`})],-1)]],8,Re)])])])])):m(``,!0)])),Y.value?(a(),e(`div`,ze,[p(`div`,Be,[c[28]||=p(`div`,{class:`flex-shrink-0`},[p(`svg`,{class:`h-5 w-5 text-green-400`,viewBox:`0 0 20 20`,fill:`currentColor`},[p(`path`,{"fill-rule":`evenodd`,d:`M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z`,"clip-rule":`evenodd`})])],-1),p(`div`,Ve,[p(`p`,He,u(Y.value),1)])])])):m(``,!0)])])])}}};var V=Ue;export{V as default};