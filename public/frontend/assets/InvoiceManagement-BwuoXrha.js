import{A as e,B as t,C as n,D as r,F as i,H as a,I as o,M as s,P as c,Q as l,R as u,T as d,q as f,t as p,u as m,x as h,z as g}from"./index-BewjDgXt.js";const ee={class:`min-h-screen bg-gray-50 dark:bg-gray-900`},te={class:`bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700`},ne={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`},re={class:`flex justify-between items-center h-16`},ie={class:`flex items-center space-x-4`},ae={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},oe={class:`grid grid-cols-1 md:grid-cols-4 gap-6 mb-8`},se={class:`bg-white dark:bg-gray-800 rounded-lg shadow p-6`},ce={class:`flex items-center`},le={class:`ml-4`},ue={class:`text-2xl font-semibold text-gray-900 dark:text-white`},de={class:`bg-white dark:bg-gray-800 rounded-lg shadow p-6`},fe={class:`flex items-center`},pe={class:`ml-4`},me={class:`text-2xl font-semibold text-gray-900 dark:text-white`},he={class:`bg-white dark:bg-gray-800 rounded-lg shadow p-6`},ge={class:`flex items-center`},_e={class:`ml-4`},ve={class:`text-2xl font-semibold text-gray-900 dark:text-white`},ye={class:`bg-white dark:bg-gray-800 rounded-lg shadow p-6`},be={class:`flex items-center`},xe={class:`ml-4`},_={class:`text-2xl font-semibold text-gray-900 dark:text-white`},v={class:`bg-white dark:bg-gray-800 rounded-lg shadow mb-6 p-6`},y={class:`grid grid-cols-1 md:grid-cols-4 gap-4`},b={class:`block lg:hidden space-y-4`},x={class:`flex justify-between items-start mb-3`},S={class:`text-lg font-semibold text-gray-900 dark:text-gray-100`},C={class:`text-sm text-gray-600 dark:text-gray-400`},w={class:`grid grid-cols-2 gap-4 mb-4`},T={class:`text-sm font-medium text-gray-900 dark:text-gray-100`},E={class:`text-sm font-medium text-gray-900 dark:text-gray-100`},D={class:`text-sm font-medium text-gray-900 dark:text-gray-100`},O={class:`text-sm font-medium text-gray-900 dark:text-gray-100`},k={class:`flex flex-wrap gap-2`},A=[`onClick`],j=[`onClick`],M=[`onClick`],Se=[`onClick`],Ce={class:`hidden lg:block bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden`},we={class:`overflow-x-auto`},Te={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},Ee={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},De={class:`px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white`},Oe={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300`},ke={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300`},Ae={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},je={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Me={class:`px-6 py-4 whitespace-nowrap`},Ne={class:`flex flex-col space-y-1`},Pe={key:0,class:`text-xs text-orange-600 dark:text-orange-400`},Fe={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300`},Ie={class:`px-6 py-4 whitespace-nowrap text-sm font-medium`},Le={class:`flex space-x-2`},Re=[`onClick`],ze=[`onClick`],Be=[`onClick`],N=[`onClick`],Ve={key:0,class:`flex justify-center items-center py-8`},He={key:1,class:`text-center py-12`},Ue={key:0,class:`fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50`},We={class:`relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800`},Ge={class:`mt-3`},Ke={class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},qe={class:`space-y-4`},Je={key:0,class:`space-y-3`},Ye={class:`grid grid-cols-2 gap-4 text-sm`},Xe={class:`ml-2 text-gray-900 dark:text-white`},Ze={class:`ml-2 text-gray-900 dark:text-white`},Qe={class:`ml-2 text-gray-900 dark:text-white`},$e={class:`ml-2 text-gray-900 dark:text-white`},et={class:`ml-2 text-gray-900 dark:text-white`},tt={class:`ml-2 text-gray-900 dark:text-white`},nt={class:`ml-2 text-gray-900 dark:text-white`},rt={class:`pt-3 border-t border-gray-200 dark:border-gray-600 space-y-2`},it={key:1},at={class:`bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-4`},ot={class:`grid grid-cols-2 gap-4 text-sm`},st={class:`ml-2 font-medium text-blue-900 dark:text-blue-100`},ct={class:`ml-2 font-medium text-blue-900 dark:text-blue-100`},lt={class:`ml-2 font-medium text-blue-900 dark:text-blue-100`},ut={class:`ml-2 font-medium text-blue-900 dark:text-blue-100`},dt={class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},ft={class:`text-xs text-gray-500 dark:text-gray-400`},pt=[`max`,`placeholder`],mt={class:`mt-3`},ht={class:`flex flex-wrap gap-2`},gt={class:`flex justify-end space-x-3 mt-6`},_t=[`disabled`],vt={__name:`InvoiceManagement`,setup(vt){let P=c([]),F=c({}),I=c(!1),L=c(!1),R=c(!1),z=c(null),B=c({status:``,search:``,from_date:``,to_date:``}),V=c({amount:0,payment_method:`cash`,transaction_id:``,notes:``}),H=async()=>{I.value=!0;try{let e=new URLSearchParams;B.value.status&&e.append(`status`,B.value.status),B.value.search&&e.append(`search`,B.value.search),B.value.from_date&&e.append(`from_date`,B.value.from_date),B.value.to_date&&e.append(`to_date`,B.value.to_date);let t=await f.getAll(e.toString());t&&t.data&&t.data.data&&t.data.data.data&&Array.isArray(t.data.data.data)?P.value=t.data.data.data:P.value=[]}catch(e){console.error(`Error loading invoices:`,e),P.value=[]}finally{I.value=!1}},U=async()=>{try{let e=await f.getStatistics();e&&e.data&&e.data.data?F.value=e.data.data:F.value={}}catch(e){console.error(`Error loading statistics:`,e),F.value={}}},W=()=>{H(),U()},G=bt(()=>{H()},500),K=e=>{if(!e)return`bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300`;let t={unpaid:`bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300`,paid:`bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300`,partially_paid:`bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300`,overdue:`bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300`,cancelled:`bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300`};return t[e]||`bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300`},q=e=>e?new Date(e).toLocaleDateString():`N/A`,J=e=>{z.value=e,L.value=!0},Y=e=>{let t=e.customer,n=e.batch,r=new Date().toLocaleDateString(`en-GB`),i=n?.total_baskets||0,a=parseFloat(e.total_amount||0).toFixed(2),o=``;o=e.status===`paid`?`âœ… *Payment Received*

Dear ${t?.full_name||`Customer`},

We have received your payment for the following invoice:

ðŸ“‹ *Invoice Details:*
â€¢ Invoice #: ${e.invoice_number||`N/A`}
â€¢ Lot ID: ${n?.id||`N/A`}
â€¢ Number of Baskets: ${i}
â€¢ Amount Paid: PKR ${a}
â€¢ Payment Date: ${r}

Your lot is now ready for dispatch!

Thank you for your business!
Cold Storage Management System`:`ðŸ“‹ *Invoice Details*

Dear ${t?.full_name||`Customer`},

Here are the details for your invoice:

ðŸ“‹ *Invoice Information:*
â€¢ Invoice #: ${e.invoice_number||`N/A`}
â€¢ Lot ID: ${n?.id||`N/A`}
â€¢ Number of Baskets: ${i}
â€¢ Total Amount: PKR ${a}
â€¢ Status: ${(e.status||`unknown`).replace(`_`,` `).toUpperCase()}
â€¢ Due Date: ${new Date(e.due_date).toLocaleDateString(`en-GB`)}

Please contact us for payment or any queries.

Thank you for your business!
Cold Storage Management System`;let s=`+923453561168`;t?.phone&&(s=t.phone.replace(/[^0-9]/g,``),s.startsWith(`0`)?s=`92`+s.substring(1):s.startsWith(`92`)||(s=`92`+s),s=`+`+s);let c=encodeURIComponent(o),l=`https://wa.me/${s.replace(`+`,``)}?text=${c}`;window.open(l,`_blank`)},X=async e=>{if(!e)return;let t=confirm(`Are you sure you want to revert the payment for Invoice #${e.invoice_number}?\n\nThis will:\nâ€¢ Mark the invoice as unpaid\nâ€¢ Reset paid amount to 0\nâ€¢ Prevent lot dispatch\nâ€¢ Keep payment records for audit\n\nThis action cannot be undone.`);if(t)try{let t=await f.revertPayment(e.id);t.data&&(alert(`Payment reverted successfully!`),await H(),await U())}catch(e){console.error(`Error reverting payment:`,e),alert(`Error reverting payment: `+(e.response?.data?.message||e.message))}},Z=e=>{e&&(z.value=e,V.value.amount=e.balance_due||0,L.value=!0)},Q=e=>{e&&e>0&&(V.value.amount=Math.round(e*100)/100)},$=()=>{L.value=!1,z.value=null,V.value={amount:0,payment_method:`cash`,transaction_id:``,notes:``}},yt=async()=>{if(!z.value)return;let e=parseFloat(V.value.amount),t=parseFloat(z.value.balance_due);if(!e||e<=0){alert(`Please enter a valid payment amount`);return}if(e>t){alert(`Payment amount cannot exceed balance due (PKR ${t})`);return}R.value=!0;try{await f.processPayment(z.value.id,V.value);let n=t-e;n>0?alert(`Partial payment of PKR ${e} processed successfully!\n\nRemaining balance: PKR ${n}\n\nLot will be available for dispatch when fully paid.`):alert(`Payment of PKR ${e} processed successfully!\n\nInvoice is now fully paid and lot is ready for dispatch.`),$(),W()}catch(e){console.error(`Error processing payment:`,e),alert(`Error processing payment: `+(e.response?.data?.message||e.message))}finally{R.value=!1}};function bt(e,t){let n;return function(...r){let i=()=>{clearTimeout(n),e(...r)};clearTimeout(n),n=setTimeout(i,t)}}return i(()=>{H(),U()}),(i,c)=>(a(),t(`div`,ee,[g(`header`,te,[g(`div`,ne,[g(`div`,re,[c[16]||=g(`div`,{class:`flex items-center`},[g(`h1`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`Invoice Management`)],-1),g(`div`,ie,[g(`button`,{onClick:W,class:`bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors`},` Refresh `),g(`button`,{onClick:c[0]||=e=>i.$router.push(`/dashboard`),class:`bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors`},` Back to Dashboard `)])])])]),g(`div`,ae,[g(`div`,oe,[g(`div`,se,[g(`div`,ce,[c[18]||=g(`div`,{class:`p-2 bg-blue-100 dark:bg-blue-900 rounded-lg`},[g(`svg`,{class:`w-6 h-6 text-blue-600 dark:text-blue-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[g(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z`})])],-1),g(`div`,le,[c[17]||=g(`p`,{class:`text-sm font-medium text-gray-600 dark:text-gray-400`},`Total Invoices`,-1),g(`p`,ue,d(F.value.total_invoices||0),1)])])]),g(`div`,de,[g(`div`,fe,[c[20]||=g(`div`,{class:`p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg`},[g(`svg`,{class:`w-6 h-6 text-yellow-600 dark:text-yellow-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[g(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1`})])],-1),g(`div`,pe,[c[19]||=g(`p`,{class:`text-sm font-medium text-gray-600 dark:text-gray-400`},`Outstanding Amount`,-1),g(`p`,me,`PKR `+d(F.value.outstanding_amount||0),1)])])]),g(`div`,he,[g(`div`,ge,[c[22]||=g(`div`,{class:`p-2 bg-red-100 dark:bg-red-900 rounded-lg`},[g(`svg`,{class:`w-6 h-6 text-red-600 dark:text-red-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[g(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z`})])],-1),g(`div`,_e,[c[21]||=g(`p`,{class:`text-sm font-medium text-gray-600 dark:text-gray-400`},`Overdue Invoices`,-1),g(`p`,ve,d(F.value.overdue_invoices||0),1)])])]),g(`div`,ye,[g(`div`,be,[c[24]||=g(`div`,{class:`p-2 bg-green-100 dark:bg-green-900 rounded-lg`},[g(`svg`,{class:`w-6 h-6 text-green-600 dark:text-green-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[g(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z`})])],-1),g(`div`,xe,[c[23]||=g(`p`,{class:`text-sm font-medium text-gray-600 dark:text-gray-400`},`Paid Invoices`,-1),g(`p`,_,d(F.value.paid_invoices||0),1)])])])]),g(`div`,v,[g(`div`,y,[g(`div`,null,[c[26]||=g(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},`Status`,-1),s(g(`select`,{"onUpdate:modelValue":c[1]||=e=>B.value.status=e,onChange:H,class:`w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},[...c[25]||=[n(`<option value="">All Statuses</option><option value="unpaid">Unpaid</option><option value="paid">Paid</option><option value="partially_paid">Partially Paid</option><option value="overdue">Overdue</option><option value="cancelled">Cancelled</option>`,6)]],544),[[p,B.value.status]])]),g(`div`,null,[c[27]||=g(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},`Search`,-1),s(g(`input`,{"onUpdate:modelValue":c[2]||=e=>B.value.search=e,onInput:c[3]||=(...e)=>l(G)&&l(G)(...e),type:`text`,placeholder:`Invoice number, customer name, or LOT ID`,class:`w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,544),[[m,B.value.search]])]),g(`div`,null,[c[28]||=g(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},`From Date`,-1),s(g(`input`,{"onUpdate:modelValue":c[4]||=e=>B.value.from_date=e,type:`date`,class:`w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,512),[[m,B.value.from_date]])]),g(`div`,null,[c[29]||=g(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},`To Date`,-1),s(g(`input`,{"onUpdate:modelValue":c[5]||=e=>B.value.to_date=e,type:`date`,class:`w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,512),[[m,B.value.to_date]])])])]),g(`div`,b,[(a(!0),t(h,null,o(P.value,(n,i)=>(a(),t(`div`,{key:n?.id||i,class:`bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4`},[g(`div`,x,[g(`div`,null,[g(`h3`,S,d(n?.invoice_number||`N/A`),1),g(`p`,C,d(n?.customer?.full_name||`N/A`),1)]),g(`span`,{class:u([K(n?.status),`inline-flex px-2 py-1 text-xs font-semibold rounded-full`])},d((n?.status||`unknown`).replace(`_`,` `).toUpperCase()),3)]),g(`div`,w,[g(`div`,null,[c[30]||=g(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Lot ID`,-1),g(`p`,T,d(n?.batch?.id||`N/A`),1)]),g(`div`,null,[c[31]||=g(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Amount`,-1),g(`p`,E,`PKR `+d(n?.total_amount||`0.00`),1)]),g(`div`,null,[c[32]||=g(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Paid`,-1),g(`p`,D,`PKR `+d(n?.paid_amount||`0.00`),1)]),g(`div`,null,[c[33]||=g(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Due Date`,-1),g(`p`,O,d(q(n?.due_date)),1)])]),g(`div`,k,[g(`button`,{onClick:e=>J(n),class:`flex-1 bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium py-2 px-3 rounded-lg transition-colors duration-200`},` View `,8,A),n?.status===`paid`?e(``,!0):(a(),t(`button`,{key:0,onClick:e=>Z(n),class:`flex-1 bg-green-500 hover:bg-green-600 text-white text-sm font-medium py-2 px-3 rounded-lg transition-colors duration-200`},` Pay `,8,j)),n?.status===`paid`?(a(),t(`button`,{key:1,onClick:e=>Y(n),class:`flex-1 bg-green-500 hover:bg-green-600 text-white text-sm font-medium py-2 px-3 rounded-lg transition-colors duration-200 flex items-center justify-center`},[...c[34]||=[g(`svg`,{class:`h-4 w-4 mr-1`,fill:`currentColor`,viewBox:`0 0 24 24`},[g(`path`,{d:`M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488`})],-1),r(` WhatsApp `,-1)]],8,M)):e(``,!0),n?.status===`paid`?(a(),t(`button`,{key:2,onClick:e=>X(n),class:`flex-1 bg-red-500 hover:bg-red-600 text-white text-sm font-medium py-2 px-3 rounded-lg transition-colors duration-200 flex items-center justify-center`},[...c[35]||=[g(`svg`,{class:`h-4 w-4 mr-1`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[g(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15`})],-1),r(` Revert `,-1)]],8,Se)):e(``,!0)])]))),128))]),g(`div`,Ce,[g(`div`,we,[g(`table`,Te,[c[38]||=g(`thead`,{class:`bg-gray-50 dark:bg-gray-700`},[g(`tr`,null,[g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Invoice #`),g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Customer`),g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Lot ID`),g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Amount`),g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Paid`),g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Status`),g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Due Date`),g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Actions`)])],-1),g(`tbody`,Ee,[(a(!0),t(h,null,o(P.value,(n,r)=>(a(),t(`tr`,{key:n?.id||r,class:`hover:bg-gray-50 dark:hover:bg-gray-700`},[g(`td`,De,d(n?.invoice_number||`N/A`),1),g(`td`,Oe,d(n?.customer?.full_name||`N/A`),1),g(`td`,ke,d(n?.batch?.id||`N/A`),1),g(`td`,Ae,` PKR `+d(n?.total_amount||`0.00`),1),g(`td`,je,` PKR `+d(n?.paid_amount||`0.00`),1),g(`td`,Me,[g(`div`,Ne,[g(`span`,{class:u([K(n?.status),`inline-flex px-2 py-1 text-xs font-semibold rounded-full`])},d((n?.status||`unknown`).replace(`_`,` `).toUpperCase()),3),n?.status===`partially_paid`?(a(),t(`span`,Pe,d(Math.round(n?.paid_amount/n?.total_amount*100))+`% Paid `,1)):e(``,!0)])]),g(`td`,Fe,d(q(n?.due_date)),1),g(`td`,Ie,[g(`div`,Le,[g(`button`,{onClick:e=>J(n),class:`text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300`},` View `,8,Re),n?.status===`unpaid`||n?.status===`partially_paid`?(a(),t(`button`,{key:0,onClick:e=>Z(n),class:`text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300`},` Pay `,8,ze)):e(``,!0),n?.status===`paid`?(a(),t(`button`,{key:1,onClick:e=>Y(n),class:`text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 p-2 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20`,title:`Share via WhatsApp`},[...c[36]||=[g(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`currentColor`},[g(`path`,{d:`M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488`})],-1)]],8,Be)):e(``,!0),n?.status===`paid`?(a(),t(`button`,{key:2,onClick:e=>X(n),class:`text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20`,title:`Revert Payment`},[...c[37]||=[g(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`currentColor`},[g(`path`,{d:`M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z`})],-1)]],8,N)):e(``,!0)])])]))),128))])])])]),I.value?(a(),t(`div`,Ve,[...c[39]||=[g(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600`},null,-1)]])):e(``,!0),!I.value&&P.value.length===0?(a(),t(`div`,He,[...c[40]||=[g(`svg`,{class:`mx-auto h-12 w-12 text-gray-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[g(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z`})],-1),g(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`No invoices found`,-1),g(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},`Get started by creating a new batch.`,-1)]])):e(``,!0)]),L.value?(a(),t(`div`,Ue,[g(`div`,We,[g(`div`,Ge,[g(`h3`,Ke,d(z.value&&V.value.amount>0?`Process Payment`:`Invoice Details`),1),g(`div`,qe,[z.value&&V.value.amount===0?(a(),t(`div`,Je,[g(`div`,Ye,[g(`div`,null,[c[41]||=g(`span`,{class:`font-medium text-gray-700 dark:text-gray-300`},`Invoice #:`,-1),g(`span`,Xe,d(z.value.invoice_number||`N/A`),1)]),g(`div`,null,[c[42]||=g(`span`,{class:`font-medium text-gray-700 dark:text-gray-300`},`Status:`,-1),g(`span`,{class:u([`ml-2`,K(z.value.status)])},d(z.value.status||`N/A`),3)]),g(`div`,null,[c[43]||=g(`span`,{class:`font-medium text-gray-700 dark:text-gray-300`},`Customer:`,-1),g(`span`,Ze,d(z.value.customer?.full_name||`N/A`),1)]),g(`div`,null,[c[44]||=g(`span`,{class:`font-medium text-gray-700 dark:text-gray-300`},`Lot ID:`,-1),g(`span`,Qe,d(z.value.batch?.id||`N/A`),1)]),g(`div`,null,[c[45]||=g(`span`,{class:`font-medium text-gray-700 dark:text-gray-300`},`Total Amount:`,-1),g(`span`,$e,`PKR `+d(z.value.total_amount||`0.00`),1)]),g(`div`,null,[c[46]||=g(`span`,{class:`font-medium text-gray-700 dark:text-gray-300`},`Balance Due:`,-1),g(`span`,et,`PKR `+d(z.value.balance_due||`0.00`),1)]),g(`div`,null,[c[47]||=g(`span`,{class:`font-medium text-gray-700 dark:text-gray-300`},`Invoice Date:`,-1),g(`span`,tt,d(q(z.value.invoice_date)),1)]),g(`div`,null,[c[48]||=g(`span`,{class:`font-medium text-gray-700 dark:text-gray-300`},`Due Date:`,-1),g(`span`,nt,d(q(z.value.due_date)),1)])]),g(`div`,rt,[g(`button`,{onClick:c[6]||=e=>Z(z.value),class:`w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500`},` Process Payment `),z.value?.status===`paid`?(a(),t(`button`,{key:0,onClick:c[7]||=e=>Y(z.value),class:`w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-2 focus:ring-green-500 flex items-center justify-center space-x-2`},[...c[49]||=[g(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`currentColor`},[g(`path`,{d:`M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488`})],-1),g(`span`,null,`Share via WhatsApp`,-1)]])):e(``,!0)])])):(a(),t(`div`,it,[g(`div`,at,[c[54]||=g(`h4`,{class:`font-medium text-blue-900 dark:text-blue-100 mb-2`},`Payment Information`,-1),g(`div`,ot,[g(`div`,null,[c[50]||=g(`span`,{class:`text-blue-700 dark:text-blue-300`},`Total Amount:`,-1),g(`span`,st,`PKR `+d(z.value?.total_amount||`0.00`),1)]),g(`div`,null,[c[51]||=g(`span`,{class:`text-blue-700 dark:text-blue-300`},`Already Paid:`,-1),g(`span`,ct,`PKR `+d(z.value?.paid_amount||`0.00`),1)]),g(`div`,null,[c[52]||=g(`span`,{class:`text-blue-700 dark:text-blue-300`},`Balance Due:`,-1),g(`span`,lt,`PKR `+d(z.value?.balance_due||`0.00`),1)]),g(`div`,null,[c[53]||=g(`span`,{class:`text-blue-700 dark:text-blue-300`},`Payment Status:`,-1),g(`span`,ut,d((z.value?.status||`unknown`).replace(`_`,` `).toUpperCase()),1)])])]),g(`div`,null,[g(`label`,dt,[c[55]||=r(` Payment Amount `,-1),g(`span`,ft,` (Enter amount to pay now, up to PKR `+d(z.value?.balance_due||`0.00`)+`) `,1)]),s(g(`input`,{"onUpdate:modelValue":c[8]||=e=>V.value.amount=e,type:`number`,step:`0.01`,max:z.value?.balance_due||0,placeholder:`Enter amount (max: ${z.value?.balance_due||0})`,class:`w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,8,pt),[[m,V.value.amount]]),c[57]||=g(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` ðŸ’¡ You can make partial payments. The lot will be available for dispatch only when fully paid. `,-1),g(`div`,mt,[c[56]||=g(`p`,{class:`text-xs font-medium text-gray-700 dark:text-gray-300 mb-2`},`Quick Payment Options:`,-1),g(`div`,ht,[g(`button`,{onClick:c[9]||=e=>Q(z.value?.balance_due*.25),class:`px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600`},` 25% (PKR `+d(Math.round(z.value?.balance_due*.25||0))+`) `,1),g(`button`,{onClick:c[10]||=e=>Q(z.value?.balance_due*.5),class:`px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600`},` 50% (PKR `+d(Math.round(z.value?.balance_due*.5||0))+`) `,1),g(`button`,{onClick:c[11]||=e=>Q(z.value?.balance_due*.75),class:`px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600`},` 75% (PKR `+d(Math.round(z.value?.balance_due*.75||0))+`) `,1),g(`button`,{onClick:c[12]||=e=>Q(z.value?.balance_due),class:`px-3 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800`},` Full Payment (PKR `+d(z.value?.balance_due||`0.00`)+`) `,1)])])]),g(`div`,null,[c[59]||=g(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},`Payment Method`,-1),s(g(`select`,{"onUpdate:modelValue":c[13]||=e=>V.value.payment_method=e,class:`w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},[...c[58]||=[g(`option`,{value:`cash`},`Cash`,-1),g(`option`,{value:`bank_transfer`},`Bank Transfer`,-1),g(`option`,{value:`online`},`Online Payment`,-1),g(`option`,{value:`check`},`Check`,-1)]],512),[[p,V.value.payment_method]])]),g(`div`,null,[c[60]||=g(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},`Transaction ID (Optional)`,-1),s(g(`input`,{"onUpdate:modelValue":c[14]||=e=>V.value.transaction_id=e,type:`text`,class:`w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,512),[[m,V.value.transaction_id]])]),g(`div`,null,[c[61]||=g(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},`Notes (Optional)`,-1),s(g(`textarea`,{"onUpdate:modelValue":c[15]||=e=>V.value.notes=e,rows:`3`,class:`w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,512),[[m,V.value.notes]])])]))]),g(`div`,gt,[g(`button`,{onClick:$,class:`px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500`},` Cancel `),z.value&&V.value.amount>0?(a(),t(`button`,{key:0,onClick:yt,disabled:R.value,class:`px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50`},d(R.value?`Processing...`:`Process Payment`),9,_t)):e(``,!0)])])])])):e(``,!0)]))}};var P=vt;export{P as default};