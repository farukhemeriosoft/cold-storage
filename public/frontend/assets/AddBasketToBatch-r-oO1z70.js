const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/useBarcode-BxhOWQlc.js","assets/useBarcode-CDESM8e0.js","assets/index-BewjDgXt.js","assets/index-CWS82ylH.css"])))=>i.map(i=>d[i]);
import{A as e,B as t,D as n,E as r,F as ee,H as i,I as a,J as te,L as ne,M as re,P as o,Q as s,R as ie,T as c,b as l,c as ae,d as oe,l as se,o as u,u as ce,w as le,x as ue,z as d}from"./index-BewjDgXt.js";import{b as f}from"./useDarkMode-v5Dqi2be.js";import{b as p}from"./MegaSearch-brGl_kL4.js";import{b as m}from"./LanguageSwitcher-ZKeWbNQ2.js";import"./useBarcode-CDESM8e0.js";import{b as h}from"./BarcodeGenerator-CZpHoPt1.js";const g={class:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`},_={class:`bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700`},v={class:`w-full px-[2%]`},y={class:`flex justify-between items-center h-16`},b={class:`flex items-center space-x-4`},x={class:`hidden md:block w-80`},S={key:0,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},C={key:1,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},w={class:`w-full py-8 px-[2%]`},T={class:`mb-6`},E={class:`text-center mb-8`},D={class:`text-gray-600 dark:text-gray-400`},O={key:0,class:`flex justify-center items-center py-12`},k={key:1,class:`bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg mb-6`},A={key:2,class:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8`},j={class:`mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg`},M={class:`grid grid-cols-1 md:grid-cols-2 gap-4 text-sm`},N={class:`ml-2 text-gray-900 dark:text-white`},P={class:`ml-2 text-gray-900 dark:text-white`},F={class:`mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},I={class:`space-y-3`},L={class:`flex-1`},R=[`onUpdate:modelValue`,`placeholder`],z={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},de=[`onClick`],B={class:`pt-4`},V=[`disabled`],H={key:0,class:`flex items-center justify-center`},fe={key:1},pe={key:0,class:`p-4 bg-green-100 dark:bg-green-900 border border-green-400 dark:border-green-600 text-green-700 dark:text-green-300 rounded-lg`},me={key:1,class:`p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 rounded-lg`},he={__name:`AddBasketToBatch`,setup(he){let U=oe(),ge=ae(),_e=se(),{isDarkMode:ve,toggleDarkMode:W}=f(),G=ge.params.id,K=o(null),q=o([{barcode:``}]),J=o(!1),Y=o(!1),X=o({}),Z=o(``),Q=o(``);ee(async()=>{G?await ye():Q.value=`Batch ID is required`});let ye=async()=>{J.value=!0,Q.value=``;try{let e=await u.getBatches(1),t=e.data.data.data||e.data.data||e.data,n=t.find(e=>e.id==G);n?K.value=n:Q.value=`Batch not found. Please check the batch ID.`}catch(e){console.error(`Error loading batch:`,e),console.error(`Error details:`,e.response?.data),Q.value=`Failed to load batch information. Please try again.`}finally{J.value=!1}},be=()=>{q.value.push({barcode:``})},xe=e=>{q.value.length>1&&q.value.splice(e,1)},$=e=>{let t=q.value.findIndex(e=>!e.barcode.trim());t===-1?q.value.push({barcode:e}):q.value[t].barcode=e},Se=async()=>{let e=q.value.filter(e=>!e.barcode.trim());if(e.length!==0)try{let{generateMultipleBarcodes:t}=await l(async()=>{let{generateMultipleBarcodes:e}=await import(`./useBarcode-BxhOWQlc.js`);return{generateMultipleBarcodes:e}},__vite__mapDeps([0,1,2,3])),n=await t(e.length),r=0;q.value.forEach((e,t)=>{!e.barcode.trim()&&r<n.length&&(e.barcode=n[r],r++)})}catch(e){console.error(`Error generating barcodes:`,e)}},Ce=e=>new Intl.NumberFormat(`en-PK`).format(e),we=async()=>{Y.value=!0,X.value={},Z.value=``,Q.value=``;let e=!1;if(q.value.forEach((t,n)=>{t.barcode.trim()||(X.value[`baskets.${n}.barcode`]=`Barcode is required`,e=!0)}),e){Y.value=!1;return}try{let e=new FormData;e.append(`batch_id`,G),q.value.forEach((t,n)=>{e.append(`baskets[${n}][barcode]`,t.barcode)}),await u.addBasketsToBatch(G,e),Z.value=`Baskets added successfully!`,q.value=[{barcode:``}],setTimeout(()=>{U.push(`/batches`)},2e3)}catch(e){console.error(`Error adding baskets:`,e),Q.value=e.response?.data?.message||`Failed to add baskets. Please try again.`}finally{Y.value=!1}},Te=()=>{_e.logout(),U.push(`/login`)};return(ee,o)=>{let l=te(`router-link`);return i(),t(`div`,g,[d(`nav`,_,[d(`div`,v,[d(`div`,y,[o[3]||=d(`div`,{class:`flex items-center`},[d(`div`,{class:`flex-shrink-0`},[d(`h1`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`A & S Cold Storage`)])],-1),d(`div`,b,[d(`div`,x,[r(p)]),d(`button`,{onClick:o[0]||=(...e)=>s(W)&&s(W)(...e),class:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},[s(ve)?(i(),t(`svg`,C,[...o[2]||=[d(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)]])):(i(),t(`svg`,S,[...o[1]||=[d(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]]))]),r(m),d(`button`,{onClick:Te,class:`px-4 py-2 bg-gradient-to-r from-red-400 to-red-500 text-white rounded-lg hover:from-red-500 hover:to-red-600 transition-all duration-200 font-medium`},` Logout `)])])])]),d(`div`,w,[d(`div`,T,[r(l,{to:`/dashboard`,class:`inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:ne(()=>[...o[4]||=[d(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[d(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),n(` Back to Dashboard `,-1)]]),_:1})]),d(`div`,E,[o[5]||=d(`h2`,{class:`text-3xl font-bold text-gray-900 dark:text-white mb-2`},`Add Baskets to Batch`,-1),d(`p`,D,`Add baskets to batch #`+c(s(G)),1)]),J.value?(i(),t(`div`,O,[...o[6]||=[d(`div`,{class:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500`},null,-1)]])):Q.value?(i(),t(`div`,k,c(Q.value),1)):(i(),t(`div`,A,[d(`div`,j,[o[9]||=d(`h3`,{class:`text-lg font-semibold text-gray-900 dark:text-white mb-2`},`Batch Information`,-1),d(`div`,M,[d(`div`,null,[o[7]||=d(`span`,{class:`font-medium text-gray-600 dark:text-gray-400`},`Customer:`,-1),d(`span`,N,c(K.value?.customer?.full_name||`N/A`),1)]),d(`div`,null,[o[8]||=d(`span`,{class:`font-medium text-gray-600 dark:text-gray-400`},`Unit Price:`,-1),d(`span`,P,`PKR `+c(Ce(K.value?.unit_price)),1)])])]),d(`form`,{onSubmit:le(we,[`prevent`]),class:`space-y-6`},[d(`div`,F,[o[11]||=d(`h3`,{class:`text-lg font-medium text-blue-900 dark:text-blue-100 mb-3`},` ðŸ·ï¸ Auto-Generate Barcodes `,-1),r(h,{onBarcodeSelected:$,"onUpdate:modelValue":$}),d(`div`,{class:`mt-3`},[d(`button`,{onClick:Se,type:`button`,class:`w-full bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 flex items-center justify-center`},[...o[10]||=[d(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[d(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z`})],-1),n(` Generate All Empty Fields `,-1)]])])]),d(`div`,null,[o[14]||=d(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Baskets * `,-1),d(`div`,I,[(i(!0),t(ue,null,a(q.value,(n,r)=>(i(),t(`div`,{key:r,class:`flex items-center space-x-3`},[d(`div`,L,[re(d(`input`,{"onUpdate:modelValue":e=>n.barcode=e,type:`text`,class:ie([`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors duration-200`,{"border-red-500":X.value[`baskets.${r}.barcode`]}]),placeholder:`Barcode ${r+1}`},null,10,R),[[ce,n.barcode]]),X.value[`baskets.${r}.barcode`]?(i(),t(`p`,z,c(X.value[`baskets.${r}.barcode`]),1)):e(``,!0)]),q.value.length>1?(i(),t(`button`,{key:0,onClick:e=>xe(r),type:`button`,class:`p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200`},[...o[12]||=[d(`svg`,{class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[d(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16`})],-1)]],8,de)):e(``,!0)]))),128))]),d(`button`,{onClick:be,type:`button`,class:`mt-3 inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},[...o[13]||=[d(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[d(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 6v6m0 0v6m0-6h6m-6 0H6`})],-1),n(` Add Another Basket `,-1)]])]),d(`div`,B,[d(`button`,{type:`submit`,disabled:Y.value,class:`w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-lg hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium`},[Y.value?(i(),t(`span`,H,[...o[15]||=[d(`svg`,{class:`animate-spin -ml-1 mr-3 h-5 w-5 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`},[d(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),d(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),n(` Adding Baskets... `,-1)]])):(i(),t(`span`,fe,`Add Baskets to Batch`))],8,V)]),Z.value?(i(),t(`div`,pe,c(Z.value),1)):e(``,!0),Q.value?(i(),t(`div`,me,c(Q.value),1)):e(``,!0)],32)]))]),o[16]||=d(`footer`,{class:`bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 mt-16`},[d(`div`,{class:`max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8`},[d(`p`,{class:`text-center text-sm text-gray-500 dark:text-gray-400`},` Powered by Emeriosoft `)])],-1)])}}};var U=he;export{U as default};