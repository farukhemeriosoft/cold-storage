import{B as e,D as t,E as n,G as r,H as i,J as a,L as o,M as s,N as ee,P as c,T as l,V as te,X as u,c as d,d as ne,l as re,o as ie,p as ae,z as f}from"./index-BVLw4TQv.js";import{b as oe}from"./AppHeader-C9Ya2WuS.js";import"./LanguageSwitcher-BXvKoB3n.js";const se={class:`min-h-screen bg-gradient-to-br from-gray-50 via-gray-100 to-gray-200 dark:from-gray-900 dark:via-gray-800 dark:to-gray-700 transition-colors duration-300`},ce={class:`w-full py-8 px-[2%]`},le={class:`w-full`},ue={class:`mb-8`},de={class:`flex items-center justify-between`},fe={key:0,class:`mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4`},p={class:`flex items-center justify-between`},m={class:`flex items-center`},h={class:`text-sm font-medium text-blue-800 dark:text-blue-200`},g={key:1,class:`flex justify-center items-center py-12`},_={key:2,class:`bg-red-50 border border-red-200 rounded-lg p-4 mb-6`},v={class:`flex`},y={class:`ml-3`},b={class:`text-sm font-medium text-red-800`},x={key:3,class:`bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 overflow-hidden transition-colors duration-300`},S={class:`overflow-x-auto`},C={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},w={class:`bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700`},T={key:0,class:`bg-white dark:bg-gray-900`},E={colspan:`8`,class:`px-6 py-12 text-center text-gray-500`},D={class:`flex flex-col items-center`},O={class:`px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100`},k={class:`px-6 py-4 whitespace-nowrap`},A={class:`text-sm font-medium text-gray-900 dark:text-gray-100`},j={class:`px-6 py-4 whitespace-nowrap`},M={class:`text-sm text-gray-900 dark:text-gray-100 font-mono`},N={class:`px-6 py-4 whitespace-nowrap`},P={class:`text-sm text-gray-900 dark:text-gray-100`},F={class:`px-6 py-4`},I=[`title`],L={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400`},R={class:`px-6 py-4 whitespace-nowrap text-sm font-medium`},z=[`onClick`],B={class:`px-6 py-4 whitespace-nowrap text-sm font-medium`},V=[`onClick`],pe={key:0,class:`bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6`},me={class:`flex-1 flex justify-between sm:hidden`},H=[`disabled`],he=[`disabled`],ge={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},_e={class:`text-sm text-gray-700`},ve={class:`font-medium`},ye={class:`font-medium`},be={class:`font-medium`},xe={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`,"aria-label":`Pagination`},Se=[`disabled`],Ce=[`onClick`],we=[`disabled`],Te={key:4,class:`mt-6 bg-green-50 border border-green-200 rounded-lg p-4`},Ee={class:`flex`},De={class:`ml-3`},Oe={class:`text-sm font-medium text-green-800`},ke={__name:`CustomersList`,setup(ke){let U=ne(),W=d();re();let G=l([]),K=l([]);l([]);let q=l(!1),J=l(``),Y=l(``),X=l(``),Z=l({current_page:1,last_page:1,per_page:15,total:0,from:0,to:0});a(async()=>{W.query.search&&(X.value=W.query.search),await Q()});let Q=async(e=1)=>{q.value=!0,J.value=``;try{let t=await ae.getCustomers(e),n=t.data.data||t.data,r=n.data||n||[];K.value=r,X.value?Ae():G.value=r,n.current_page&&(Z.value={current_page:n.current_page,last_page:n.last_page,per_page:n.per_page,total:n.total,from:n.from,to:n.to}),await Me()}catch(e){console.error(`Error loading customers:`,e),J.value=`Failed to load customers. Please try again.`}finally{q.value=!1}},Ae=()=>{if(!X.value){G.value=K.value;return}let e=X.value.toLowerCase().trim();G.value=K.value.filter(t=>t.full_name?.toLowerCase().includes(e)||t.cnic_number?.toLowerCase().includes(e)||t.phone_number?.toLowerCase().includes(e)||t.address?.toLowerCase().includes(e))},je=()=>{X.value=``,G.value=K.value,U.push(`/customers`)},Me=async()=>{try{let e=[],t=1,n=!0;for(;n;){let r=await ie.getBatches(t),i=r.data.data||r.data,a=[];i.data?(a=i.data,n=t<i.last_page):Array.isArray(i)?(a=i,n=!1):(a=[i],n=!1),e=e.concat(a),t++}let r={};e.forEach(e=>{let t=e.customer_id||e.customer?.id;t&&(r[t]=(r[t]||0)+1)}),G.value=G.value.map(e=>({...e,batches_count:r[e.id]||0}))}catch(e){console.error(`Error loading batch counts:`,e)}},Ne=e=>{U.push(`/edit-customer/${e.id}`)},Pe=()=>{let e=[],t=Z.value.current_page,n=Z.value.last_page,r=Math.max(1,t-2),i=Math.min(n,r+4);i-r<4&&(r=Math.max(1,i-4));for(let t=r;t<=i;t++)e.push(t);return e},Fe=e=>{if(!e)return`N/A`;let t=new Date(e);return t.toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`})},$=e=>e.batches_count||e.batches?.length||e.total_batches||e.batch_count||(e.batches&&Array.isArray(e.batches)?e.batches.length:0)||0,Ie=e=>{U.push(`/customer-batches/${e.id}`)};return(a,l)=>{let d=ee(`router-link`);return o(),n(`div`,se,[i(oe,{"show-back":!0}),e(`main`,ce,[e(`div`,le,[e(`div`,ue,[e(`div`,de,[l[5]||=e(`div`,null,[e(`h1`,{class:`text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2`},`Customers`),e(`p`,{class:`text-gray-600 dark:text-gray-400`},`Manage your customer database`)],-1),i(d,{to:`/new-customer`,class:`bg-gradient-to-r from-emerald-400 to-emerald-500 hover:from-emerald-500 hover:to-emerald-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 flex items-center`},{default:c(()=>[...l[4]||=[e(`svg`,{class:`h-5 w-5 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 6v6m0 0v6m0-6h6m-6 0H6`})],-1),r(` Add New Customer `,-1)]]),_:1})])]),X.value?(o(),n(`div`,fe,[e(`div`,p,[e(`div`,m,[l[6]||=e(`svg`,{class:`h-5 w-5 text-blue-500 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z`})],-1),e(`span`,h,` Showing search results for: "`+u(X.value)+`" `,1)]),e(`button`,{onClick:je,class:`text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200 text-sm font-medium`},` Clear search `)])])):t(``,!0),q.value?(o(),n(`div`,g,[...l[7]||=[e(`div`,{class:`animate-spin rounded-full h-12 w-12 border-b-2 border-gray-600`},null,-1)]])):J.value?(o(),n(`div`,_,[e(`div`,v,[l[8]||=e(`div`,{class:`flex-shrink-0`},[e(`svg`,{class:`h-5 w-5 text-red-400`,viewBox:`0 0 20 20`,fill:`currentColor`},[e(`path`,{"fill-rule":`evenodd`,d:`M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z`,"clip-rule":`evenodd`})])],-1),e(`div`,y,[e(`p`,b,u(J.value),1)])])])):(o(),n(`div`,x,[l[20]||=e(`div`,{class:`px-6 py-4 bg-gradient-to-r from-gray-800 to-black`},[e(`h3`,{class:`text-lg font-semibold text-white`},`Customer List`)],-1),e(`div`,S,[e(`table`,C,[l[13]||=e(`thead`,{class:`bg-gray-50/95 dark:bg-gray-800/80 backdrop-blur sticky top-0 z-10`},[e(`tr`,null,[e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` ID `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Full Name `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` CNIC Number `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Phone Number `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Address `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Created At `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Lot `),e(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider`},` Actions `)])],-1),e(`tbody`,w,[G.value.length===0?(o(),n(`tr`,T,[e(`td`,E,[e(`div`,D,[l[10]||=e(`svg`,{class:`h-12 w-12 text-gray-400 mb-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z`})],-1),l[11]||=e(`p`,{class:`text-lg font-medium text-gray-900 mb-2`},`No customers found`,-1),l[12]||=e(`p`,{class:`text-gray-500 mb-4`},`Get started by adding your first customer`,-1),i(d,{to:`/new-customer`,class:`bg-gradient-to-r from-emerald-400 to-emerald-500 hover:from-emerald-500 hover:to-emerald-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200`},{default:c(()=>[...l[9]||=[r(` Add Customer `,-1)]]),_:1})])])])):t(``,!0),(o(!0),n(f,null,s(G.value,t=>(o(),n(`tr`,{key:t.id,class:`odd:bg-gray-50 even:bg-white dark:odd:bg-gray-800 dark:even:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200`},[e(`td`,O,` #`+u(t.id),1),e(`td`,k,[e(`div`,A,u(t.full_name),1)]),e(`td`,j,[e(`div`,M,u(t.cnic_number),1)]),e(`td`,N,[e(`div`,P,u(t.phone_number),1)]),e(`td`,F,[e(`div`,{class:`text-sm text-gray-900 dark:text-gray-100 max-w-xs truncate`,title:t.address},u(t.address),9,I)]),e(`td`,L,u(Fe(t.created_at)),1),e(`td`,R,[e(`button`,{onClick:e=>Ie(t),class:`text-green-600 hover:text-green-900 bg-green-50 hover:bg-green-100 dark:text-green-400 dark:hover:text-green-300 dark:bg-green-900/20 dark:hover:bg-green-900/30 px-3 py-1 rounded-md transition-colors duration-200`},u($(t))+` lot`+u($(t)===1?``:`s`),9,z)]),e(`td`,B,[e(`button`,{onClick:e=>Ne(t),class:`text-blue-600 hover:text-blue-900 bg-blue-50 hover:bg-blue-100 dark:text-blue-400 dark:hover:text-blue-300 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 px-3 py-1 rounded-md transition-colors duration-200`},` Edit `,8,V)])]))),128))])])]),Z.value.last_page>1?(o(),n(`div`,pe,[e(`div`,me,[e(`button`,{onClick:l[0]||=e=>Q(Z.value.current_page-1),disabled:Z.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed`},` Previous `,8,H),e(`button`,{onClick:l[1]||=e=>Q(Z.value.current_page+1),disabled:Z.value.current_page>=Z.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed`},` Next `,8,he)]),e(`div`,ge,[e(`div`,null,[e(`p`,_e,[l[14]||=r(` Showing `,-1),e(`span`,ve,u(Z.value.from),1),l[15]||=r(` to `,-1),e(`span`,ye,u(Z.value.to),1),l[16]||=r(` of `,-1),e(`span`,be,u(Z.value.total),1),l[17]||=r(` results `,-1)])]),e(`div`,null,[e(`nav`,xe,[e(`button`,{onClick:l[2]||=e=>Q(Z.value.current_page-1),disabled:Z.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed`},[...l[18]||=[e(`span`,{class:`sr-only`},`Previous`,-1),e(`svg`,{class:`h-5 w-5`,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 20 20`,fill:`currentColor`,"aria-hidden":`true`},[e(`path`,{"fill-rule":`evenodd`,d:`M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z`,"clip-rule":`evenodd`})],-1)]],8,Se),(o(!0),n(f,null,s(Pe(),e=>(o(),n(`button`,{key:e,onClick:t=>Q(e),class:te([e===Z.value.current_page?`z-10 bg-gray-50 border-gray-500 text-gray-600`:`bg-white border-gray-300 text-gray-500 hover:bg-gray-50`,`relative inline-flex items-center px-4 py-2 border text-sm font-medium`])},u(e),11,Ce))),128)),e(`button`,{onClick:l[3]||=e=>Q(Z.value.current_page+1),disabled:Z.value.current_page>=Z.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed`},[...l[19]||=[e(`span`,{class:`sr-only`},`Next`,-1),e(`svg`,{class:`h-5 w-5`,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 20 20`,fill:`currentColor`,"aria-hidden":`true`},[e(`path`,{"fill-rule":`evenodd`,d:`M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z`,"clip-rule":`evenodd`})],-1)]],8,we)])])])])):t(``,!0)])),Y.value?(o(),n(`div`,Te,[e(`div`,Ee,[l[21]||=e(`div`,{class:`flex-shrink-0`},[e(`svg`,{class:`h-5 w-5 text-green-400`,viewBox:`0 0 20 20`,fill:`currentColor`},[e(`path`,{"fill-rule":`evenodd`,d:`M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z`,"clip-rule":`evenodd`})])],-1),e(`div`,De,[e(`p`,Oe,u(Y.value),1)])])])):t(``,!0)])])])}}};var U=ke;export{U as default};