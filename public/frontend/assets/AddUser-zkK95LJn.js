import{A as e,B as t,E as n,G as r,H as i,J as a,L as o,M as s,N as c,P as l,Q as u,T as d,X as f,d as p,e as m,l as h,u as g,v as _,w as v,y,z as b}from"./index-6BYkH0DY.js";const x={class:`add-user`},S={class:`bg-white rounded-lg shadow-md p-6`},C={class:`flex justify-between items-center mb-6`},w={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},T=[`value`],E={class:`space-y-2`},D=[`id`,`value`],O=[`for`],k={class:`text-gray-500`},A={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},j=[`value`],M=[`value`],N={class:`flex justify-end space-x-4 pt-6 border-t`},P=[`disabled`],F={__name:`AddUser`,setup(m){let F=p(),I=h(),L=d(!1),R=d([]),z=d({name:``,email:``,password:``,status:`active`,role_ids:[]}),B=e(()=>z.value.email?z.value.email.split(`@`)[0].toLowerCase().replace(/[^a-z0-9]/g,``):`user_`+Date.now()),V=e(()=>new Date().toLocaleDateString(`en-US`,{year:`numeric`,month:`long`,day:`numeric`})),H=e(()=>new Date().toLocaleDateString(`en-US`,{year:`numeric`,month:`long`,day:`numeric`})),U=async()=>{try{let e=await fetch(`/api/user-management/roles/available`,{headers:{Authorization:`Bearer ${I.token}`,"Content-Type":`application/json`}}),t=await e.json();R.value=t.data}catch(e){console.error(`Error loading roles:`,e)}},W=async()=>{if(z.value.role_ids.length===0){alert(`Please select at least one role`);return}L.value=!0;try{let e=await fetch(`/api/user-management`,{method:`POST`,headers:{Authorization:`Bearer ${I.token}`,"Content-Type":`application/json`},body:JSON.stringify(z.value)});if(e.ok)alert(`User created successfully!`),F.push(`/user-management`);else{let t=await e.json();alert(`Error: ${t.message||`Failed to create user`}`)}}catch(e){console.error(`Error creating user:`,e),alert(`Error creating user. Please check console for details.`)}finally{L.value=!1}};return a(()=>{U()}),(e,a)=>{let d=c(`router-link`);return o(),n(`div`,x,[t(`div`,S,[t(`div`,C,[a[6]||=t(`h2`,{class:`text-2xl font-bold text-gray-800`},`Add New User`,-1),i(d,{to:`/user-management`,class:`bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors`},{default:l(()=>[...a[5]||=[r(` Back to Users `,-1)]]),_:1})]),t(`form`,{onSubmit:y(W,[`prevent`]),class:`space-y-6`},[t(`div`,w,[t(`div`,null,[a[7]||=t(`label`,{class:`block text-sm font-medium text-gray-700 mb-2`},` Full Name * `,-1),u(t(`input`,{"onUpdate:modelValue":a[0]||=e=>z.value.name=e,type:`text`,required:``,class:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:`Enter full name`},null,512),[[v,z.value.name]])]),t(`div`,null,[a[8]||=t(`label`,{class:`block text-sm font-medium text-gray-700 mb-2`},` Email Address * `,-1),u(t(`input`,{"onUpdate:modelValue":a[1]||=e=>z.value.email=e,type:`email`,required:``,class:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:`Enter email address`},null,512),[[v,z.value.email]])]),t(`div`,null,[a[9]||=t(`label`,{class:`block text-sm font-medium text-gray-700 mb-2`},` User ID `,-1),t(`input`,{value:B.value,type:`text`,disabled:``,class:`w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500`,placeholder:`Auto-generated`},null,8,T),a[10]||=t(`p`,{class:`text-xs text-gray-500 mt-1`},`User ID will be auto-generated`,-1)]),t(`div`,null,[a[11]||=t(`label`,{class:`block text-sm font-medium text-gray-700 mb-2`},` Password * `,-1),u(t(`input`,{"onUpdate:modelValue":a[2]||=e=>z.value.password=e,type:`password`,required:``,class:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:`Enter password`},null,512),[[v,z.value.password]])]),t(`div`,null,[a[13]||=t(`label`,{class:`block text-sm font-medium text-gray-700 mb-2`},` Account Status `,-1),u(t(`select`,{"onUpdate:modelValue":a[3]||=e=>z.value.status=e,class:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500`},[...a[12]||=[t(`option`,{value:`active`},`Active`,-1),t(`option`,{value:`inactive`},`Inactive`,-1)]],512),[[_,z.value.status]])]),t(`div`,null,[a[14]||=t(`label`,{class:`block text-sm font-medium text-gray-700 mb-2`},` Assign Role * `,-1),t(`div`,E,[(o(!0),n(b,null,s(R.value,e=>(o(),n(`div`,{key:e.id,class:`flex items-center`},[u(t(`input`,{id:`role-${e.id}`,"onUpdate:modelValue":a[4]||=e=>z.value.role_ids=e,value:e.id,type:`checkbox`,class:`rounded border-gray-300 text-blue-600 focus:ring-blue-500`},null,8,D),[[g,z.value.role_ids]]),t(`label`,{for:`role-${e.id}`,class:`ml-2 text-sm text-gray-700`},[r(f(e.name)+` `,1),t(`span`,k,`(`+f(e.description)+`)`,1)],8,O)]))),128))])])]),t(`div`,A,[t(`div`,null,[a[15]||=t(`label`,{class:`block text-sm font-medium text-gray-700 mb-2`},` Member Since `,-1),t(`input`,{value:V.value,type:`text`,disabled:``,class:`w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500`},null,8,j)]),t(`div`,null,[a[16]||=t(`label`,{class:`block text-sm font-medium text-gray-700 mb-2`},` Last Updated `,-1),t(`input`,{value:H.value,type:`text`,disabled:``,class:`w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500`},null,8,M)])]),t(`div`,N,[i(d,{to:`/user-management`,class:`px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors`},{default:l(()=>[...a[17]||=[r(` Cancel `,-1)]]),_:1}),t(`button`,{type:`submit`,disabled:L.value,class:`px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},f(L.value?`Creating...`:`Create User`),9,P)])],32)])])}}};var I=m(F,[[`__scopeId`,`data-v-934d6982`]]);export{I as default};