const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/useBarcode-Dpko4q_c.js","assets/useBarcode-CobztDgs.js","assets/index-BlF1ZIv-.js","assets/index-CREkxLVt.css"])))=>i.map(i=>d[i]);
import{A as e,C as t,D as n,E as r,G as ee,H as te,K as i,L as a,M as ne,N as o,b as s,c as re,d as ie,j as ae,m as c,p as oe,r as se,s as ce,u as l,v as u,w as d,y as f,z as p}from"./index-BlF1ZIv-.js";import{b as le}from"./useDarkMode-BPtTVGNh.js";import{b as ue}from"./MegaSearch-DluE57NX.js";import{b as de}from"./LanguageSwitcher-BCL_-mgC.js";import"./useBarcode-CobztDgs.js";import{b as m}from"./BarcodeGenerator-DAGFJN7Z.js";const h={class:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`},g={class:`bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700`},_={class:`w-full px-[2%]`},v={class:`flex justify-between items-center h-16`},y={class:`flex items-center space-x-4`},b={class:`hidden md:block w-80`},x={key:0,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},S={key:1,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},C={class:`w-full py-8 px-[2%]`},w={class:`mb-6`},T={class:`text-center mb-8`},E={class:`text-gray-600 dark:text-gray-400`},D={key:0,class:`flex justify-center items-center py-12`},O={key:1,class:`bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg mb-6`},k={key:2,class:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8`},A={class:`mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg`},j={class:`grid grid-cols-1 md:grid-cols-2 gap-4 text-sm`},M={class:`ml-2 text-gray-900 dark:text-white`},N={class:`ml-2 text-gray-900 dark:text-white`},P={class:`mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},F={class:`space-y-3`},I={class:`flex-1`},L=[`onUpdate:modelValue`,`placeholder`],fe={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},R=[`onClick`],z={class:`pt-4`},B=[`disabled`],V={key:0,class:`flex items-center justify-center`},pe={key:1},me={key:0,class:`p-4 bg-green-100 dark:bg-green-900 border border-green-400 dark:border-green-600 text-green-700 dark:text-green-300 rounded-lg`},he={key:1,class:`p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 rounded-lg`},ge={__name:`AddBasketToBatch`,setup(ge){let H=ie(),_e=re(),ve=ae(),{isDarkMode:ye,toggleDarkMode:U}=le(),W=_e.params.id,G=i(null),K=i([{barcode:``}]),q=i(!1),J=i(!1),Y=i({}),X=i(``),Z=i(``);e(async()=>{W?await be():Z.value=`Batch ID is required`});let be=async()=>{q.value=!0,Z.value=``;try{let e=await c.getBatches(1),t=e.data.data.data||e.data.data||e.data,n=t.find(e=>e.id==W);n?G.value=n:Z.value=`Batch not found. Please check the batch ID.`}catch(e){console.error(`Error loading batch:`,e),console.error(`Error details:`,e.response?.data),Z.value=`Failed to load batch information. Please try again.`}finally{q.value=!1}},xe=()=>{K.value.push({barcode:``})},Se=e=>{K.value.length>1&&K.value.splice(e,1)},Q=e=>{let t=K.value.findIndex(e=>!e.barcode.trim());t===-1?K.value.push({barcode:e}):K.value[t].barcode=e},Ce=async()=>{let e=K.value.filter(e=>!e.barcode.trim());if(e.length!==0)try{let{generateMultipleBarcodes:t}=await s(async()=>{let{generateMultipleBarcodes:e}=await import(`./useBarcode-Dpko4q_c.js`);return{generateMultipleBarcodes:e}},__vite__mapDeps([0,1,2,3])),n=await t(e.length),r=0;K.value.forEach((e,t)=>{!e.barcode.trim()&&r<n.length&&(e.barcode=n[r],r++)})}catch(e){console.error(`Error generating barcodes:`,e)}},$=e=>new Intl.NumberFormat(`en-PK`).format(e),we=async()=>{J.value=!0,Y.value={},X.value=``,Z.value=``;let e=!1;if(K.value.forEach((t,n)=>{t.barcode.trim()||(Y.value[`baskets.${n}.barcode`]=`Barcode is required`,e=!0)}),e){J.value=!1;return}try{let e=new FormData;e.append(`batch_id`,W),K.value.forEach((t,n)=>{e.append(`baskets[${n}][barcode]`,t.barcode)}),await c.addBasketsToBatch(W,e),X.value=`Baskets added successfully!`,K.value=[{barcode:``}],setTimeout(()=>{H.push(`/batches`)},2e3)}catch(e){console.error(`Error adding baskets:`,e),Z.value=e.response?.data?.message||`Failed to add baskets. Please try again.`}finally{J.value=!1}},Te=()=>{ve.logout(),H.push(`/login`)};return(e,i)=>{let s=r(`router-link`);return t(),d(`div`,h,[l(`nav`,g,[l(`div`,_,[l(`div`,v,[i[3]||=l(`div`,{class:`flex items-center`},[l(`div`,{class:`flex-shrink-0`},[l(`h1`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`A & S Cold Storage`)])],-1),l(`div`,y,[l(`div`,b,[p(ue)]),l(`button`,{onClick:i[0]||=(...e)=>a(U)&&a(U)(...e),class:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},[a(ye)?(t(),d(`svg`,S,[...i[2]||=[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)]])):(t(),d(`svg`,x,[...i[1]||=[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]]))]),p(de),l(`button`,{onClick:Te,class:`px-4 py-2 bg-gradient-to-r from-red-400 to-red-500 text-white rounded-lg hover:from-red-500 hover:to-red-600 transition-all duration-200 font-medium`},` Logout `)])])])]),l(`div`,C,[l(`div`,w,[p(s,{to:`/dashboard`,class:`inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:ee(()=>[...i[4]||=[l(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),f(` Back to Dashboard `,-1)]]),_:1})]),l(`div`,T,[i[5]||=l(`h2`,{class:`text-3xl font-bold text-gray-900 dark:text-white mb-2`},`Add Baskets to Batch`,-1),l(`p`,E,`Add baskets to batch #`+o(a(W)),1)]),q.value?(t(),d(`div`,D,[...i[6]||=[l(`div`,{class:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500`},null,-1)]])):Z.value?(t(),d(`div`,O,o(Z.value),1)):(t(),d(`div`,k,[l(`div`,A,[i[9]||=l(`h3`,{class:`text-lg font-semibold text-gray-900 dark:text-white mb-2`},`Batch Information`,-1),l(`div`,j,[l(`div`,null,[i[7]||=l(`span`,{class:`font-medium text-gray-600 dark:text-gray-400`},`Customer:`,-1),l(`span`,M,o(G.value?.customer?.full_name||`N/A`),1)]),l(`div`,null,[i[8]||=l(`span`,{class:`font-medium text-gray-600 dark:text-gray-400`},`Unit Price:`,-1),l(`span`,N,`PKR `+o($(G.value?.unit_price)),1)])])]),l(`form`,{onSubmit:se(we,[`prevent`]),class:`space-y-6`},[l(`div`,P,[i[11]||=l(`h3`,{class:`text-lg font-medium text-blue-900 dark:text-blue-100 mb-3`},` ðŸ·ï¸ Auto-Generate Barcodes `,-1),p(m,{onBarcodeSelected:Q,"onUpdate:modelValue":Q}),l(`div`,{class:`mt-3`},[l(`button`,{onClick:Ce,type:`button`,class:`w-full bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 flex items-center justify-center`},[...i[10]||=[l(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z`})],-1),f(` Generate All Empty Fields `,-1)]])])]),l(`div`,null,[i[14]||=l(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Baskets * `,-1),l(`div`,F,[(t(!0),d(ce,null,n(K.value,(e,n)=>(t(),d(`div`,{key:n,class:`flex items-center space-x-3`},[l(`div`,I,[te(l(`input`,{"onUpdate:modelValue":t=>e.barcode=t,type:`text`,class:ne([`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors duration-200`,{"border-red-500":Y.value[`baskets.${n}.barcode`]}]),placeholder:`Barcode ${n+1}`},null,10,L),[[oe,e.barcode]]),Y.value[`baskets.${n}.barcode`]?(t(),d(`p`,fe,o(Y.value[`baskets.${n}.barcode`]),1)):u(``,!0)]),K.value.length>1?(t(),d(`button`,{key:0,onClick:e=>Se(n),type:`button`,class:`p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200`},[...i[12]||=[l(`svg`,{class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16`})],-1)]],8,R)):u(``,!0)]))),128))]),l(`button`,{onClick:xe,type:`button`,class:`mt-3 inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},[...i[13]||=[l(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 6v6m0 0v6m0-6h6m-6 0H6`})],-1),f(` Add Another Basket `,-1)]])]),l(`div`,z,[l(`button`,{type:`submit`,disabled:J.value,class:`w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-lg hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium`},[J.value?(t(),d(`span`,V,[...i[15]||=[l(`svg`,{class:`animate-spin -ml-1 mr-3 h-5 w-5 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`},[l(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),l(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),f(` Adding Baskets... `,-1)]])):(t(),d(`span`,pe,`Add Baskets to Batch`))],8,B)]),X.value?(t(),d(`div`,me,o(X.value),1)):u(``,!0),Z.value?(t(),d(`div`,he,o(Z.value),1)):u(``,!0)],32)]))]),i[16]||=l(`footer`,{class:`bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 mt-16`},[l(`div`,{class:`max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8`},[l(`p`,{class:`text-center text-sm text-gray-500 dark:text-gray-400`},` Powered by Emeriosoft `)])],-1)])}}};var H=ge;export{H as default};