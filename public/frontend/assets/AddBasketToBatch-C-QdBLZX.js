const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/useBarcode-cagsnOje.js","assets/useBarcode-i-2GYP56.js","assets/index-BVLw4TQv.js","assets/index-s71lMUIz.css"])))=>i.map(i=>d[i]);
import{B as e,D as t,E as n,G as r,H as i,J as a,L as o,M as s,Q as ee,T as c,U as l,V as u,X as d,b as f,c as p,d as m,l as h,o as g,w as te,y as ne,z as re}from"./index-BVLw4TQv.js";import{b as ie}from"./AppHeader-C9Ya2WuS.js";import"./LanguageSwitcher-BXvKoB3n.js";import"./useBarcode-i-2GYP56.js";import{b as _}from"./BarcodeGenerator-BzCri57P.js";const v={class:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`},y={class:`w-full py-8 px-[2%]`},b={class:`text-center mb-8`},x={class:`text-gray-600 dark:text-gray-400`},S={key:0,class:`flex justify-center items-center py-12`},C={key:1,class:`bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg mb-6`},w={key:2,class:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8`},T={class:`mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg`},E={class:`grid grid-cols-1 md:grid-cols-2 gap-4 text-sm`},D={class:`ml-2 text-gray-900 dark:text-white`},O={class:`ml-2 text-gray-900 dark:text-white`},k={class:`mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},A={class:`space-y-3`},j={class:`flex-1`},M=[`onUpdate:modelValue`,`placeholder`],N={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},P=[`onClick`],F={class:`pt-4`},I=[`disabled`],ae={key:0,class:`flex items-center justify-center`},L={key:1},R={key:0,class:`p-4 bg-green-100 dark:bg-green-900 border border-green-400 dark:border-green-600 text-green-700 dark:text-green-300 rounded-lg`},z={key:1,class:`p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 rounded-lg`},B={__name:`AddBasketToBatch`,setup(B){let V=m(),H=p();h();let U=H.params.id,W=c(null),G=c([{barcode:``}]),K=c(!1),q=c(!1),J=c({}),Y=H.query.barcode;Y&&(G.value[0].barcode=Y);let X=c(``),Z=c(``);a(async()=>{U?await oe():Z.value=`Batch ID is required`});let oe=async()=>{K.value=!0,Z.value=``;try{let e=await g.getBatches(1),t=e.data.data.data||e.data.data||e.data,n=t.find(e=>e.id==U);n?W.value=n:Z.value=`Batch not found. Please check the batch ID.`}catch(e){console.error(`Error loading batch:`,e),console.error(`Error details:`,e.response?.data),Z.value=`Failed to load batch information. Please try again.`}finally{K.value=!1}},se=()=>{G.value.push({barcode:``})},ce=e=>{G.value.length>1&&G.value.splice(e,1)},Q=e=>{let t=G.value.findIndex(e=>!e.barcode.trim());t===-1?G.value.push({barcode:e}):G.value[t].barcode=e},le=async()=>{let e=G.value.filter(e=>!e.barcode.trim());if(e.length!==0)try{let{generateMultipleBarcodes:t}=await f(async()=>{let{generateMultipleBarcodes:e}=await import(`./useBarcode-cagsnOje.js`);return{generateMultipleBarcodes:e}},__vite__mapDeps([0,1,2,3])),n=await t(e.length),r=0;G.value.forEach((e,t)=>{!e.barcode.trim()&&r<n.length&&(e.barcode=n[r],r++)})}catch(e){console.error(`Error generating barcodes:`,e)}},$=e=>new Intl.NumberFormat(`en-PK`).format(e),ue=async()=>{q.value=!0,J.value={},X.value=``,Z.value=``;let e=!1;if(G.value.forEach((t,n)=>{t.barcode.trim()||(J.value[`baskets.${n}.barcode`]=`Barcode is required`,e=!0)}),e){q.value=!1;return}try{let e=new FormData;e.append(`batch_id`,U),G.value.forEach((t,n)=>{e.append(`baskets[${n}][barcode]`,t.barcode)}),await g.addBasketsToBatch(U,e),X.value=`Baskets added successfully!`,G.value=[{barcode:``}],setTimeout(()=>{V.push(`/batches`)},2e3)}catch(e){console.error(`Error adding baskets:`,e),Z.value=e.response?.data?.message||`Failed to add baskets. Please try again.`}finally{q.value=!1}};return(a,c)=>(o(),n(`div`,v,[i(ie,{"show-back":!0}),e(`div`,y,[e(`div`,b,[c[0]||=e(`h2`,{class:`text-3xl font-bold text-gray-900 dark:text-white mb-2`},`Add Baskets to Batch`,-1),e(`p`,x,`Add baskets to batch #`+d(l(U)),1)]),K.value?(o(),n(`div`,S,[...c[1]||=[e(`div`,{class:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500`},null,-1)]])):Z.value?(o(),n(`div`,C,d(Z.value),1)):(o(),n(`div`,w,[e(`div`,T,[c[4]||=e(`h3`,{class:`text-lg font-semibold text-gray-900 dark:text-white mb-2`},`Batch Information`,-1),e(`div`,E,[e(`div`,null,[c[2]||=e(`span`,{class:`font-medium text-gray-600 dark:text-gray-400`},`Customer:`,-1),e(`span`,D,d(W.value?.customer?.full_name||`N/A`),1)]),e(`div`,null,[c[3]||=e(`span`,{class:`font-medium text-gray-600 dark:text-gray-400`},`Unit Price:`,-1),e(`span`,O,`PKR `+d($(W.value?.unit_price)),1)])])]),e(`form`,{onSubmit:ne(ue,[`prevent`]),class:`space-y-6`},[e(`div`,k,[c[6]||=e(`h3`,{class:`text-lg font-medium text-blue-900 dark:text-blue-100 mb-3`},` ðŸ·ï¸ Auto-Generate Barcodes `,-1),i(_,{onBarcodeSelected:Q,"onUpdate:modelValue":Q}),e(`div`,{class:`mt-3`},[e(`button`,{onClick:le,type:`button`,class:`w-full bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 flex items-center justify-center`},[...c[5]||=[e(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z`})],-1),r(` Generate All Empty Fields `,-1)]])])]),e(`div`,null,[c[9]||=e(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Baskets * `,-1),e(`div`,A,[(o(!0),n(re,null,s(G.value,(r,i)=>(o(),n(`div`,{key:i,class:`flex items-center space-x-3`},[e(`div`,j,[ee(e(`input`,{"onUpdate:modelValue":e=>r.barcode=e,type:`text`,class:u([`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors duration-200`,{"border-red-500":J.value[`baskets.${i}.barcode`]}]),placeholder:`Barcode ${i+1}`},null,10,M),[[te,r.barcode]]),J.value[`baskets.${i}.barcode`]?(o(),n(`p`,N,d(J.value[`baskets.${i}.barcode`]),1)):t(``,!0)]),G.value.length>1?(o(),n(`button`,{key:0,onClick:e=>ce(i),type:`button`,class:`p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200`},[...c[7]||=[e(`svg`,{class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16`})],-1)]],8,P)):t(``,!0)]))),128))]),e(`button`,{onClick:se,type:`button`,class:`mt-3 inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},[...c[8]||=[e(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 6v6m0 0v6m0-6h6m-6 0H6`})],-1),r(` Add Another Basket `,-1)]])]),e(`div`,F,[e(`button`,{type:`submit`,disabled:q.value,class:`w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-lg hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium`},[q.value?(o(),n(`span`,ae,[...c[10]||=[e(`svg`,{class:`animate-spin -ml-1 mr-3 h-5 w-5 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`},[e(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),e(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),r(` Adding Baskets... `,-1)]])):(o(),n(`span`,L,`Add Baskets to Batch`))],8,I)]),X.value?(o(),n(`div`,R,d(X.value),1)):t(``,!0),Z.value?(o(),n(`div`,z,d(Z.value),1)):t(``,!0)],32)]))]),c[11]||=e(`footer`,{class:`bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 mt-16`},[e(`div`,{class:`max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8`},[e(`p`,{class:`text-center text-sm text-gray-500 dark:text-gray-400`},` Powered by Emeriosoft `)])],-1)]))}};var V=B;export{V as default};