const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/useBarcode-CRiEvwAk.js","assets/useBarcode-Se6kNtJq.js","assets/index-DtN-fcwp.js","assets/index-fGVZumQX.css"])))=>i.map(i=>d[i]);
import{A as e,C as t,D as n,E as r,G as i,H as ee,I as te,K as ne,L as re,O as a,P as o,Q as ie,S as s,b as c,c as ae,d as oe,l as se,o as l,t as ce,v as le,w as ue,y as u,z as d}from"./index-DtN-fcwp.js";import{b as de}from"./useDarkMode-BFH4b8fl.js";import{b as f}from"./MegaSearch-8CFJ7-2e.js";import{b as p}from"./LanguageSwitcher-BGX9PX3v.js";import"./useBarcode-Se6kNtJq.js";import{b as m}from"./BarcodeGenerator-BYbaO9vJ.js";const h={class:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`},g={class:`bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700`},_={class:`w-full px-[2%]`},v={class:`flex justify-between items-center h-16`},y={class:`flex items-center space-x-4`},b={class:`hidden md:block w-80`},x={key:0,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},S={key:1,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},C={class:`w-full py-8 px-[2%]`},w={class:`mb-6`},T={class:`text-center mb-8`},E={class:`text-gray-600 dark:text-gray-400`},D={key:0,class:`flex justify-center items-center py-12`},O={key:1,class:`bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg mb-6`},k={key:2,class:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8`},A={class:`mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg`},j={class:`grid grid-cols-1 md:grid-cols-2 gap-4 text-sm`},M={class:`ml-2 text-gray-900 dark:text-white`},N={class:`ml-2 text-gray-900 dark:text-white`},P={class:`mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},F={class:`space-y-3`},I={class:`flex-1`},L=[`onUpdate:modelValue`,`placeholder`],R={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},z=[`onClick`],fe={class:`pt-4`},B=[`disabled`],V={key:0,class:`flex items-center justify-center`},pe={key:1},me={key:0,class:`p-4 bg-green-100 dark:bg-green-900 border border-green-400 dark:border-green-600 text-green-700 dark:text-green-300 rounded-lg`},he={key:1,class:`p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 rounded-lg`},ge={__name:`AddBasketToBatch`,setup(ge){let H=oe(),_e=ae(),ve=se(),{isDarkMode:ye,toggleDarkMode:U}=de(),W=_e.params.id,G=a(null),K=a([{barcode:``}]),q=a(!1),J=a(!1),Y=a({}),X=a(``),Z=a(``);r(async()=>{W?await be():Z.value=`Batch ID is required`});let be=async()=>{q.value=!0,Z.value=``;try{let e=await l.getBatches(1),t=e.data.data.data||e.data.data||e.data,n=t.find(e=>e.id==W);n?G.value=n:Z.value=`Batch not found. Please check the batch ID.`}catch(e){console.error(`Error loading batch:`,e),console.error(`Error details:`,e.response?.data),Z.value=`Failed to load batch information. Please try again.`}finally{q.value=!1}},xe=()=>{K.value.push({barcode:``})},Se=e=>{K.value.length>1&&K.value.splice(e,1)},Q=e=>{let t=K.value.findIndex(e=>!e.barcode.trim());t===-1?K.value.push({barcode:e}):K.value[t].barcode=e},Ce=async()=>{let e=K.value.filter(e=>!e.barcode.trim());if(e.length!==0)try{let{generateMultipleBarcodes:t}=await c(async()=>{let{generateMultipleBarcodes:e}=await import(`./useBarcode-CRiEvwAk.js`);return{generateMultipleBarcodes:e}},__vite__mapDeps([0,1,2,3])),n=await t(e.length),r=0;K.value.forEach((e,t)=>{!e.barcode.trim()&&r<n.length&&(e.barcode=n[r],r++)})}catch(e){console.error(`Error generating barcodes:`,e)}},$=e=>new Intl.NumberFormat(`en-PK`).format(e),we=async()=>{J.value=!0,Y.value={},X.value=``,Z.value=``;let e=!1;if(K.value.forEach((t,n)=>{t.barcode.trim()||(Y.value[`baskets.${n}.barcode`]=`Barcode is required`,e=!0)}),e){J.value=!1;return}try{let e=new FormData;e.append(`batch_id`,W),K.value.forEach((t,n)=>{e.append(`baskets[${n}][barcode]`,t.barcode)}),await l.addBasketsToBatch(W,e),X.value=`Baskets added successfully!`,K.value=[{barcode:``}],setTimeout(()=>{H.push(`/batches`)},2e3)}catch(e){console.error(`Error adding baskets:`,e),Z.value=e.response?.data?.message||`Failed to add baskets. Please try again.`}finally{J.value=!1}},Te=()=>{ve.logout(),H.push(`/login`)};return(r,a)=>{let c=te(`router-link`);return i(),e(`div`,h,[u(`nav`,g,[u(`div`,_,[u(`div`,v,[a[3]||=u(`div`,{class:`flex items-center`},[u(`div`,{class:`flex-shrink-0`},[u(`h1`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`A & S Cold Storage`)])],-1),u(`div`,y,[u(`div`,b,[n(f)]),u(`button`,{onClick:a[0]||=(...e)=>o(U)&&o(U)(...e),class:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},[o(ye)?(i(),e(`svg`,S,[...a[2]||=[u(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)]])):(i(),e(`svg`,x,[...a[1]||=[u(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]]))]),n(p),u(`button`,{onClick:Te,class:`px-4 py-2 bg-gradient-to-r from-red-400 to-red-500 text-white rounded-lg hover:from-red-500 hover:to-red-600 transition-all duration-200 font-medium`},` Logout `)])])])]),u(`div`,C,[u(`div`,w,[n(c,{to:`/dashboard`,class:`inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:ne(()=>[...a[4]||=[u(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[u(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),t(` Back to Dashboard `,-1)]]),_:1})]),u(`div`,T,[a[5]||=u(`h2`,{class:`text-3xl font-bold text-gray-900 dark:text-white mb-2`},`Add Baskets to Batch`,-1),u(`p`,E,`Add baskets to batch #`+s(o(W)),1)]),q.value?(i(),e(`div`,D,[...a[6]||=[u(`div`,{class:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500`},null,-1)]])):Z.value?(i(),e(`div`,O,s(Z.value),1)):(i(),e(`div`,k,[u(`div`,A,[a[9]||=u(`h3`,{class:`text-lg font-semibold text-gray-900 dark:text-white mb-2`},`Batch Information`,-1),u(`div`,j,[u(`div`,null,[a[7]||=u(`span`,{class:`font-medium text-gray-600 dark:text-gray-400`},`Customer:`,-1),u(`span`,M,s(G.value?.customer?.full_name||`N/A`),1)]),u(`div`,null,[a[8]||=u(`span`,{class:`font-medium text-gray-600 dark:text-gray-400`},`Unit Price:`,-1),u(`span`,N,`PKR `+s($(G.value?.unit_price)),1)])])]),u(`form`,{onSubmit:le(we,[`prevent`]),class:`space-y-6`},[u(`div`,P,[a[11]||=u(`h3`,{class:`text-lg font-medium text-blue-900 dark:text-blue-100 mb-3`},` ðŸ·ï¸ Auto-Generate Barcodes `,-1),n(m,{onBarcodeSelected:Q,"onUpdate:modelValue":Q}),u(`div`,{class:`mt-3`},[u(`button`,{onClick:Ce,type:`button`,class:`w-full bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 flex items-center justify-center`},[...a[10]||=[u(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[u(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z`})],-1),t(` Generate All Empty Fields `,-1)]])])]),u(`div`,null,[a[14]||=u(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Baskets * `,-1),u(`div`,F,[(i(!0),e(ue,null,ee(K.value,(t,n)=>(i(),e(`div`,{key:n,class:`flex items-center space-x-3`},[u(`div`,I,[re(u(`input`,{"onUpdate:modelValue":e=>t.barcode=e,type:`text`,class:ie([`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors duration-200`,{"border-red-500":Y.value[`baskets.${n}.barcode`]}]),placeholder:`Barcode ${n+1}`},null,10,L),[[ce,t.barcode]]),Y.value[`baskets.${n}.barcode`]?(i(),e(`p`,R,s(Y.value[`baskets.${n}.barcode`]),1)):d(``,!0)]),K.value.length>1?(i(),e(`button`,{key:0,onClick:e=>Se(n),type:`button`,class:`p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200`},[...a[12]||=[u(`svg`,{class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[u(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16`})],-1)]],8,z)):d(``,!0)]))),128))]),u(`button`,{onClick:xe,type:`button`,class:`mt-3 inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},[...a[13]||=[u(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[u(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 6v6m0 0v6m0-6h6m-6 0H6`})],-1),t(` Add Another Basket `,-1)]])]),u(`div`,fe,[u(`button`,{type:`submit`,disabled:J.value,class:`w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-lg hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium`},[J.value?(i(),e(`span`,V,[...a[15]||=[u(`svg`,{class:`animate-spin -ml-1 mr-3 h-5 w-5 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`},[u(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),u(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),t(` Adding Baskets... `,-1)]])):(i(),e(`span`,pe,`Add Baskets to Batch`))],8,B)]),X.value?(i(),e(`div`,me,s(X.value),1)):d(``,!0),Z.value?(i(),e(`div`,he,s(Z.value),1)):d(``,!0)],32)]))]),a[16]||=u(`footer`,{class:`bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 mt-16`},[u(`div`,{class:`max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8`},[u(`p`,{class:`text-center text-sm text-gray-500 dark:text-gray-400`},` Powered by Emeriosoft `)])],-1)])}}};var H=ge;export{H as default};