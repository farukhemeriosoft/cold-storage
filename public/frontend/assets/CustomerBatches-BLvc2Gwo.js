import{A as e,C as t,D as n,E as r,G as i,K as a,L as o,N as s,c,d as l,j as ee,m as te,n as ne,s as re,t as ie,u,v as d,w as f,x as ae,y as p,z as m}from"./index-BlF1ZIv-.js";import{b as oe}from"./useDarkMode-BPtTVGNh.js";import{b as se}from"./MegaSearch-DluE57NX.js";import{b as h}from"./LanguageSwitcher-BCL_-mgC.js";const g={class:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`},_={class:`bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700`},v={class:`w-full px-[2%]`},y={class:`flex justify-between items-center h-16`},b={class:`flex items-center space-x-4`},x={class:`hidden md:block w-80`},S={key:0,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},C={key:1,class:`h-5 w-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},w={class:`w-full py-8 px-[2%]`},T={class:`mb-6`},E={class:`flex justify-between items-center mb-8`},D={class:`text-gray-600 dark:text-gray-400`},O={key:0,class:`flex justify-center items-center py-12`},k={key:1,class:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6`},A={class:`flex`},j={class:`ml-3`},M={class:`text-sm font-medium text-red-800 dark:text-red-200`},N={key:2,class:`bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden`},P={class:`overflow-x-auto`},F={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},I={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},L={key:0,class:`bg-white dark:bg-gray-800`},ce={class:`px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white`},R={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400`},z={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},B={class:`font-medium`},V={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},H={class:`flex flex-col`},U={class:`font-medium`},W={class:`text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded-full inline-block w-fit`},G={class:`px-6 py-4 whitespace-nowrap text-sm font-medium`},le={__name:`CustomerBatches`,setup(le){let K=l(),ue=c(),de=ee(),{isDarkMode:fe,toggleDarkMode:q}=oe(),J=a([]),Y=a(null),X=a(!1),Z=a(``),pe=a(`asc`),me=ie(()=>J.value.map((e,t)=>({...e,serialNumber:t+1})));e(async()=>{let e=ue.params.id;e&&(await ge(e),await he(e))});let he=async e=>{try{let t=await ne.getCustomer(e);Y.value=t.data.data||t.data}catch(e){console.error(`Error loading customer info:`,e)}},ge=async e=>{X.value=!0,Z.value=``;try{let t=await te.getBatches(1),n=t.data.data||t.data,r=[];r=n.data?n.data:Array.isArray(n)?n:[n],J.value=r.filter(t=>t.customer_id===e||t.customer?.id===e||t.customer?.id?.toString()===e.toString()),_e()}catch(e){console.error(`Error loading customer batches:`,e),Z.value=`Failed to load customer batches. Please try again.`}finally{X.value=!1}},_e=()=>{J.value.sort((e,t)=>{let n=new Date(e.created_at),r=new Date(t.created_at);return pe.value===`asc`?n-r:r-n})},Q=e=>new Intl.NumberFormat(`en-PK`).format(e),$=e=>e.baskets_count||e.baskets?.length||e.total_baskets||e.basket_count||(e.baskets&&Array.isArray(e.baskets)?e.baskets.length:0)||0,ve=e=>{let t=$(e),n=parseFloat(e.unit_price)||0,r=t*n;return Q(r)},ye=e=>{if(!e)return`N/A`;let t=new Date(e);return t.toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`})},be=()=>{de.logout(),K.push(`/login`)};return(e,a)=>{let c=r(`router-link`);return t(),f(`div`,g,[u(`nav`,_,[u(`div`,v,[u(`div`,y,[a[3]||=u(`div`,{class:`flex items-center`},[u(`div`,{class:`flex-shrink-0`},[u(`h1`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`A & S Cold Storage`)])],-1),u(`div`,b,[u(`div`,x,[m(se)]),u(`button`,{onClick:a[0]||=(...e)=>o(q)&&o(q)(...e),class:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},[o(fe)?(t(),f(`svg`,C,[...a[2]||=[u(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)]])):(t(),f(`svg`,S,[...a[1]||=[u(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]]))]),m(h),u(`button`,{onClick:be,class:`px-4 py-2 bg-gradient-to-r from-red-400 to-red-500 text-white rounded-lg hover:from-red-500 hover:to-red-600 transition-all duration-200 font-medium`},` Logout `)])])])]),u(`div`,w,[u(`div`,T,[m(c,{to:`/dashboard`,class:`inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:i(()=>[...a[4]||=[u(`svg`,{class:`w-4 h-4 mr-2`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[u(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),p(` Back to Dashboard `,-1)]]),_:1})]),u(`div`,E,[u(`div`,null,[a[5]||=u(`h2`,{class:`text-3xl font-bold text-gray-900 dark:text-white mb-2`},`Customer Lots`,-1),u(`p`,D,`Batch history for `+s(Y.value?.full_name||`Customer`),1)])]),X.value?(t(),f(`div`,O,[...a[6]||=[u(`div`,{class:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500`},null,-1)]])):Z.value?(t(),f(`div`,k,[u(`div`,A,[a[7]||=u(`div`,{class:`flex-shrink-0`},[u(`svg`,{class:`h-5 w-5 text-red-400`,viewBox:`0 0 20 20`,fill:`currentColor`},[u(`path`,{"fill-rule":`evenodd`,d:`M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z`,"clip-rule":`evenodd`})])],-1),u(`div`,j,[u(`p`,M,s(Z.value),1)])])])):(t(),f(`div`,N,[u(`div`,P,[u(`table`,F,[a[10]||=u(`thead`,{class:`bg-gray-50 dark:bg-gray-700 sticky top-0 z-10`},[u(`tr`,null,[u(`th`,{class:`px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Sno `),u(`th`,{class:`px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Created Date `),u(`th`,{class:`px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Unit Price (PKR) `),u(`th`,{class:`px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Total Price `),u(`th`,{class:`px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `)])],-1),u(`tbody`,I,[J.value.length===0?(t(),f(`tr`,L,[...a[8]||=[u(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500 dark:text-gray-400`},[u(`div`,{class:`flex flex-col items-center`},[u(`svg`,{class:`w-12 h-12 text-gray-400 dark:text-gray-500 mb-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[u(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4`})]),u(`p`,{class:`text-lg font-medium`},`No batches found`),u(`p`,{class:`text-sm`},`This customer has no batch history`)])],-1)]])):d(``,!0),(t(!0),f(re,null,n(me.value,e=>(t(),f(`tr`,{key:e.id,class:`bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[u(`td`,ce,s(e.serialNumber),1),u(`td`,R,s(ye(e.created_at)),1),u(`td`,z,[u(`span`,B,`PKR `+s(Q(e.unit_price)),1)]),u(`td`,V,[u(`div`,H,[u(`span`,U,`PKR `+s(ve(e)),1),u(`span`,W,s($(e))+` basket`+s($(e)===1?``:`s`),1)])]),u(`td`,G,[m(c,{to:`/add-baskets-to-batch/${e.id}`,class:`text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 transition-colors duration-200`},{default:i(()=>[...a[9]||=[p(` Add Baskets `,-1)]]),_:1},8,[`to`])])]))),128))])])])]))]),a[11]||=ae(`<footer class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-t border-gray-200/50 dark:border-gray-700/50 mt-12 transition-colors duration-300"><div class="w-full px-[2%] py-6"><div class="flex flex-col items-center justify-center space-y-2"><div class="flex items-center space-x-2"><div class="h-6 w-6 bg-gradient-to-r from-gray-800 to-black rounded-md flex items-center justify-center"><svg class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><span class="text-sm text-gray-600 dark:text-gray-400">Powered by</span><span class="text-sm font-semibold text-gray-800 dark:text-gray-200">Emeriosoft</span></div><p class="text-xs text-gray-500 dark:text-gray-400">Â© 2024 A &amp; S Cold Storage Management System. All rights reserved.</p></div></div></footer>`,1)])}}};var K=le;export{K as default};